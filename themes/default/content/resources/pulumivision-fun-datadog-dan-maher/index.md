---
preview_image:
hero:
  image: /icons/containers.svg
  title: "PulumiVision - Fun With Datadog with Dan Maher"
title: "PulumiVision - Fun With Datadog with Dan Maher"
meta_desc: |
    Join Matt Stratton and Dan Maher from Datadog to learn how to setup monitoring for any stack and any app
url_slug: pulumivision-fun-datadog-dan-maher
featured: false
pre_recorded: true
pulumi_tv: false
unlisted: false
gated: false
type: webinars
external: false
no_getting_started: true
block_external_search_index: false
main:
  title: "PulumiVision - Fun With Datadog with Dan Maher"
  description: |
    Join Matt Stratton and Dan Maher from Datadog to learn how to setup monitoring for any stack and any app
  sortable_date: 2021-12-17T09:05:32Z
  youtube_url: https://www.youtube.com/embed/sDsO25iLN2E
transcript: |
    Oh, all right. Welcome back to Pulumi Vision. Uh, I'm Maddie Stratton. I'm a staff developer advocate here at Pulumi. And, uh, I've got, you've got Dan, I do have Dan. I also have, you also have someone else. I don't see them. No, what I do have is I've got, um, ok. My, my Twitch uh, chat did not have the, the video muted somehow. So I was catching that in my ear because everybody knows I'm so good at, at Twitch. Um Not like you've ever streamed anything to Twitch before. Not like I've ever streamed. Make mistake. Yeah. Uh There we go. Ok. So that's muted. That's fine. Anyway, uh, what we're gonna be doing today here, uh, we're gonna be playing alone, playing around, playing around loud, playing a lounge, playing lounge with a little data dog and the, uh, and Pulumi. So as we kind of, before we kind of get into this a little bit before we jump into, into really getting into stuff, Dan, do you wanna maybe give like a little mini spiel about data in case people don't know what it is? I never heard of that for sure. For sure. Well, hi. Hi, Twitch and youtube and Pulumi fans. My name is Dan. I'm an engineer on the community team at Data Dog. Uh So what is Data Dog? Uh Well, like a couple of four years back when I first joined Data Dog, it was relatively straightforward, could like sort of like put one slide up and be like data dog is a metric segregation platform or something like this, right? Uh It was really simple, right? And now I was like, OK, hold on, let me read to you from the saga of my people, right? So basically what it is is it's an observable platform and it's got a ton of products inside it. So we've got like, you know, all the good monitoring and, you know, alerting and like, you know, metrics and dashboards and all that stuff you're probably used to, right? Like we've got all that, that's fine. And then we've also got like a big logs product, right? So like aggregating all your logs, it's got a crock parser built right into it. It's super good. We rub a little machine learning on there, don't worry about it. And we got some synthetics, we got some real user monitoring. Uh We've got a whole network component now and there's a whole bunch of stuff too. Uh But at the end of the day again, it's an observable platform. Uh it's api driven if you want it to be and that's a lot of what we're gonna be touching on today. Isn't that right? Matt? Yes. Uh all those things and what we're going to do, uh in addition to uh configuring some data, do stuff, we're gonna be doing it with Pulumi, which is uh infrastructure software. If Pulumi is new to you. Uh Welcome. Uh If Pulumi is not new to you, welcome. Anyway, welcome everybody, welcome to all of our friends uh who are joining us from all over the place. Uh But what we can do is we're gonna use uh a real programming language in this case today, we're gonna be using Go and that is specifically for my buddy engine who's always on my streams and saying, how come we don't write anything in go lang. And I'm like, here it is, this is very special for that. So we've got, we've got that going on. Um But you could write your Pulumi programs in, in typescript in any of the dot net languages or also in Python. We're gonna do it in today. And one of the fun things about uh using a uh a full programming language like that is we get, you know, fun things like conditionals and loops and packaging and all that fun stuff. So this is not a demo. OK? We don't have like kind of a slick prepared thing going on. So if that's what you're looking at, we actually have the opposite of that. We have the least like what is, what is the opposite of slick? I, that's a very good question. Rough. I guess. It's not rough. It's friction, friction like vica paper. Yes. Yes. This is very, it's a viscous demo. Yes. This, this stream is coarse grained sandpaper. But what I thought we would do is, um, poke around a little bit in, uh, the registry page for the data dog provider for Pulumi. Take a look at some of the API stuff we can do. Dan is a data dog expert. I'm not. And so he'll kind of you better. How long, how long have you been working at data dog, Dan, I'll give it my best try. You, you, you, you declined to answer the question. What I said. How long have you worked at David? Do? So let's talk about Pulumi some more. OK. Apparently this is sensitive information. No, no, no, I've been there four years now. Four years. Yeah. Awesome. Yeah, cool. Um Other other, I guess other fun fact, I might as well just jump into stuff because why not? Well, we'll, we'll start doing some tech in a minute, but I did promise Mert and merriment and amusement uh for this. So uh other other fun things if you uh care about this. So Dan is also, so, Frosty is also one of my co creators co-host of Devops party games, another Twitch stream. You can subscribe to Twitch dot TV slash Devops party games and we're actually doing uh a cool one this Saturday um for the Kubernetes contributor uh celebration, but that's not what we're here to talk about. We are here to talk about that. So, what I thought we would start is before we kind of dig into uh the code, we're gonna do a little exploring here. Um And I'm gonna take a look at what we're, we're starting with the um So if you, if you were to go to Oops, yeah. So the data web page, it's a web page. Look at that, right? So this is over on the Pulumi registry at Pulumi dot com slash registry. And if we look at data dog. So for all the thing about the registry, this is let's go back real quick. This is cool. This is like all the packages uh that we have published for all sorts of different things you might want to do like AWS or GCP or cnet's, et cetera. Um But in this case, we're gonna talk about data. It's kind of a one stop shop where you're gonna find the stuff that you need um to get. Um OK. So we do have a question on how to uh, well, we're gonna dig into this. The question came up in the chat. I don't know that we're gonna have the answer to this, but we will follow up. But so looking for examples on how integrate data dog and Pulumi lambda uh with Aws. So maybe after we dig in a little bit to this Dan, we'll, we'll see if we can think of some ideas. Uh I think that's a good question. I would. It's a great question. Yeah, we'll look into that. We'll check it out. Um, ok. But uh uh so we can kind of see, we have a little bit of an overview here here. Uh I have uh one thing uh that we don't have any how to guides written for Data dog. And one of the fun things about doing this with uh Dan is this is uh giving me some information. I'm gonna try to, to write, write a couple of these. So hopefully we'll have some of those. But in the meantime, just a couple of things, um they give a little, little example code. Uh I, I wanna walk through the installation because I've already done this part just so we're not gonna show it because some of this takes a while. So the first thing is data provider is just a package, right? And whatever programming language that you're using. So in this case, it's this go package. I've already done a go get Zoom in a bit. OK. Um Sure Jeremy, why not? There you go. How about that? Um Cool. OK. The um but so the trick is the other, the other thing that we did is I set up a trial data dog account. Uh and you can get a 14 day trial they did that right? Then 14 days you're on mute, Dan. Do you know if you press m it mutes? Go figure, I would have thought that that would make you louder, like more loud m for more. Uh Anyway, so you get a 14 day trial. Um But what, now there's a couple of different ways. So you have to tell Pulumi your Pulumi program when you're gonna run it, how to talk to data dog, right? API keys or like passwords. This is also why I'm not doing it live even though my 14 day trial is gonna be over in about a week. So like, I don't know how much you can do if you weren't able if I doxed uh my polo uh my data dog showing off API keys on stream is just bad form in general. It just, it just, it just makes you look like a Yeah. Yeah. You know, you can do better than that. So you can do it as an environment variable. Um But the other thing is that you can also store them as a configuration in your, in your Pulumi program that's encrypted and that's what I've done and I'll show you that in a minute. But so what I did is uh Dan helped me uh get set up with my data dog account. That being said most regular people do not need help from a developer advocate just to set up a data dog account. It's very easy to do for everyone else. I apparently, uh, did need hand holding, I guess. Maybe it was just because it was fun. Um, you're a special friend, Matt. I appreciate it. Yeah, I get, I get, I get the white glove, uh, Deverell treatment from data dog. Uh, data Dog. I got a Nintendo switch from Data Dog once. Uh, that's the best conference swag I ever get that, get that out for Reinvent, I guess. Right. Oh, no, no, it was at uh Devotes Philly, I think. Wow. Yeah, I wanted in a drawing. I wanted a drawing. Yeah. Yeah. Yeah, I remember the, the only other thing about the conferences. I do you know other, other fun conference swag story. Um So thought works always gives away at their booth like a really awesome Lego kit. They'll give away like a super awesome Lego kit. And then, but then the same raffle they'll give away like a handful of copies of uh Jez and Dave's book Continuous Delivery, which by the way, if you haven't read important book, you should read it. I read it. I own it also. I have won it from thought works six times because I always enter because I want the Lego and every time, not every time I've never won the LEGO but I will and, and I sort of, you know, the thought works, you know, everybody up, they'll be like, it's mad and then I'll give it to somebody and, you know, it's fine. Anyway, the important thing here is when I, when I, uh I obtained my API key and my app key from data dog, I stored them as secrets. Uh So they're encrypted and, uh then we're gonna kind of dig into the API docs and figure out what we want to do in the meantime though. Let's go back. I can look at some code, uh, and see what, what we're doing there. So if we go back and take a look, do a little walkthrough of my uh, um Bloomy program that I started. So I'll, I'll let you know what I've done so far. And the first thing is I have uh, already scaffolded out my Pulumi program, you know. So if you're, if you're starting from scratch, you could say Pulumi New and then the language and it'll, it'll create the scaffolding, gets all the pieces and parts in there. I've also already done the go get to pull in the data dog provider. So if we take a look at this is the kind of anatomy of my Pulumi program. Uh It's a go program. So main dot go is our, is our entry point. Oh, by the way, this is fun because Dan and I are trying to figure out how to, how, uh like two minutes before the stream. I'm like, there's some way that I can stream vs code into a web browse. Let's totally alter the parameters of our entire development environment. Two minutes before we go live, I think that's probably the safest course of action that, that seems right and proper to me. Uh, so, ok, cool. And then, um, yeah, and then, uh, if we take a look at our kind of go mad, we'll see, you know, that it, uh, we're, uh, so this, uh, AWS SDK, this was from something I was messing around with earlier. Uh but we are bringing in the data dog and the SDK because when Dan and I were setting this up last week, it was like, well, I need to source this data from somewhere. I need to prepopulate it. Why don't I create a VM and register that, do all this stuff and that was just too much work. Um Now, the other thing is our Pulumi dot Yaml, we have to have some YAML because you can't DEV ops without YAML, it's critical. Um So the plumy ya ya, this is kind of dull. This is just like kind of the metadata about my overall plumy program. It has a name, dedo it. Uh they have the run time in this case, it's go and I am not clever at all. So we didn't give it a good name. Now, uh Pulumi has this idea of stacks and a stack is uh an instance of your program maybe with different configuration values, you might think about it as if your program is a dial. So the shape of the dial doesn't change, but maybe what you set the dial to might be different. So a stack is an and, and we start with our DEV stack and I've already, this is where I have put in my API key and my app key. This is not them, this is encrypted, right? So, uh so these are, this is all encrypted, but it's available to my Pulumi program and then I don't have to, to worry about environment variables and stuff. Um So just to sort of take a little gander of how this works. Uh If you've used Pulumi with other languages like typescript or Python, same idea just is just how go does import. So we're bringing in the data dog provider is data dog. We have good old plume here and everything's kind of running in our main function. And what I did is just a little bit of boilerplate just to sort of make sure everything looks right is creating a user in data doc. So Dan, what's the user? Why would I need a user? I already have a user, I have a log in. Yep. That's correct. Why might I want to do this? Well, no, but I mean at the end of the day, right? Like you have to be able to uh uh you have to be able to tell data dog kind of who created what? Right. There's this notion of attribution for actions within the context of data dog, right? So yes, you have an API key and that's sort of the table stakes for interacting with the API and that's, that's normal, right? But then in data dog inside of data dog, there's this notion of like, you know, accounts and, and, and also accountability to a certain degree, right? And that way you can sort of trace back well, who touched what, when, why so on and so forth. So here we're saying, you know, we, we, we, we're, we're declaring who is the user quote unquote or, or a user because I can have, you can have multiple users. Exactly. Right. Uh So you can attach a different actions to different users. And then that way when it's in data, do you're looking through your history who created the dashboard, who set up this monitor? Uh you know, if you're looking in the event stream and you're seeing these like Pulumi events that are firing off, uh that could be like assigned to a particular account. So it doesn't have to be a person, right? It could be a role account, for example, right? You could be talking about, you know, a team or, you know AAA part of the organization or a product team or something like that. Uh It's, it's pretty wide open, that's just the idea. Um Yeah, so we got a question uh which I think is interesting. Uh It said, how, how will this work if you're doing something like again, we're defining this in our infrastructures code. Um And, and, and just says you should I enter a tech user and make it configurable? Now, I think what you might do in this case again, because this is conditionals when I think about uh I would think about this similar to the way I've seen people use Pulumi to configure github, right? So maybe what you might want to do is you would have an infrastructure repot that has your Pulumi program that uh generates and, and configures data dog. And because what we could do is again, this case, I'm just pulling in strings, but I could loop over this user object and maybe pull it from a file, right? And so if I want to go ahead and add somebody, I can just do a pull request against the repo that puts in their name and email address and then when and then, and my Infra code could run inside of my C I CD and then go and do that. So this case, we're doing a lot of hard coding because we're just creating one user. Um But we could easily, I've again, sort of the thing where you're like, hey, I've got some new person. I want to do that. I also imagine data dog could be connected to some other source of truth other than your Infra code. So, you know, that might, this might not be your way. But and all this stuff. And then, you know, on the Infra side too, if this, this could clearly be tied into some sort of, uh, you know, back end where you're pulling in, you know, user data, you know, some sort of LDP translation at the end of the day, it's just code, right. So there's a lot of, you know, opportunities here to, to build what works for you. But I wanna wanna show here and the reason I sort of deleted what I had in there already and we're gonna do something a little more interesting in a minute. But this is just giving us a quick, a little bit of an illustration of kind of a very simple thing because creating user only has a few things. So uh one thing I want you to know. So um again, we're kind of bringing it in, we're saying it's of a type new user because we imported data dog. So that's, and uh there's a couple of different parameters that a user has. One is it needs an email. So, hey, welcome to everybody knowing my personal email now. But, you know, I'm sure you could have figured that out and, but also one of the uh properties of a user is a name. Now, you notice we got this type ahead. I started typing name like and, and, and Pulumi and VS code new. Um This is again, the beautiful part of using uh a real programming language here is there's no Pulumi if you go into my vs code extensions, there's no Pulumi extension happening here. This is just, this is all because these are methods, these are properties, these are all parts of that package. Uh and I did have to turn co-pilot off just to make sure that that was uh because Copilot actually works pretty well with bloomy. Um but it did, you know, so the name we know it's a string and we'll say it's Matt Stratton. Um And what does it? Uh-huh Nope, see now this is because it's not actually a string, it needs to be a Pulumi string because go, but again, if we wanted to know what the name, property proper, what these things do, um it's gonna tell us all, all of the stuff that we want. So it's just normal things and then out of curiosity, we might be like, so I could actually set it to be disabled, maybe, maybe I want to create a user that is not enabled. Um I don't want to do that. Now, what will happen is um so this is gonna go ahead and create that user. And what I'm also gonna do is it might be interesting. So Pulumi has this notion of, of imports and exports, right? So uh resources can uh take imports, they take things that come in like like the, the uh the email, you know, all of this, but then also exports things and one of the exports of the user object or the user resource is the ID, right? That's the user id, that, that data dog knows it as and we can do fun things with exports. We can pass them around to other Pulumi programs to or to other stacks in the same Pulumi program or we can also just export them out like to the cli which is what I'm gonna do here. So I'm exporting out basically a variable, I'm exporting out a value called user ID. And it's gonna be whatever the idea is of this thing here and that'll give me the access to that. So if we were to go ahead now and say we're gonna run our Pulumi program, which is we say Pulumi up and what Pulumi Up is gonna do is the first thing is it's gonna do a preview. It's gonna say if, if I run it's gonna, it's gonna sort of uh evaluate the program and make sure that, you know, I don't have any bad code or at least not glaringly bad code. It's gonna judge you a little it, right. I mean, it's gonna judge me a little bit but it won't necessarily catch everything. Uh which is why we write tests. Uh And it's gonna tell me, hey, if, if you run this update right now, here's what's gonna happen. And in this case, it's going to create the stack because uh while a stack was defined it hasn't been created out on the Pulumi side and it's gonna create this, this user. And if I were to go into details, it's gonna actually be very specific about what it's gonna do. So we're gonna see, you know, it's, this is the urn this is all, you know, the information disabled is false. Set user invitation is true because some of these are default values, right? So I know exactly what it's gonna do. And if I say sure, go ahead and run that, it's gonna reach out to uh data, run through the API and in just a minute, I'm actually gonna have an email sitting in my inbox inviting me to join this organization. I really like that. It adds to the defaults as well, right? Because it's one thing to be like, OK, I I know what the properties are of, you know, of this particular object or whatever, right? And I know I wanna set them, but it's totally possible that there's gonna be stuff that's happening as a result of defaults that I didn't expect. And so this is gonna pop out and go like this is literally everything that's going to happen. This is every option that's gonna be set, this is every value that's gonna get touched and it gives you an opportunity to be like, no, wait, that's a default that I didn't want or wait. I don't even know what that is. Stop. I need to, I need to look at that a little further. Um So, and what I did there while Dan was, was, was, was uh following up on that is again, I was able to get that stack output of user ID. So that's my, my user ID. And this case, not like the most interesting thing in the world unless I don't know, maybe it's interesting to you. But that way we, we were able to get that programmatically and then one final thing I want to talk about and then let's dig into doing some other cool stuff. Um When I talked about where this happened and you'll see there is this link that says View Live and this is on the Pulumi Service. So Pulumi needs some way to understand the state of your infrastructure because you're telling Pulumi for my stuff. I want my stuff to look like this, right? So Pulumi kind of has to know what it looks like or what it doesn't look like and oh, sorry, good call. Let's Yeah, let me, let me get rid of that. Uh We don't, we don't need to have that anymore. There you go. Oh, now it's hidden behind my name. Let's hit, enter again, man. You're good. There you go. Yeah. Nice. Hey, look, there it is. Uh streaming is hard. Um OK. Anyway, thanks, thanks Paul. You got there. Yeah. Um Anyhoo, the uh you have to have somewhere to store the state and there's a bunch of. And you can, if you, if you go to, you know, Pulumi, if you go to our docks, there's a bunch of stuff that will be more in depth, but just to know you can store it in all sorts of different, what we call them back ends. If you want to stick it in blob, storage on Azure, you can put it in S3 bucket, you could store it locally if you want. Really, the easiest way is to use the Pulumi service, which is free for individuals. That's our sass. And so what has happening there is when it's running out and blah, blah, blah, that's happening. Cool. Let's um we're gonna flip over and look at the Api Docs again and I wanna, you know, maybe, maybe and even actually before we do that, um What is wrong with me? That's a really good question. Don't say anything, Jeremy. I mean, I didn't wanna say the window is that we kind of were all asking which? Oh, it's this one. Here we go. OK. See this is where if we were on like a different twitch that we often are, are on together where I would just have to like talk about the upcoming game or like, you know, put in some Devops related joke or something you could do that. Is that OK? Ok. Commentator? Hey, let's, let's, let's do it, let's do a little data. Let's uh just take a look at a couple of things here. So uh this is, this is why Zoom in and Matt two men. There we go. Zoomed in. OK. Um So this is, this is data dog. I am 33% done setting up. I got news for you. That's about as far as I go. Um We have one host uh going in. Do we want to take a minute before we go configure? I think what we were gonna do was maybe configure a monitor. But should we talk about like what a monitor would be and maybe look at one and then make one by hand. Yeah, that sounds reasonable. Yeah, I mean, I mean, to be honest, Dan. Dan knows more about my see data than I do because he gave me some darker thing to run to make it happen. So, yeah, so fun fact. That's, that's just, that's just you Id Jen. Uh Right. It's all good. Uh rolls off the tongue though. Hey, then 6 50. But uh so yeah, so let's go take a look. Obviously you can see here there's a lot of stuff along uh the column on the left hand side. And as I mentioned earlier, this is all sort of the different things that are in there. I didn't even talk about all of them, right? I didn't even mention C I CD, I didn't even mention A PM like there's a whole bunch of good stuff in there, right? And uh you know, we take, I mean, we have to be on a full day long stream just to sort of dive into all this stuff. Ain't nobody got that kind of time. So we thought, what can we kind of show off that's gonna be relevant to a fairly broader group of people that's not gonna require a ton of a priori knowledge to, to get value out of. And the one thing that everybody I think can relate to is when something goes wrong, a computer tells you about it, right? So that's what a monitor is. So let's go take a look at that. Uh You can either see other things under the monitors menu there though. There's like, you know, stuff dealing with uh SL OS and stuff dealing with incidents, like there's a whole incident management product built in there, there's an slo product that's built in there. So, you know, stuff we could look at later maybe, but we'll talk about, you know, monitors. So a default installation uh out of the box data dog, you get one monitor and that's uh your NTP monitor. And what that is is making sure that every machine or well for values of machine everywhere that the agent is running this little go program that, you know, collects some system data, right, and feeds up data dog and it's got stats D built in and a little Python parser and stuff wherever that's running. It's making sure that, that the clock sync for that machine. And I'm putting this in big old quotes, right? Because what does that word even mean? Now that machine uh doesn't have too much skew. Uh I've said it before and I'll say again on, on stage and on camera, uh accurately, measuring time is the single most important thing you can do as a computer engineer. Right? It's nothing else will work if, if time isn't being measured, at least somewhat accurately, right? So that's why we, we put that out of the box. We say this has to go and we have to have this alert because if, if that doesn't work, then it doesn't matter what the hell else you do, right. That's right. So you can see here that this is what we call a custom check. It's a custom check because it's a check that was generated, right? And if we scroll up a little bit more, we can actually see uh you know, we see the ID that was created in this case, it was an internal ID. So boom, right? When it was created, it was created by us for you. Normally, it would have, for example, that uh user that was created earlier. Uh when Matt showed the Pulumi code or the the go code that was calling uh you know, plumy functions, right? And here we also see that there's a query. So you can actually see the query. Now, this is gonna be important for us uh in a moment to actually be able to see the, the raw query. There's a little message describing what it does. This is all configurable by uh the practitioner, right, either directly in the web interface or, you know, via some sort of uh infrastructure as go mechanism, for example, right? And it's, it's marked down so you can do all the stuff in there, you can boilers, you can import dashboards, you can keep it live. It's actually really cool. Uh And if we scroll down, you can just see that the history of it, it's all green because we've got our clock synced, right? Which is really nice and then whatever kind of events uh and Watchdog is just our basically anomaly detector. So if we had like 1000 hosts and one of them was off, Watchdog would tell us, for example. Cool. All right. So let's, let's make a, an interesting monitor or monitor with our very exciting Docker Complex. Um So we have this, this app that's been running for sort of the last few days on my other laptop in, in a Docker container, generating fake traffic and reporting to data dog. So uh and the reason I, I don't know this app, but this is also what that, that Dan does demos with. So you might know a good monitor to pick, you'd think that. Ok. Well, should we just make one up? Right. So what do we do? So we let's, we're gonna, let's do, let's create a monitor by, by hand. Exactly. That's the first thing we'll do is just to show kind of what the manual process there looks like and kind of walk through it. So, right from there you could see there's a new, a new monitor. We click on that and there's a bunch of different sort of monitor types, as you can imagine. Right. This isn't, you know, or whatever where it's just like, I don't know. Is it up, is it down? Right? Although we do have an up down, that's the host check, right? There's metrics, anomaly checks, it's forecasting and network checks, rum all, all sorts of stuff and the one at the very bottom, which I don't think we're gonna look at. But I think it's important to notice you can, you can import them directly from Jason. So it means if you've got like, if you know, you're migrating monitors over from another project or something like that and you literally just dump them out as Json and reimport them doing that by hand, you do it once to see how it works and then use automation. All right. So to give you a little hint here that everything that we're about to look at, right is, is at the end of the day, it's just code, it's just configuration, it's, it's in many cases just Json that we can spit out. And once you have a Json Blob you can do a lot with it, right. So here, for example, uh a, a very, very simple one would be a host check, right? So we checked to see if one of our host is reporting. So, uh you can, you know, look at the host doctor or desktop is the only one that's really important uh Because it's the only one that's running. So. Right. Uh That's the check, you know, you can check for individual hosts, you can check for clusters or values of, right? And there's a whole sort of, you know, way of thinking about machines and how they work together, right? And then if you're checking for clusters, they could be broken down by groups. We're not doing that. Uh notify if data is missing for more than two minutes because the host could be up. But if it's not reporting, that's a different problem, you probably want to know about that. By the way, you can't notify me yet because I did not accept the invitation to. That's why, that's why you're only seeing um the, the name that Jeremy has decided he's referring to now 96 decade. But right. Uh and that there are, there are situations where you're gonna have hosts that go down and they go down in ways you expect um and you expect them to come back up later and you can just go, look, it's gonna go down. I know it's gonna go down, it goes down freaking every night. I don't care, you know what I mean? Just let it come back on its own, you know what I mean? Um And then here's the, the part where I said that you could sort of just write kind of whatever you want. So, you know, you have to give it a name where it says example, monitor name, that's actually super important. Uh You don't have to put anything in the message, but you do have to give it a name and uh I like you too, Maddie. That's nice. Uh And then here it's, you know, as you can see it, it sort of looks like a, a slack tool bar, right? Uh It's because it's got a markdown ish thing going on in there. Um You could put links to your run books or you could put images, you know, some sort of a doge meme, something like that, right? Uh At your tags on there, get a priority, et cetera, et cetera. This is all stuff that would make more sense if we had a much larger environment with a lot more stuff set up, right? Um Oh Yeah, yeah, we gotta get in on that. Definitely gotta get on that cake action 100%. Yeah. And then, so here we could give it a save, right? And then look at that. We have a monitor. So uh not that exciting host up down. Should it look? Right? But we understand the concepts of a monitor that we wanted. Exactly. Exactly. So if we scroll down to the bottom of this page, we see here something called export monitor. Well, I want to take a look on that. We click export monitor. Boom. What do we get? What do we get? Oh Yeah. Yeah. Look at that. I thought maybe it was popping up where you can see. Yeah. So that's a Jason Blob and here we go. OK. Great. Right. I can take and I can, I can copy pasta this somewhere and then they can munge it and do whatever needs to be done. And, and that's ultimately probably what we'll end up doing to a certain degree the first time around. But spoilers, you wouldn't do this in production. What you would do is you would just do this programmatically if you needed to. Right. You just hit up the API and go give me this Jason Blob and it would feed it back to you. Right. The other thing that we're gonna do is is the information that's in here. We're going to add that to the resource to the monitor resource that we create. So like to know what the query is and stuff when we do this in Pulumi. So I'm gonna just sort of keep this here now. Um we'll, we'll change a couple of things so it'll create a new monitor that's basically the same, but we'll give it a different name and stuff. So let's take a, should we take a look at uh how to hit it with the A P? OK? So if we take a look at the api docs here for the data do provider, this is a monitor. OK? So, and, and you can see we've got the docs and, and all the different languages, you know, to sort of see how some example, usage and typescript Python we're in go. So this should, so if we look at our example, this should look fairly similar to the output that was in that Jason, it's not in J sign, but these are the types of parameters, these types of properties that a monitor has. And if we were to take a look, these are with those properties. So we, you know, it has a message, right? Which is that whole thing about giving me cake, which has maybe boiler plate for every alert really, it really should be, right? And then we have this query, right? And then, so the um the query again, we can, we can pull from that. We have the type and then, and again, all these that are asterisk are, are gonna be required. So let's take a look and I'm gonna flip back over to uh my VS code and we're gonna create ourselves, um we're gonna create ourselves a monitor. OK? So we have our user, nobody cares, but that's fine. So let's go ahead now. And um we are gonna create a new monitor now because this is go if I were to do something like this because this is go because needlessly can't see it. Oh So you can't see what I'm doing. Um It's gonna complain because I'm giving the object a name, I'm giving this thing a name that I'm never gonna use the reason. So it be so we can uh instead we can just say we're creating a monitor but the object doesn't actually need a name. OK? So this is a data dog. Um and it's a new monitor. OK? And then that's in the context. We're gonna call it uh e dog because he's listening. Uh And then we're gonna give it the uh beta dog monitor. Oops monitor. That's why I can't spell there we go. Their dog monitor arcs. I'm trying to figure out what's um what does it not? Oh, there we go. So chairs like monitor and I'm like you can't stop Jer. I can only hope to contain him. Yeah. OK. So, so first we want, we can send an escalation message. So we're gonna say this is gonna be a Pulumi done string and it's gonna be Jeremy wake up. OK? You would probably give it something like message to page duty or something like that, right? OK. Include tags. Now, uh I don't think we were using tags. No, in ours before. So, so we're gonna not do that. We don't need that. That's not required. But what I'm ok, I'm sort of looking at what we had. So we had it, it needs a name. Um, now that name that we gave it was, um, uh, was, this is the name of the object is Jere dog? But then the actual name, like the title of the thing, if you will, this is the title is Jere Dog is less cool. So, so while Betty typing that out, we know we mentioned that we don't have any, uh any tags which uh is, is not like what we're doing here. We're just messing around and, you know, whatever, I'm drinking wine and we're having a good time. But in the real world, you're probably still drinking wine and having a good time, but you're also adding tags, right? You, you, you, you really should be tagging your stuff. Uh You're getting a bunch of tags for free. Basically, if you're, you know, deploy to sort of a cloud infrastructure, your cloud provider is gonna have like, look, here's tags, like here's what region you're in or, you know, stuff like this and that's normal. And then if you have been using any sort of infrastructures code platform for, you know, more than a few minutes you've encountered this idea of tags and you thought like, oh, I don't know, maybe I wanted to play like, what is, what is the name of the app or something? Right? So in, in data dog and it's a little bit specific to data dog. We have this thing called unified service tagging. And there's three tags which are reserved in this model. And that's N environment service service and version, right? So these three are like reserved words. So if you think to yourself, I'm, I like the word version or I like the word service and I've already got my own definition for what these things are. Uh and, and data do those, those three are reserved and they're reserved because as I said, they're part of this unified service tagging model that glues basically the entire product spectrum together. So if you are like deploying your stuff and you have no other tags at all except these three, all of a sudden it unlocks a whole bunch of doors in data do where, where you know, you like all of your logs are suddenly connected to all of your traces, which are suddenly all connected to your, you know, events which are suddenly all connected to your metrics and it works fairly well on the box, which is actually pretty cool. Uh But again, you know, those are three reserved words. Uh So hopefully you're not already using them. So I wanna uh address something. So uh 10 wit brought up and he said, but, but, but Pulumi auto naming. So remember I said that this uh this object, this monitor we're creating it within Pulumi is, is its, its monitor is gonna be named So the actual monitor object wise is gonna be called ja dog with an identifier after it. Ok. So that's to help us uh not have um excuse me, uh name space collisions of stuff. So that's, but it's uh and, and the way it works in data dog will be interesting, we'll have to look at the details of, of how this comes in, we can override that. But the name of the monitor is really more of just a string, right? That doesn't actually even have to be unique probably within data dog, the name value, right? It name. No. Yeah, no, no. Yeah, no, it doesn't have to be like name here is, is just attached to the it's more of a tidy up, it's, it's the name of the object, right? Well, which is well instantiation of ultimately, right? Because this is code that we're talking about here, right? So like, you know, each instantiation is going to be treated as its own, you know, you know, its own thing, right? Um So that doesn't have to be unique in that context just becomes a property of, of the object. Yeah. OK. Uh Let's see, I'm looking at a couple of other things that we set. Notify audit is uh false. We didn't. What does that actually mean though? Um Yeah, I'm sorry, what was not? I was busy talking to Jerry, not what's going on. Notify audit, notify audit. I assume that's some other data dog feature. It is another data, dog feature and uh you put me on the spot. I, I could guess what that is for but I don't wanna bull bullshit on stream. That's totally fine. Um Let's see, we also OK, but it was, I know I saw that in the, in the, in the Jason so we wanted to do it, let's do, but we definitely need the query. So this one we're gonna cheat and we're gonna copy. I'm just gonna look that up for you while you're typing out because now I'm curious because there's so there's this thing, there's this idea of like for example, audit events like SLL audit events, right? And I'm wondering if it's connected to that. It's just that, that string in this context. It's a raw, it's a like a property string and I'm not sure exactly what you're referring to. So I'm just gonna look it up. I am gonna go back here because I don't want this in the Jason. Um Oh man Dead Air. No, I know. What was the Yeah. Yeah. Yeah. And I was trying to find, I thought I saw something in data dog that besides just dumping out the Jason that it would just give me the query. Not in Jason because Oh yeah. Yeah, you can see that. Why don't I? Well, it shouldn't matter. This is still, this should still be right. So it's, it's rated that uh when you look in the data interface, you can actually see the query rate in the page but without the string interpret interpolation Interpol. Yeah. Yeah. Yeah, that's why I wanted to win. Oh, there it is. I found it. Um but I still think I need it because uh this is inside a Pulumi string. So that's because there's because there's strings in that. OK. Uh Looking at a couple other things that we might want to add to here, we have our query. Oops trying to and we need to type, OK? And this was a recall correctly. Uh You know, it's funny if you search for data, do notify, audit. The second link is the Ploy docks. Oh, there you go. So, you know what? It's funny, I um I'm not 100% sure what that, what that property is referring to. It could refer to a couple of different things. So I'm gonna make a note of that because now I'm actually quite curious uh suffice it to say I'm pretty familiar with our, with our monitors, right? As recover access to administrator. Uh So whatever it is, it's, it's obscure. Uh I wouldn't worry about it. Ok. So let's see here. Um Again, if we look at our docs really, the only required are the message, we have a message, right? The name, it has a name, it has a query and it has a type. So that should get us everywhere we need to go. Uh for this monitor. So um I'd say let's go ahead and run our Pulumi program and then we'll go take a, take a quick look at back at data dog. Um and see if it, it did what it was supposed to do. So as before this is gonna give us uh like an opportunity to review. Oh, something's oh, you've been judged. Post monitors must, ok? Uh Host monitors must notify and no data. OK? So we have to set the um we have to set uh not notify no data to false. So notify no data. I mean we have to set it to something. I'm gonna set it to false because I don't give a shit. But this is also why we have oh no, but it says host must notify on no data. So you have to set it to true. Oh oh I bet you that that would make a lot of sense because I bet you false is the the default. You're much better at reading things than I am man. The last field. OK? Wait, what is it not like? So, so this is all valid. So this is data dog is basically data dog's api is going and saying you're trying to make a monitor, Maddie and you're doing a really bad job of it. So that's actually OK. So now it's telling us, OK, last field should be larger or equal to max threshold defined and monitor options. So uh I'm gonna actually go back and just make these the way that they were and I, I was just making them up but the ones that were, we had warning, ok. If, if I, if I recall correctly, in fact, those are all like one, in fact. Right. They were, they were, I was, I was, I was just fussing around because it's pretty, right. Like, either the host is up or it's not. Right. There's not really like different, right? OK. You know why? Because in, in the sample docs, it's not a host monitor, it's a metrics monitor. So, exactly. OK. So let's take a look here. Let's look at our details. OK? It's gonna have a name, right? Um It has a urn. So I think so. What I think uh OK. Can you share the links? Uh Let me, let me show you what I'm, that's a good, good point. Um So as far as that is grabbing the links that you can see that quarry line there was pulled directly from the, you know, from the Jason, right? So it's got the, you know, interpolation uh built into it, which is those slashes to say, don't interpret this, you know, this is part of the string, it's not part of, of the Jason. Uh I'm very curious to see what will happen when you run this. Yeah, because I think that's what I was just thinking because I think it should be. Um Yeah, I don't know why does, why does it even want those, you know, that it should actually be like this probably, we probably don't need it. Right. Well, wherever there's, wherever there's quotes. Well, see that's the thing because there are, but I'm passing a but we, we needed it for, to, for that to be able to work inside of Pulumi. Um, and our example actually doesn't have any, um, doesn't have any values that would, would have quotes in. Well, no, but look at that first one, right? Data agent, data dog agent up, it should, it shouldn't have needed but no, but data dog agent up in this case is, is a metric group that you're iterating over. There's not no such a thing as data do agent up over. That's not a metric, right? Yeah. So in that case, you actually do need to. Well, let's see what happens. Yeah, I have never tried to do this with go. So I mean the worst that will happen is is it won't work like we expect and that work, right? Like it's not a big deal. Um Oh, thank you, Jacob. Jacob says data dog and ploy is too. OK. So it seems to be first to you man. Yeah. OK. Let's uh let's uh flip on over, let's see how we did um monitors wanna share your screen there buddy. Uh Yeah, I had to turn it back on. I hate this thing. You go. What do we have? Hey, and I presume no data because it's, I mean, you know, it's, it's got actually we haven't given it any time, you know, you know, the whole thing about stats is that you need more than one data point. OK. And look, OK, the query query looks like, look actually quite good. And as you can see here, right? It was amit as an event. This is, this is actually really cool light just turned off. It was weird. So this is actually really neat because it was emitted as uh as an event, right? So when Pulumi was like, hey, we're going to do a thing, right? Um And it, because it was using the data that I api it registered that as an event and you think to yourself, well, yeah, it's like an event but the thing is, is events is its own sort of mechanism inside of data. Do you can go and see like event streams, right? Like, you know, of what's happening with the infrastructure and then you can actually make monitors on events. So say, for example, you did a plume run to deploy a new stack, you could actually have a monitor fire off on that. You could actually have, for example, dashboards where you're tracking certain, you know, metrics against certain events, right? So you could go like, OK, we've, we've, we've plu me up a stack uh because we're doing like some, you know, I don't know, canary deployments maybe testing and we actually want to know exactly when that happened versus ok. Are the numbers going up or are the numbers going down, for example? Right. Uh So, you know, that's cool. So, uh I I do need to point this out. So this is the data dog Pulumi provider. Uh Is it now there's just one of the confusions about Pulumi sometimes is sometimes people think Pulumi runs Terraform under the, under the hood, it doesn't, but our providers are built according to the schema, the api schema that's created by that terraform is already mapped. Um which means every now and again, there are a few little instances of the word terraform floating around. And as Kenwood pointed out, you can see that it actually says that the uh origin client was the Terraform provider. Um when it really came from Ploy, that's, that's one of the things I've been trying to figure out a better way to sort of handle, uh how we can can, can, can go from there. But a lot of that comes from the because that's coming from the, the hashi scheme of definition that they created. So really the real way to solve this is just to go write a native provider for data dog. Um And that you get right on that. Yeah, I'll get right on that. Um But it works perfectly perfectly fine. So, uh so if we wanted to sort of go back and just to kind of, I guess, prove a point because I sure do like proven points. Um If we were to go back in and say like, ok, you know what, this is actually not useful um to, to call it uh to call it Jeremy as you know, but maybe we might call it the uh this, this is called the make sure Jeremy does work there. So, oh Jeez Louis. Ok, there we go. Um So what I did there is I just changed this, right? I gave it a new name. So then if we were to go, this is just pretty straightforward item potency here. But if I run to plue me up now we're gonna see that it's gonna change the monitor and again, if we were to look at the details, we'll see what it diffed, right? It's gonna show us this is what's this? That's pretty cool. So I actually have not seen this before, Matt, right? Like when you were showing me a little bit, you know, beforehand like, oh this is what, you know, Pulumi and this is what it does and stuff like this. And I was like, oh yeah, like that works pretty cool. But I this is new for me. I hadn't seen this output uh you know, before and I, I like that. It actually shows you not only that something has changed, which is what we're seeing here, right? That there's an element here. We see that, that there's something has changed. But if you SRO down, we can actually see what it changed from into. That's really nice. It's very helpful, right? And then the other thing is again, if you were to go to this link here and I'm gonna pop over to my browser so you can see what you should just be able to click on it though. No, no, I wanted it to, it had to open in a specific browser window so that I could share it. Um So if I go and I share now, if we take a look at uh this stuff do do do do do do. So a lot of this is the stuff that we were seeing in the cli but this is my derogate stack. So we can see, remember there was the output that I kicked out. So I have that available here. But then um because this is a configuration value that is encrypted, I can't actually see it and this is metadata. Nobody cares about that. But here's sort of some of the fun stuff that, that you output there. Could you then use that output? Like is another step as another phase of it could be a whole other stack, right? And yeah, I could pass it, I can pass it to another stack uh to another program. So if you had some sort of deployment process where like one thing had to go before another thing could go, which is not an uncommon pattern. That would be a AAA possibility. Absolutely cool. Um We can see activity. So if we, so this was the preview that I just ran uh which it didn't do anything, but we're gonna see everything that we just saw in the console, right? We can see my diff we can see all that stuff. Uh Nobody needs to follow you on Twitter right now so we can have that. Uh And then this is uh so, yeah, well, no, I, so earlier. So uh you know, mentioned the resource graph. Now this is a very simple resource graph because we only have two resources. Um Although I'm, I'm curious if I have any projects that are that, let me, let me see. This is real quick as long as I'm poking around, as long as matts poking around the, you know, the resource graph, right? So it's, it's really simple and sometimes you have a really simple thing you think to yourself, like I, I don't understand the value proposition there. Uh And they can become much more complex and once they become much more complex you look at and you go, this is nonsense. I don't understand the value proposition there. So for anybody who's, you know, looking at the stream, much the stream is ever look at, you know, sort of these, these network maps or these, you know, very and you think to yourself, like, why is this useful? Like what possible information could I get from this? And, uh, I, I could tell you again, as, you know, someone who's had to step through a lot of code who's had to debug, you know, a lot of problem, a lot of problems. It, it's not so much that you're gonna be looking at this every day because you're not, you really, really aren't. What's really nice is really when you're trying to learn something, right? If you're encountering new stacks for the first time, you're counting new, you know, software the first time and you've got some sort of like, you know, visual code, uh uh you know, uh or code, you know, visualization tool and whatnot like that. So you see how things are connected, it becomes a really powerful learning tool. And I think that that is very interesting and everything that's a powerful learning tool can also be a powerful debugging tool. And it's cool that's built into Pulumi, right? Because you think to yourself, especially, you know, we, we I just brought up this idea of, you know, serialized deployments and one thing leading to another and how are these things connected? So you hit a button and you walk away for five minutes and you come back and it's on fire and data Aug is sending you alerts and you're like, why is this happening? Right? Go, you could take a look at that resource graph and actually sort of walk through the connections between these things and then go boom right there. You know, that's, that's actually quite powerful, right? It's, you know, we, we, you know, if, if you're, if you're a person who, who uh has the use of one or more eyes, uh being able to look at how things are connected can be uh a really powerful way to ingest complex data sets, right? Very true, very true. And uh yeah, in the chat just says, you know, explaining relationships between real resources to enterprise architects. So these resource graphs are really helpful for that kind of thing. Uh So we're coming up to our end here. Uh The last thing that I'm gonna do uh because I wanna clean up after myself, although I don't especially need to now because data dog is gonna clean up after me by turning off my account in a week and it's not like I pay per monitor or something, but to be clear that does not disappear, right? Like you've been around with stuff for like, you know, two weeks and uh you know, you, you, you, you're like, oh this is a project you kind of put it aside or you go on vacation or who knows what happens, right? Anything can happen, anything yourself. Oh no. All that work that I did in my sandbox account, it's gone. Uh It's not gone. It is, it is all still there. It stays there for a good long time. We can fire that back up for you whenever you want. That's fair. Yeah, maybe another way to put it is I don't really care about cleaning up because it's not like y'all have my credit card number, that's fair enough. So it's ok. Um, but I have to get rid of this, you know. That's true. You actually probably do. Uh, so if I say Pulumi destroy, what this is gonna do is it's gonna say any of the resources that were created by uh this Pulumi program, it's going to get rid of them. So we can see. It says it's got three things to delete. It's gonna delete Jar dog. It's too bad. Jeremy's not on anymore because I, they had an amazing troll to say I've always wanted to be able to delete Jeremy. Um It's gonna delete that, that user that we created. It should be Pulumi Smash. I might, I might alias Pulumi Smash to uh Pulumi destroy Dash. Y I do. Uh I did use to have Pulumi YOLO alias to Pulumi up Dash Y but uh Pulumi Chomp. Yeah. All right. So we're gonna go ahead and delete these three things. It's gonna get rid of the stack. But what it's not gonna get rid of is that monitor that we created by hand? Because Pulumi didn't do that, right. So that's still there. And then if I want to just say, you know what I am completely done with everything, uh I don't even want the, so it says like it says a history and configuration is still here. So if I were to go, even though I deleted those resources, if I go back into the console, I can still see all of that stuff. But if I'm like, you know what this is? Just Dunzo, MC Dunzo, I can go ahead and delete the slack. The stack can't delete slack sometimes you want to now. Pulumi destroy. No, like for real though. Um Anyway, cool. Uh By the way, if you like uh doing go stuff with Pulumi, may I invite you to tune in same time next week? Uh My colleague, Roode David Flanagan is gonna be joining me. I don't know exactly what we're gonna do but because it's David uh clearly we are gonna be talking about go and it's gonna probably be more nerdy and more technical than any of the streams I've done because again, it's raw code. Hi, Leila. Thank you for popping in uh just in time for uh for me and Dan Dan. Um where might people if people want to like learn more uh data dogs, other data dog streams or videos or like what's would you guys do? Streaming? Uh We No, probably we'll start next year. Ok. So you know what? Tune in next year, check out, check out, learn dot data dot HQ dot com. I posted the link on the Twitch there. Learn dot data dot HQ dot com. Uh that's our whole like self directed learning center. You can learn all about a whole bunch of stuff that's not even necessarily directly to a data dog. Like you're shooting Cotti, then take our monitoring cotis self directed learning course it's free. You'll learn a ton of stuff about kubernetes and also how to monitor it, right? Um So definitely go check that out learn dot data, I HQ dot com. Docs dot data do HQ dot com is written by our extremely competent uh documentation team. And every once in a while they let me review some of their documentation, which is really cool. It makes me feel important. Uh And then uh you know, just check out my, my Twitter feed, follow me on Twitter. Uh I do a lot of talks and a lot of streams and things like this. So, uh you know, hit me up if you want to talk shop. Uh Data dog's cool. But, you know, I'm also into things that aren't necessarily data dog like des and I really like geography and wine. So yeah, if you like those things HMU as the kids say, that's right. And until next time we will see you all on the

---
