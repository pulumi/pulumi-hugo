---
preview_image:
hero:
  image: /icons/containers.svg
  title: "PulumiVision - Getting Nerdy with GitOps"
title: "PulumiVision - Getting Nerdy with GitOps"
meta_desc: |
    "Discover the power of Pulumi for end-to-end platform deployment and application integration. Join us as we explore the Pulumi Operator and its cap...
url_slug: pulumivision-getting-nerdy-gitops
featured: false
pre_recorded: true
pulumi_tv: false
unlisted: false
gated: false
type: webinars
external: false
no_getting_started: true
block_external_search_index: false
main:
  title: "PulumiVision - Getting Nerdy with GitOps"
  description: |
    
  sortable_date: 2021-12-24T08:59:50Z
  youtube_url: https://www.youtube.com/embed/bkJOLYWc2k8
transcript: |
    OK, here we are, we are live on another episode of Pulumi Vision. And if I know anything about streaming and I don't, we don't want to have any real big content right in the first few seconds because nobody's here yet. So, uh, but that's cool. Hey, David, welcome to Pulumi Vision. Yeah. Awesome. I've not been on Vision before. I'm really excited. It, it's fun that we, I don't think we streamed together before except for like a devils party games, one party games and CNC face off, you know, so we haven't done like an actual, you know, like technology stream, just silly games and stuff. But, uh, yeah, we're gonna, um, we, we, we'll, uh, just sort of shoot the shit for shoot the, I don't know, I don't even know what our rating is on this. It's a work stream but, you know, on the same token, Cat Cosgrove is on our team. So, yeah, exactly. Yeah. Uh, so I think we're gonna, uh, we're gonna play around, we're kind of do a little, uh, little thing, a little KTIS operating. That's not the right way to use that term, but I don't care. Uh, and, and dig into some stuff. Uh Hey, welcome. We got, we got, we got some folks and uh David, what uh what programming language are you gonna be using today? I haven't entirely decided to be honest, I'll probably use type script. Um Although if the audience are feeling like they want to see something else, then we can be bold and go for that. We have a, we have 11 whole viewer so far. Uh But it's still early but, but if it's uh who I think it is, I think they're gonna wanna see go but uh let us know you know what your thoughts are. But yeah, well, before we kind of dig into that, uh David, I want you to kind of tell, tell me a little bit about what you got in mind and, and let me know when you want me to give you your, your screen share. Yeah, sure. So I thought what would be fun for us today would be to take a look at a complete end to end demo of using Pulumi to deploy our platform, which in this case will be on a cloud provider and then to look at how we look in and integrate our application teams, given them a framework to be able to deploy their applications to the platform. And we're going to do this with some more Pulumi. So we'll be taking a look at the Pulumi Operator what it brings to the table, how we deploy stacks with it and, and maybe have a little bit of a chat about how it works, what it's doing because it's a, it's a pretty cool project that I don't think has, uh, a lot of screen time yet. So I'm looking forward to kind of like shitting it and going, hey, check out this really cool thing and here's what you can do with it. So it should be kind of fun. Awesome. And I'm looking forward to. So I'll be, I'll be watching the chat trying to answer questions, feeding David David's driving and running all the tech. So I definitely uh through the better straw on this one. But uh I, I'm, I'm, I'm super excited to see because I uh this is maybe a bit of a spoiler, but I know David has a blog post that's coming out hopefully pretty soon about this. And I was, I was reading it and helping review it and I'm really excited to see it in action. So, yeah. Yeah, I mean, I guess we could talk about that a little bit without giving too much away. I just didn't know if it was a spoiler to tell people that there was a blog post. No, it's, it's all good. We're all friends here, right? So it references a talk I gave that Get Up days in December last year where I was talking about the and how it applies to get ups which I know right away people are like what? But is it a lot or demeter? I'm not sure. Uh I just, it, that's the problem with Fox is you have to pronounce the words. A very tech problem, right? Is how do we pronounce all these things? Uh So essentially that law tries to encourage us that we don't reveal or have too many leaky abstractions down our stack and we get up, that's a bit of a challenge. And in fact, what we're seeing today is that a lot of people uh actually hard code environment information into the get up pipeline. So like the stacks that they have are pro staging Q A etcetera, but they're all hard coded in yam somewhere. And we, I I feel like we need to get away from this because we're limiting the first, the velocity of which we could deploy, but also the flexibility to spin up ephemeral environments, iterate test, you know, do some cool experimental stuff. And uh some of the challenges with that we're gonna, well, we'll see it and I guess as we go through, but um the pluming operator actually helped solve a lot of these challenges, which is why I was so excited when I came across it and I was like, oh I need to start playing with this a little bit more. Awesome. Yeah, I won't go to the blog post in more detail. Why you gotta go to the blog and check it out. You should go check it every single day so you can see if that post is there. Um And you might even see a couple of posts that I wrote. I, one is getting published shortly as soon as the workflow is done. So, uh and I, I also even hope that I, that I understood David's feedback properly and updated it. I guess we'll find out. All right, we, we, we do an article review at the end of this. There we go. There we go. All right. Should we do? Should we uh should we do some, some checking? Yeah, we should get this cluster spun up first. It's great right now. We have Nada. I'm starting from complete scratch. So I'm gonna, how's that fun for you, Matt? Is that right? What's that? Uh Can you go just a maybe a little tiny bit bigger? No, you can't go bigger that it's fine. OK. I think that's good. I think it'll work. All right. So I'm gonna, we get the initial list of favorite templates we'll show additional and for today's session, we are going to use cloud. Um just because spinning up a coup on C is faster than any other cloud provider that I've seen. Um we haven't had a comment telling me to use any other programming language, so I am going to go with different. OK. Right. I was waiting to see if you were gonna challenge me to go in another language. But no, no, no, it's ok. We'll, we'll go for, we'll go for the time we did. We did. I, you know, I, I, uh, you know, been asked to do the go content. We did go last week. So it's all right. It's all right. All right. And why is our man that have had their token prepared? But give me a second. Actually, the funny thing is now that I think about it for as much as people always say, we're always using typescript examples in Pulumi and Pulumi vision. I think we've had barely any typescript because we did uh when Laura and I were doing stuff, I thought we did it with Python and then I had layla on and we did dot net. Uh Brendan might have done typescripts. Yeah, Brendan, our get get lab one and then we did go when we had a date dog last week. So we're mixing it up. All right. Cool. So, really, then typescript was the only choice I had. It really was we did the right thing. All right. So now we have a new preliminary project and this is our and V code. We have our stack file with our nice encrypted token. I love that about the fact that we could do that. Uh We have our default template for ST cloud which go figure, actually spends up acuna cluster it codes that I don't even have to write any code. Uh how easy is that? Very easy? That's the answer. Yeah. But I guess, you know, these API S are, are nice and simple here. We're just saying that we want to use Kubernetes cluster, we give it a name. I'm going to go for three notes and we have a size of the cluster GV KTIS museums and London and we're going to export a cluster. I mean, the reality is right? Like how much is there to say about the cluster that you need? I mean, you could say more things but for our, you know, because I know I like spin them up on Digital Ocean. Like when I'm doing workshops and yeah, my, my code for that is pretty straightforward. It's like basically how many nodes and how do I tag it so that uh it doesn't get deleted by our, you know, our clean up stuff. Yeah, exactly. All right, let's spin that up. It shouldn't take too long. It takes around 90 seconds and then we will have, oh OK. Maybe I should be using for instead of Digital Ocean for my uh my workshop clusters because do was always fast for me. But yeah, yeah, 90 seconds is pretty impressive. And uh oh, I see. We have Carlos in the chat. Hey, Carlos, welcome. Hey. All right. So I guess we can either sit and watch the creating status of this or maybe we can talk about what our, so, so we're gonna do a cluster. So what what are we doing with this operator? So what we're going to do is first deploy the CR DS for the operator and then deploy the operator itself. What the operator does is it's going to run inside of our cluster and monitor for some custom resources. These custom resources are Pulumi stacks. So we can describe stacks that we want the pluming operator to manage what those facts are, are typically get repositories that can be cloned into the cluster. And there is a continuous Pulumi up ran against them in a pretty cool fashion that is safe from the controller being, you know, rescheduled on killed anything like that. So it does lots of cool checkpoint and to make sure that it's it's native as it has to be to work well in that environment. And we're going to pretend that our platform team is, you know, this essentially, you know, obviously there would be a little bit more to that. But right now, we're just saying we want to cluster, we could start deploying, you know, backup tooling and you know, auto scale cluster, auto scalar. Uh but the application developers are going to take over with their own stacks and get. So we have this very strict boundary between this is what the platform team are building and providing a set of working components for our application teams to consume. But we had a question in the chat. I'm just gonna bring it in case people, uh, are where I want to hear it. So, a car, uh, as said, like, what's the most popular language used with Pulumi? Is it typescript? And I don't have the numbers in front of me and by, I'll, I'll probably poke around and see if I can find them by the end of the stream. But as I recall, it's actually not typescript. Um, but I think it's Python is one of the most popular ones. Uh, one of the things though is typescript is there's things, again, typescript over javascript is a little nicer for some info coding though because of the type, you know, there's features of typescript that just make it cleaner and easier to work with, which is why you see a lot of us writing examples in it because it's just a little more fun. But, uh, I don't think, uh, that is what, what have you seen out in the community? Uh, David, I don't know if you have any thoughts on this or not. I'm, I'm gonna see if I can find the, uh, the numbers though. Yeah. So, I mean, it's weird for me. Like I, I'd say I spend most of my time not, we're not talking about Pulumi here, like General as me, as an engineer. I spend most of my time writing, go and Rust and I love those languages for what I'm doing. But you're right whenever I have to come to Pulumi and infrastructure. There's something very interesting about the experience, the DX of working with typescript and this kind of fashion from the tooling and VS code to the autocomplete. Uh you know, the complete ease of use that having functions concerned from other libraries, just it's a very great developer experience. I don't think we get with some of the other SDK I think. Yeah, the things that we're uh that I was just looking at some comments I've seen internally and they said a lot of, a lot of customers uh de definitely have been using Python as a lot of the enterprise customers. That's what we see. Um So a test framework for Pulumi, same for lining. So, yes, that's kind of a, I'll put a link in the chat to, to go into testing. That's testing is a whole other thing. But one of the things is because Pulumi uses general purpose, um, programming language is right. You kind of have all those test frameworks for you. But I will let David continue and I'll drop some, some links in the chat there. All right. Ok. So we do have a cabernet cluster. Uh I mean, I'm sorry, it was longer than 90 seconds, however, it was only two minutes and seven seconds. But I still think that's, that's pretty, that's pretty good. Yeah. And hey, Rich, thanks for joining us. Hi, Rich. If we pop over to here. I mean, I'm gonna do everything just with you know, the get up and the documentation that that's here. Uh So you can all see how to do it yourself, but we have the ability here to deploy the operator. Uh And we could use coup control. Um But that would involve leaking the coup confit from our poly program, you know, exporting it, which is fine for some cases, but not for what I'm showing today. So we're actually gonna try and just use Poli to be able to do this ourselves. So there's examples for all of the different languages that we pop up. Python just because I know Carlos is saying that was interesting. He's what some Python looks like me, which is there not too bad actually, but where he is in tape script, I'm going to open the deploy operator typescript example. This first line of code is going to deploy the custom resource definition. Let's paste that in save. Uh ah I don't have yet. OK. So here's one of the reasons I always go to typescript as well. I open package dot Json pop into here and I do Pulumi Cube and I just let the auto complete, go to N PM, look up all the packages and the versions and I hit go then on earth, no pun intended. I even know the pun you made the pun joke. Uh And then we now have support and our plume project we can pop over here and we can just quickly I'm just gonna override this one. I don't think we need the ploy SDK just yet and we call this case. So now what we're saying is, and we want to deploy a, or a config file or a manifest depending on what you're using. Uh And we can actually just point it straight to the get hub raw URL. Um Now, right now, this is actually going to fail. Do we know why? Who knows why? Well, let's see. I don't know, but I gotta kick somebody out of the check because they're trying to uh how do I, how do I do this? And that's what you get for trying to tell me to buy followers. Yeah. Exactly. Rich says, yes, I want to be famous. I'm endeavor. So OK, let's see. Why is this gonna fail? All right, because it couldn't reach our KTIS cluster. Um And the reason it couldn't reach our co cluster is because we actually need a dynamic provider for this because I don't have one configured. So what we need to do is create a is Vader, this is a new provider. I would call this or platform whatever I want. And from here, we can pass in that we have a coup config and we pull this from our cluster. So the cluster that we create using the C OS DK has an output, which is the coup config for speaking and communicating with that cluster, we then create a new KTIS provider, which allows us to then apply any cnet's resources to the provider by adding this. And here's a cool typescript thing. Actually, if I rename this to provider, we get the shorthand syntax where I don't actually need to do that, which I also like and we can do a plu me up and this time it will deploy to our cluster. All right. So question, can this be done with Amazon Eks? Yes. Right. Everything we're doing with VO cloud you could do with Eks effective if I recall correctly. That was your first plan. And we just ran out of time like clusters, take a bit longer to provision. And uh you know, we want a stream not to be that watching and EPS clusters spin up. So we went with a slightly faster option and in fact, with the EK provider, you don't need to do. Uh this actually exposes a provider as an output. So you could just do provider cluster dot provider. But the, the C one doesn't support that a little bit. And of course, it works with, with GCP and any other related provider. We're not doing anything that is too far off to be on track here. I'll drop a link in the uh in the chat for, for the EKS stuff. All right. So um actually probably do want to export this coup config because it may be useful for me to be able to run cube control commands. Right. Yeah, why not? Uh we will export our cuc fig. So, so now we're adding an output and for people that are very fast or can pause the screen, they'll probably be able to communicate with my cluster. But that's all right. Right. Let's see if I can remember how to do this. So if we do a stack output config, I think that works. Right. Oh, sure. It's all one way to find out and then we can do an export cuc config our directory convic and then we can run and get notes, right? Oh Close. Uh OK. So that didn't output what I thought it did. Whoopsie. Uh Let's try that again. I believe there is a show secrets like for sure. Yeah. Um 00 because I, I append it. So OK. To the cool. OK. So it took me a little bit longer than I expected. But that's all right. That's the problem is if I was thinking about it, I've run that command 100 times because that's what I always do when I do a workshop and I need to get it to then put it into the G pod thing. So I have that. Yeah, I wasn't, wasn't watching, I was uh messing around in the chat. Um Yeah. Well, we have, we, we can run our commands, right? So we have terminal command lane access to the cluster. We have Pulumi access to the cluster with our custom provider. So now we need to go back to our documentation. Uh And we've got some boarding stuff that I'll just copy verbatim and it configures the roles and deploys the operator. Uh Yeah. What time is it for you? David? Uh Carlos would like to know it is 8 20 pm, 8:20 p.m. So this is, uh I felt slightly guilty about this, but David is just too nice and doesn't tell me to like get bent when I ask him to do stuff yet. Yeah, I've got two young kids. I, I work stupid random hours depending on what works best for me that day. So this is all good. My, my most popular blog post I wrote many, many years ago is when my boys were, um, just a few months old. So probably actually around the same age as your, your, your new one. And so you'd be up in the middle of the night. And I remember writing this blog post with one hand while I was holding my son Joey. And it was like the most, it was just some off the cuff thing that absolutely blew up and, and I was like, so that's sort of the trick. I do owe my kids some toys, but they don't, they don't want them anymore. They're too old. The two, my, my 10 year old is easy to buy for my, my 12 year or almost 12 year olds. So, with 12 next week, they just want money. So they're looking at all the presents and they're like, well, why does Sophia have like 12 presents under the tree? And I have like three. And I'm like, because you guys don't want anything. Anyway, what do we got? Do they have some pods? Maybe they want some pods for Christmas? Nobody's ever turned down a pot. All right. Well, we have a service account created. We have a role in row binding. We're just waiting on our deployment. Um Here's a cool trick. So what's actually happening with this deployment is that Pulumi is aware of a deployment. It knows that it spawns off replica sets and in turn those replica sets spawn off pods and it's actually going to wait until all the pods that the deployment has created are actually ready and healthy. So if they have probes on them, they're trying to make sure that you don't deploy something that's broken and then like, hey, it worked. Um But if you don't want that behavior, you can actually turn it off through an annotation. So if we come to our deployment, we can do metadata annotations and we can say polo dot com get away trip. So to David Rich just tweeted, he said, I always love watching rock code stream. He's so good at it. Matt Stratton is also on the stream. Oh, thanks for that. I lost my train of thought. Oh, yeah. Cheers. So this annotation will change that behavior. So that Pulumi will just do the apply and then it's entirely up to you. And at that point to make sure the workloads that you deploy are in fact healthy. Of course, it has already deployed now, but it's not a big deal. Um, but if we run pulling me up, but you'll see that it is a lot quicker this time. Hm. Nobody's answered in the chat, how they pronounce, uh, that word that I'm not gonna say out loud because that will influence. So if you're in the chat, like, you know, write it out phonetically, that command that David keeps running. Not Pulumi up or let me know how you pronounce Pulumi up too. All right, let's see what's next then. Uh So we won't get pods. We have the operator running. It's actually not doing anything right now. Um Because the way controllers work in is they're monitoring for custom resources typically and we haven't deployed any custom resources yet. So let's jump back over to the documentation. We have applied the operator, we can move on to the next thing which is we want to create Pulumi stack custom resources. Now, you can do this through zoom back command that I won't see anymore. Uh Where's the example you mean? Cube? Wow. Are these examples in? No, someone was feeling funny that day uh or we can deploy in Bolivia, which of course we're going to do. Of course, why else would we uh if you want to deploy a stack, da da da. There is it? There we go. Then the things that are required are that we need to first put it a secret into our cluster with our pate access token. So I'm gonna do that first. And then we're actually, how much time do we have? Maddie? I don't know. We got, we got at least half an hour. We got as much time as you want. You're the one who it's bedtime, right? I mean, we can start off by using API extensions, custom resource to deploy any random um resource in the world. However, we can do one better and actually use TRD to Ballo me to generate the types and actually get a fully type experience as well. So what was the over doing for time? I don't want to commit to too much just yet, but let's get the secret one first. Just dropped a link about CRD to Pulumi in the chat too for like people that wanna know more about what's going on. Jeez. My hair is so flat today. Your hair looks great today. All right. So we got a new Pulumi config uh This allows us to pull things from our stack file, which is this one here? I'm going to say that we require a secret called Pulumi access token, which means I have to make that available. And in fact, if we run Pulumi up, we'll see that that gives us a nice inner message in but it doesn't exist yet and I will go to the council. There we go. Nice helpful error message. You have required configuration limit access token which isn't there. So I will create a new one. There we go. So now we can do a Pulumi config set. This is the secret Pulumi access to and 10. Uh OK, let's go back to the documentation. So we have to create a secret. This is actually using KX instead of the SDKKX is a extraction and helper library to make working with some resources a little bit easier. So we'll just make that available too. So we can come in here, we paste this. Uh We have to import KX, which is the Kubernetes X package and we can use our autocomplete here. Get that pretty quick. We not then and then M PM install and if we look at our code, it seems happier now. So now we have our access token here. Well, it's been pulling it up and get that created. Rich says you have the best hair and infrastructure is good. I'd agree with that. It's continually evolving into all the places where that happens. Cat would probably, you know, you're, you're lucky that cat is, is not on the stream rich. That's all I'm saying because I think she'd have some words but it's OK. Um So OK, I wanted to see something in your uh when next time you go back to your ID E to your VS code. Mhm. Oh So you just put your um oh that's interesting. Ok. So you just flip it, you put your your uh explorer thingy doodle, whatever that window is on the right to the left. I thought it was like some cool, cool shit. And it was just like, because I had the, I had the our our straight window was too small for me to see super duper. Well, and I was like, what are you doing here? Is that like some typescript? You think? I'm like, oh no, you're just going in the file. Got it. Yeah, but it was not where I was expecting it. So I was, I was thinking it was something cool. I just hate it. You don't have it anymore. OK? No, it's good. It's good. All right. So let's apply this the building way and then we'll squeeze in the nice way. So we're gonna say this is our application team stack one division, team one at team one. We're passing on our access token here. At least the name of the secret. We restored it in the cluster. We're gonna have a stack. So this can be. But I think if we just admit that it goes under my personal uh and we'll call this app in one and I have a rock pool in me Examples repository which we not only worry about the commit, but I do need the directory as a call. Oh, yeah. This, this, ah, see, this is why working with customer resource in this way is rubbish because I actually can't autocomplete the thing that I need. So, you know what? We're not gonna do it the crappy way. So, are you using just for my context you have copilot on or is that the other, is that just typescript autocomplete? No, that's copilot. Uh, we got a comment from Skyler that the alternate between coop cuddle cuddle. I say coop cut, not cuddle like the cuddly way which I know is what rich likes but cuddle like cuddle, fish. But since my license plate is coop cuddle, I feel like I should be considered somewhat authoritative on that. All right, it's like I'm never streaming with you again. No, I'm having fun just losing my train of thought because we're not a rush. It doesn't matter. OK. So we want to generate an sck for these types and I, I've not done this before. So we're going way off the bean track here. But I went to look and said, in fact, we did it right here. Uh So what do you need to generate an STK from a spec and CRD gamma? Well, all you need is the file so we can come here and I'll do Carl Fs as well, Srd dot yama and drop in the L. So let's just download the custom resource definitions. Um And we can see them like. So these are all the plumier specs which are an open API format. We can then run CRD two Pulumi. And if we take a look at the help here, we can generate SDKS for dot net for go no GS and Python. So we're going to do the node GS one. So we need, we need to give the package a name. So we'll call this, let me stack. I think that makes sense. Uh And we need an OGS path. So this is where they're going to live and we'll store them and source stacks and that directory probably should exist. Although I don't have my index dot TS and Stax. Yeah, we'll fix that too. All right. So create directory. Run CRD. Let me something went wrong. They're too confident if it worked right. The first time it would be, you'd be concerned. You did something wrong then. That's me right when I run a thing and I'm like, there's no problems. I'm like, ok, that couldn't have been what I was supposed to do then. Oh, I didn't tell it. The YAML failed to right. There we go. You told it where? Yeah. All right. So it has successfully generated our SDK. Although now I'm in a position where I don't like that. We have our index dot Ts up here and then the source director with everything else. So I'm going to move our index dot TS into source and for that to still work, we just have to add main. Yeah. So that's a good tip in general from a Pulumi perspective that not everybody knows about. Because if you sort of look at that a lot of times when you're looking at examples with Pulumi, it's assuming that the root of the project of the folder is the whole Pulumi program. But you might want to have it. Maybe if it's uh uh a pet, you have like an Infra, an Infra co uh Infra uh folder or something that's inside with something else, you know, actually in this setup. So this is, this is a good tip that you can. Uh That's all you have to do is point it inside the uh Pulumi Amal. All righty. So I didn't modify you. You go away. OK. Oh No, it was actually being helpful because I moved that phone. OK. Uh So now we want to import our new library so we can say import star as Stax from and then we have source. No, we have plume stack. Think so. And then we'll see how this is differ, how this differs. So I'll, I'll comment so that we can do a side by side. Team one equals new. And then I'm going to the stack. Do Pulumi back uh B one. Come on. Why is it not generated stack? I'm gonna look really silly now, aren't I? I was too confident view on stack. Yeah. Hello man. Why can I see it here. Uh I'm just gonna say, screw you all complete and say I'm right. Is that, is that ok? That's fine. You're the boss of the computer, David or? So, it would seem, no, it's, it's, it's, it's not happy. No, there's ok. So, is it, so if we do, we do get access to a whole bunch of resources but not under V one? Yeah, that's peculiar. Uh Do you wanna? So, uh Skyler says, is this a nested stack? I've only seen stack references before, not a nested stack. So what we did was we have taken the C ID definitions and generated no GS code inside of this Pulumi stacks directory. So this is just like working with Pulumi Pulumi GCP P AWS only is tailored for the custom resource definitions provided by the Pulumi operator. And we can actually see that it looks like it's been generated. OK. I'm not, I'm gonna, I'm gonna close my ID because sometimes it can get a little bit confused. Might say you're turning it off and on again. Um And I had the ex Oh yeah, it was like I was doing, we were doing a workshop a couple of weeks ago and the same thing I had run through the whole workshop that morning, everything was fine and then I ran into a very similar with Python. But yeah, where it just didn't wanna load the stuff properly and that's exactly how I fixed it was restarting my ID. It just took way too long for me to get to that decision point. Oh yeah, it, it's not happy. I'm not sure why I'm not going to fight it anymore, I don't think. But what we can see is that it has generated a plume Pulumi it got all the version and we do have a stack dot TS. So we can see at least the type definition for this. Um We can go to the stack spec arcs and we can see that the flag or the option I was looking for was called. Now, if I could create this object, we would be. What is, what does it not like about that? Exported Pulumi name space. You see line nine, there's something in there. It doesn't like, I'm just curious. Oh, yeah, I think we have a name in conflict. Oh, because you're already, yeah. Right. Because is it because you, because you imported Pulumi as Pulumi? So what's, what's, what's the, what's the, uh, what's that red underline on line nine? It should tell you what it doesn't like. Right. Yeah. Yeah. That, yeah, you're right. So when you're doing your Pulumi type ahead, it's coming from actual Pulumi. Not your all right. I, I just because that's all, that's all regular Pulumi stuff. Right. I don't know. Maybe I'm wrong. Oh, you're right. Ok. Yeah. Yeah. Let's try calling this something else. I, I don't know why. It just, yeah, that's regular preliminary Ok. Ok. So maybe, maybe be as good as just wrong. No, you suck. Uh So we need our access Token Secret. Thank you, Copilot. We need our stack. Thank you, Copilot. We need our project people. Well, you tried co pilot but I guess you were never going to get that. Uh Let's drop that in. Uh We need a rep or my dog is taking advantage of the fact that I'm on the street and not paying attention to her and getting away with things and you should for my school and the directory and my examples repository is called Cooper S and I wonder what the typescript compiler is gonna say. What do you think? It's gonna say Maxie? Yeah. V one does not exist, you know, this time it's going to Pulumi Pulumi that, that's what I'm saying. So go go back to when I I'm trying to remember where I think it's line nine in here in this file when you was it this? No, no, no, it's not this one it was in um I think it's where you define. Yeah. Try. No, it's not this one where, where was the other son of a gun? I remember there was a part where you were declaring Pulumi somewhere and it didn't like it like it was the ID E was complaining about it. So I think it was right there right there. See where, where you export the name space line nine. Ah OK. I understand. I don't, I don't know what I, I can't, you have to mouse over the word Pulumi because I can't see what it doesn't like. Oh, that just is. Yeah. So here's the problem. Uh There's the plu name space in the plume stack. Crd. And we're exporting it as Pulumi, which should be fine. However, we're importing Pulumi. But do you need to import Pulumi in this file? I don't think you do in this. You know what I mean? Like you're not using Pulumi anywhere, I don't think. Oh, you are? Oh, shit. Ok. Well, then, ok. What you could do don't call it Pulumi when you import it, when you do online four instead of imported as Pulumi. Now you're gonna have to go and rename it as you. So, but we had this whole concept, right? That it's easy to do, right? Ok. You don't wanna, you don't wanna start because, yeah, you'll screw up your import if I search for P dot We should be all right. No. Oh, yeah. Yeah. Well, you can't, you, you were right. But you have to. Yeah. Ok. So, in theory, but we'll probably have to do that. Uh, no, no, no, no, because they're because of the other places you imported. 00, you did the same thing in this one too? Do you have two? You know the input and the output? You're right. It's all the types needed. Yeah. I wonder if that helps then. No. OK. Well, so it's unfortunate but we do have the flag we need. So let's at least make our demo work before we go. So that is an unfortunate side effect of the Pulumi name space within the generation of the SDK versus the PLU space and things of the core SDK. So we need to work out a way to fix that. But you can see this would have been a much nicer API with all complete. This is your fall back one when you don't have the SDK. So the object that you want to deploy uh and what we're going to do now is run a plume up. This is going to deploy our stack and then the pluming operator within the cluster will deploy engine for us. I don't have a customer Reagan. Here we go. Oh My name is not DNS compatible and that's because it's passed on in the metadata here. OK? Got it and needs DNS compact. We'll just do that again. Cool. So now if we run, get pod watch, uh we may see what we want to see but what we can run is the cube control gets uh export. Oh Yeah. Ah uh Do. Where did I put this export, coupons bag coup control gas stack. And you can see that we now have a stack that was created for a team one. We can describe our stack. Uh OK. So it's telling us that I missed something uh and we need to specify the branch or commit. So let's fix that. I will do brunch. Oh, I remember that part when you said I don't care about the commit but forgot to set the branch. Uh So that will fix that. And then what we'll, well see, I'm confident is that our operator deploys application team ones get ups pipeline. Huh? Did you save it? I did save it because it's telling me that I, I couldn't find a reference. No, it's probably just a dog is so well behaved. My code is not try. Pulumi. Come see if that works better. Doesn't work on Moxie Maxi Maxy come doesn't work, fails to create a local workspace, failed to create workspace, unable to enlist and get reports. And the branch is called main repository. I'm gonna copy and paste. I don't trust myself then and I'll copy and paste the director in in case. Oh, yeah, that was wrong. Uh All right. Last time. Right. He think it's work as long as you just, you know, do the right thing. Yeah, you can watch it. That's an old message. Hopefully. Wait. What? Well, that was 13 seconds ago. So I'm gonna wait for. 00, ok. Oh. Right. Right. Right. Had to rethink the eventual consistency, Maxine. I mean, I could delete it, but maybe that's maybe I should be more patient. All right. Let's go back to the stack, arg thing. And there is a way to change how often it? Thanks. Do refresh. Refresh can be set. No, we don't want to refresh. Oh yeah, resync frequency. And what's the default? One minute? We're probably almost there still failed. Maybe try to commit. Delete stack. Yeah. Get out of here. Stack man. Ripple. I mean, I feel like that's OK. Uh Just in case though, as me being particularly silly, we will deploy the example stack just in case where is the A let me one on the control page, right? We're going to deploy metros stack as a backup deck. Doesn't like my stack. That seems rude. I know I had to played it yesterday but I'm positive I'm positive it's me not the stag. So let's just deploy this one created. Can you get stacks? Where's my stack? There should be two stacks, right? I know why it's not working. Yeah. Was it the destroy and finalize? Uh I think it's because my stack name. Oh, you need to like put the quote org. Yeah, I guess that makes sense because how else is gonna find? Yeah, but we did see that the other stack that deploy when I I changed, that didn't contain my user name. So it worked. That count is working. You can't take that away from me. It is success and I had just broken that one. Oh, because I deleted, making things so much difficult, so much harder for myself. Um I deleted that one manually. So we have to do a refresh up. Ref. Oh, right. Because, yeah, now it doesn't, now, plumy doesn't know about it or doesn't know that state. Indeed. And refresh it can take a little bit of time, but I'm sure it'll be pretty quick. So, have you played with the Pulumi Operator before? I haven't. So, this is cool. I was one of the things that was on my list because coming from Red Hat and open stack like, or open shift rather, you know, operators are kind of a thing. And I was like, oh, actually the first thing I thought of when I came was like, it'd be cool if there was, uh, an operator for Pulumi Pulumi operator. And then of course, there is, I just haven't had a, a reason to sit down and, and dig into it. So this has been pretty cool and, um, I want to play with it a little bit more because, um, it sort of dusts off that, that, uh, way. I was thinking about Cotis a year ago in Openshift World. Cool. Um, well, if I think, uh, I think, uh, people have kind of filtered out again. It's, you know, everyone's, uh, kind of going off but this was, this was cool. This was fun. Um, if you, uh, are still hanging out, uh, we do this every week, same time, although not next week, taking next week off. Uh, but we'll be back on, um, oh, is the operator recommended for production use II, I think it's production quality. Yeah. You know, it's not an alpha or test or anything. No 1.0 was released in September. It's been used by some pretty big organizations. So, you know, you're welcome to install it and start having end to end for your get up. It works really well. As long as you're not me, make a mistake. Right. Yes. So the operator is recommended for production use. David is not, is what we're saying. That's why, that's why he's in. Uh so, uh but yeah, we'll be back uh here on Pulumi Vision on January 6th, which is two weeks from today. Uh Peter mckee from Docker and I'm not sure what we're gonna do, but it'll involve Docker because otherwise Peter will be disappointed. Um And yeah, you can find David on Twitter at Rock code. Uh check out the Pulumi blog. We, the, we should have a blog post uh on a similar topic, uh coming up in the next uh next week or so. And then I guess we'll just see you all on the internet. All right. Thanks for having me. Yeah. Have a good day.

---
