---
preview_image:
hero:
  image: /icons/containers.svg
  title: "PulumiVision - Auth0 + Pulumi = Magic"
title: "PulumiVision - Auth0 + Pulumi = Magic"
meta_desc: |
    Wouldn't it be great if you could use Pulumi to configure Auth0 for your applications and services? Turns out that you can! Ben Dechrai (Auth0) and...
url_slug: pulumivision-auth0-pulumi-magic
featured: false
pre_recorded: true
pulumi_tv: false
unlisted: false
gated: false
type: webinars
external: false
no_getting_started: true
block_external_search_index: false
main:
  title: "PulumiVision - Auth0 + Pulumi = Magic"
  description: |
    Wouldn't it be great if you could use Pulumi to configure Auth0 for your applications and services? Turns out that you can! Ben Dechrai (Auth0) and Matty will explore all the ways you can do this!
  sortable_date: 2022-01-21T09:04:32Z
  youtube_url: https://www.youtube.com/embed/0hEmuhyNF4o
transcript: |
    Well, we are back here on, uh, Pulumi Vision here on 20th of January. I don't, I don't know why I'm saying when it is. Well, technically it's the 21st. 0, you're in the future, Ben, I am in the future. Has anything any better today. Look politically. No, the weather might be sloppy. Nice. Uh, I hope so. It's, uh, here in Chicago. Let's see. Now, I want to see where we're at right now. Um, this morning it was really bad. We are and I'll even convert it. Hang on, hang on. How do I, um, you would think that this would be easier to change really quickly. Technology. Yeah. Uh, the temperature in Celsius. Ok. So it is currently here, uh, in Chicago, uh, negative nine Celsius. Oh, feels like negative 15. So, but that is still warmer than it was this morning when I woke up because this morning when I woke up it was, feels like negative 10 F. So I was kind of like, uh, you know, my dog was, was like, you know, when I went to go let her out, I was like, usually I sort of let her run in the yard and you know, and I was like, nope, you're going on the leash in the yard because I am not gonna chase you. I'm just taking you far enough to do your thing, you know. So we, I was like, oh, hey, I Engine and yeah, so hey Ben. So do you see those chats? I do see the chat. Ok, cool. So we, we currently have around about 20 degrees here, which I think is about 70 F. Oh, ok. Very much, much, much better, much better. And I do remember the days of taking the dogs out for their morning business on a very cold day. Although to be honest, we don't usually get negatives that often right over here, but it's also like your summer. So it's a whole, a whole different atmosphere, right? Um, so what we're gonna do today, uh, we're so Ben is, uh, is joining me from a zero and I know, uh, very little about 00 except that I know a lot of people who, uh, work there or have worked there. So. Oh, cool. So Engine has done a lot with Odd Zero and so we'll see how Ben does it. Well, what we're gonna kind of do. Uh, so actually in the same way as you know, very little about the, I know very little about Pulumi. So time here trying to hack. We will, we will and, and Engine we will as always will take, uh, all comments from the Peanut Gallery to uh help us figure stuff out and we think maybe we should just have engine get on the stream. Um So we, uh, so what we thought we'd do though is, uh, and, and again, if you're, if you're very familiar with Pulumi and 00, some of this will be, the beginning will be maybe a little uh repetitive. But um, it's gonna be, we're educating each other and you get to watch. So uh of course, the IC a little bit maybe, maybe so. Uh So I went so far as to create myself an 00 account and that's pretty much where we're at. So I thought what would be cool is maybe uh I'll share my, my a my screen of what I had set up. We're gonna start talking a little bit about what 00 does or at least and our goal here is um we're gonna be gonna be using Pulumi to sort of manage our off zero setup, but we're gonna do another stream in the future over on the um on zero side which by the way engine, where is your, where do you all stream on you too? Where is your, where is this at? Zero? Stream in general is on youtube or on Twitter, you said? Oh did I? Well talking to him, Ben. Yeah, Ben. Yeah, we do. Um Twitch and youtube. OK. Cool. So we'll, we'll, we'll, we'll put some links later, we're gonna do another episode over on the off zero side where we're gonna actually uh use Pulumi and maybe the automation api to, to configure some applications to use off zero would be kind of cool, but we're gonna start by configuring some just off zero stuff in general. Um In order to do that, we kind of need to know what, what we can do. So I'm gonna go ahead and share my A zero screen here, which um so yeah, you can see that we, you know, have gone very far. You know what I'm gonna make this bigger too. Um ok, I just made the stream yard window bigger that helped nobody except there we go. Ok, cool. Um So we got, ok, cool. Look, I have 22 days left in my trial. Um Awesome, but we don't care about that. So what are some of the, you know, so we got all these things. It's like walk, walk me through this here. Sure. All right. So um just quickly for anybody who doesn't know all zero is basically a software as a service identity platform. So you don't need to write your own login and password resets and multifactor authentication. All of those things. We've got a whole lot of SDKS so that you can create your front end web applications or mobile apps. You can do machine to machine communications with um with Jason web tokens that like access tokens and ID tokens and we can dive into that a bit more if you like as well. Um And then you can also configure all of your API S so that in the bigger grand scheme of things, say, for example, you've got a um a React app and you log in and you want to be able to talk from the React app to an API on behalf of your user. Then the tokens you have need to know about all of the, the different things in this ecosystem. So the API and the the single page app will be defined within the system so that we can make sure that the the tokens all do exactly what they're supposed to do and only what they're supposed to do um to kind of convey this identity and um access control two systems. So on the left hand side, you'll know you'll notice there's an applications tab underneath that is an applications option. It's a little bit confusing perhaps to have applications under applications. But uh that's what it is at the moment and really, really mean it, it's definitely applications. Uh and and the reason for this is that technically when you're looking at applications within the open ID space, they would actually be called clients. Um but that's that naming can be a bit confusing as well because client can mean anything, especially depending on what your business model is. So applications within the all zero context are the front end apps and the mobile apps that you're creating. Um So you just define those in here. And if you click on create application, um we won't create one just yet or maybe not even at all. But you can see there's the four different types there. So because the, the authentication flow, the way that authorization works with um the, the 02 OO can't talk at this time in the morning or off to um log in flows. There's various different ones depending on what kind of application you're writing because the communication is different to keep it all secure. So you choose one of those there um under applications API S, you would define your API S there. So if, if I had a um like a node API or a dot net API that, that my front end application was talking to, I would define that in, in that area. So this is basically the, the main area where you go in and configure exactly what your applications are. So that all zero can give you the right um log in prompts and, and, and get you the access tokens and, and ID tokens that you need for them to all communicate with each other. If that makes sense. Got it right. And then like you said, so when we, when we go to the next step, when we're gonna um build an application that's using 00, will we'll go to that like for our purposes today. I think we're gonna pretend that generic default applications, our application because we want to configure all the things inside of 00 that we can do from a management perspective. I think it's kind of our focus, but this is going to be interesting for me because so often I just go in and I create a new tenant whenever I'm doing a new demo or whatever um or, or starting over time. That's right. Um So, so when I think about what you do in all zero, it's you create a tenant and then you work in the applications in the API S area that we've just looked at. Whereas what Pulumi makes really interesting for me. Um And II, I have actually, when I say I know nothing about it, I did play with one of the quick quick starts, um just the other day and uh I loved the fact that you could just spit up and, and destroy all the Aws stuff that you'd set up because one of the things that I find with Aws and that might just be a meeting thing is I often miss things that I've created and then a month later I get a bill. I'm like, where was that? It's not just you Ben, it's everybody and, and as, as, as, as someone said, there was a good tweet and I, I don't, I don't have it off hand, but it was like, if you don't have a mysterious 23 cent bill every month from Aws. Are you really an engineer? I agree with that one thing. You can't find what it is. That's what, that's what, that's why Corey Quinn is what you're saying is the Pulumi is basically destroying engineers because we're all going to be able to clean up our Aws artifacts really easily. Our goal, our goal is so our goal is to put Corey Quinn out of business by, by being able to do that. And that's all revenge when he, you know, made the uh the, the gift of Billy, the platypus, beating up the Pulumi puss. So there we go. So we're playing the long game, Corey. Yeah. Cool. Ok. So we could create an app, but we're just gonna use this default cat right now, right? Like we, we might even create an app. Sure, why not? I can, I can always grab a client ID. Yeah. Yeah. Do it. Cool. Well, I, I was thinking maybe we do that through the um what do you call it? The Pulumi has an all Zero automation. Yeah, the provider provider. That's the word I was looking for tip of my tongue. Um And we probably, it's called, it's called a client there. It's not actually correct an application. That's why I was confused. Cool. Let's do that. Ok. I'm into it. All right. So that, that's the interesting thing with, within the identity provider kind of naming thing as I mentioned, client is the application because it's the client to the identity provider, which is where that name, it can get confusing because a client can also often a lot of web developers will think of a client as a browser. Um A lot of uh a lot of people will think of a client as the actual person that they're building the website for. So client is a very overloaded term but specifically in the identity space, uh identity provisioning space. Um Yeah, client client as a client to the identity provider. Therefore, that'll be the web application that you're um you're looking into or the mobile app or you know the, the app. Cool. Well, let's try it. Well, I mean, we will, we're gonna, we're gonna learn a little more about odd zero first, but that's cool. We're not gonna click you here. But ok, so we got ourselves, we're gonna get, we're gonna make ourselves an application in a little bit. Um So what is just at a high level because we're gonna talk about tenants a little bit. So just what's a tenant like? So at the top left, you can see the DEF TJ two MA six OO thing. So that's your tenant name. You can actually go down there and create another tenant if you wanted and then you switch tenants. So essentially when you create an all the user account, you're actually just creating a space for multiple tenants a default tenant is created for you when you sign up because there's no point in having an all the account without at least one tenant. And a tenant is basically a sandbox is possibly, I mean, it's the right word. But another overloaded term, it's basically a, a, a space where you can store all of your apps and your applications and your um databases of users and your configuration and your branding and all of the things that you can do within the a dashboard, it's 99% of it is on a per tenant basis. It's so again, to use an overloaded word, that means other things. It's sort of like an instance, right? It's a self contained boundary of stuff, which is what you know, tenancy usually means, but no sense. So in most cases, you might just only ever have one, you might create a second one if you wanted a, a testing and a production one. although uh often I'll just use one even for the testing side of things. Um depending on how much you're doing within all or c has things like actions where you can upload your own javascript and will host that and run it as a, as a cloud function on certain events, like after a user logs in, run this bit of code for me. Um I was doing one the other day where I I, once the user in, I automatically create a strike customer ID for them so that every user already has a strike customer ID uh within the system without my application even having been hit here. Um So you can do a lot of um a lot of things like that. Some people have used it for um consent forms after you log in before you actually get back to the application. Here's the terms and conditions you have to agree to before or zero will even issue a token. Uh So there's also things you can do within zero that you might then have a reason to have a development and a production environment because you might want to make changes to things without production being affected. Um So there are a couple of reasons why you might have different tenants, but also you might have different tenants because you're a web developer and you've got 17 clients on the go and each one of them is gonna have their own tenant because they're gonna be needing to log into this, into the, the um the staging environment that you have. So a few different reasons you'd have multiple tenants. But um yeah, essentially as you say, it's just an instance of all zero that um that allows you to configure everything without affecting any of the other tenants. Awesome, cool. OK. Um Maybe we can just start uh So we've sort of poked around with a couple of things. Uh So there's users, we might play with users, you can have users to. Uh obviously we have one. There's oh we don't, I don't have any users, don't have any yet. So this is another interesting one. When you create an account, that's your user, these are your users for your application. So your tenant stores all of your users, if I went to your web app and I created an account, this is where I would end up. Um So this is a combined view of all of your users, but users can actually be from a number of different sources. So by default, when you, when you integrate all zero, you'll have a user name and password or an email address, password field for um both creating and uh log in. And then I think signing with Google is a default one. OK? But if you jump over to authentication, social and then go over to the top right to create a connection. So here's the list of all the different social connections that we provide and there's dozens. So you can do log with, with Twitter and Box and all of these different things. And all you've got to do is enable um you might have to get an API key. In the case of um Twitter, I think you need to get your own developer API key and put that in there. We provide a test API key so you can enable it. OK? Got it. Yeah. Um But when you go into production, you'd want to use your own. Um So yeah, if I, if you enabled github, for example, and I went to your application, I logged in with github, then it basically like a double or, or flow your application is going to zero with an open ID connect um process all zero then goes sends me on to github, github. I log in, sends the information back to zero or zero will then store that in the user area. So you can see all of the people you've logged in, even with github and Twitter and whatever other social connections you've got, I'm just messing with things. I'm gonna break, we can always kill your tenant one if we need to, but it's, I don't think you're gonna be able to break anything. Good luck. No, actually let me know if you do. It might be something. All right, cool. Um Should we flip over and write some ploy? Let's do that. Ok. So, uh one thing just uh so for, for context, you know, we're gonna be using the uh Pulumi off zero provider which you can find in the Pulumi registry. Um I'm gonna, we'll just take a quick look. We're not gonna spend most of the time looking at the provider, but just a couple of things to know. Right? So we have the zero provider. Uh One of the things we need is we need to um set a couple, we need to set our credentials. So I already sort of pre did this just a little bit. I already found the stuff I needed. You can go chase this down, you, you need to know the off zero domain, which as I learned because I'm a super expert in off zero from 10 minutes before the stream um is actually the name of the tenant. Really what it boils down to. I Well, I, yes and no, right. Um sort of in this case they match, right? Uh And then the client ID, which is the name of the, which is the app, actually the application ID, but it's called the client ID. And then there's a, a client secret which I went and found. Now one thing that I find interesting. Um So we decided, um so you can also either store that environment variable or you can make it part of your Pulumi configuration, which I'll show you how to do that with one of them. And then the other ones I'm gonna do offscreen because they're secret. Uh We actually in our provider, we recommend that you have the client id be encrypted. Uh But it's actually presented in clear text in the off zero U I. But you also don't see it if you're not logged in, whereas your Pulumi configuration can be checked into github. So it's still just prudent probably to, to make it be encrypted in that, in that, in that way. So the interesting thing with the client ID is that it doesn't hurt to have it encrypted for sure. Yeah. Uh, but it can actually be public. There's nothing secret about it. So, if you're writing a single page application, like react or angular or whatever that the client ID is already in clear text because it's within the application that gets sent to the browser. So the client secret. Absolutely. That, that cannot be, that's a password that it, it's a password it'll give you access to and we're gonna be looking at the management API in a minute. Um, but it'll, it'll essentially give you access to um management. A actually, will it give you access? Maybe not the management API but it'll certainly give you access to a lot of um uh Well, I'm gonna go out on a limb and say it will give you access to the management API because that's what we're about to do and we're using the client. But I think like in it indirectly. So I think what it allows you to do and this is really testing my morning brain cells. Um Is it allow you to create an access token that gives you access to the management API which is probably what's happening in the background within the um, the provider, the provider might be. Ok. I see. Well, we're gonna find out, let's see what happens. Cool. Ok. So I'm gonna switch over out of the browser. Um I can tell you how much I love re stream. OK. So what I did already just sort of in the background because um if this is a new, you know, new to you, I'm sorry to skip ahead a couple of little TV, chef things. I went already and I, I created a uh Pulumi program. OK? And the Pulumi program is called off Zero thing because I am clever and the naming is hard and naming is hard. OK? And I I elected, I'm just doing this one in typescript right now. Um If this is, if Pulumi is new to you or whatever, one of the uh great things with Pulumi, you can write your pluie program in typescript, javascript, Python go any of the dot net languages. I just uh you know, today I, I kind of rotate him around a little bit in this stream and then uh it seems like AAA typescript kind of day. So mostly uh drive engine crazy because you like want to write and go. Um But it's OK, it's cool. So what I did to do this though, just if you're curious uh is I just ran Pulumi new typescript, right? And so what that did is it just generated the boiler plate of a typescript Pulumi program. Um So it created, you know, installed the dependencies um just for the Pulumi provider or sorry, the Pulumi package. Um it created a completely useless uh beginning. Uh So this index dot ts, this is gonna be our Pulumi program, it's just importing Pulumi. We're not doing anything. Plus, you know, kind of got this and then the, our Pulumi dot Yaml is just the overall uh configuration for the program, right? So it's just, and the only thing that really matters here is that sort of saying it's the run time. This is, you know, no, so cool. That was easy. That was fun. But this won't really do anything right now. If we were to run this Pulumi program, it's literally not gonna do anything except to create a stack. Um And a stack is an instance of your Pulumi program and, but it's not even worth creating a stack till we have something in it. So the first thing that we want to do um is go ahead and just get that off zero provider installed. And since this is just, you know, good old uh javascript, we can just N PM install it and it's just Pulumi at zero. And this will let us now be able to, to use that, that program. So if we were to look at our package dot json, uh we now see we have off zero available to us, which we can't do anything with unless we do import start as off zero from bloomy slash 00. Also remember Maddie, when you were on stream, we turn off co-pilot. Um even though co-pilot copilots kind of, well, actually, you know what, forget it. Let's, let's, let's let's leave it on. Why not? What am I trying? I'm not teaching a class, you know? Ok, cool. So um all that really did is that kind of gets us now the ability to um to use off Zero. But if we want to do something with it, we need to do a little bit more. So we import stars off zero from pulling out zero. And if we kind of uh again, I'm, you know, I have yet to figure out a way that I can easily share my visual studio code and a browser in res stream. So anybody at res stream is listening. Can you fix that for me, please? Because the one good thing about uh Zoom uh is Zoom, lets you share a portion of your screen like it's and if you didn't know this, if you go in, when you do screen sharing in Zoom, go into advance, it lets you draw. And the reason that's super helpful is if you have like a 49 inch ultra wide monitor like me, right? You don't want me sharing my whole monitor to share more than one window. So anyway, you um this is probably going off topic but I, I imagine we're gonna be doing what about using someone like O BS and just capturing the screen because of research. Like what? Because it's just easier for because now I have to get you into the whole thing, right? So with the way that you could do that. Like, I don't know, I mean, just use O BS to capture your desktop and then create a virtual output of it and then still go through ream not use for streaming. Yeah, there's, there's, there's, there's a bunch of different ways that I could probably skin this cat too like when it comes to that and really what I should start doing for my stream because I have like we have re stream the res stream studio to make it easy for anybody that wants to do the streams on our channel. But I can also, there's nothing preventing me from doing everything in O BS myself and still pumping it to res stream and it goes everywhere. Um And then I could use and uh OK, so again, off topic, but I swear we will get right back to all this stuff. There's a lot of uh streaming stuff that I have eliminated because I run demo's party games. And so like O Bs Ninja is awesome, but it doesn't work with like 10 people um which normal people don't have to do. But when I run Deb's party games and we have two hosts and eight players, you can't do that. But to be 100% honest, I could do this, I could do Pulumi vision with O Bs on my machine, use O Bs Ninja to capture you and we could do all of the things I want to do So maybe I'll do that next week. By the way. Speaking of next week, we have Quintessences a from Pager duty, uh, will be on Pulumi Vision same time. Um, but, uh, uh, different day. Um, yeah, en Engine is, is, is right. Uh, it actually, uh, co-pilot works really well with, uh, Plumy. When you're writing Pulumi code, you'll, you'll, you'll do, you'll do pretty well, um, with Copilot. So, um, so I think we said one of the first things we're gonna do is we're just gonna, I mean, say screw it. Let's try to create a client, right? Um OK, so, um, bear with me for a second. I had to move some things around here. I'm gonna move my terminal down. So we've gone ahead. We've imported that and so we're gonna create a new constant. So we're gonna say we're gonna call it my client. Have you ever noticed like how possessive we are about objects we create and stuff and I, I blame uh Windows 95 because that's where my documents first came from, you know. So OK, here's a beautiful example. Copilot. Look at what just happened here. Yeah, so there we go. OK. So we have, it's a new out zero client. Uh And we're gonna call it my client because we, you know, and let's see, we're just gonna close that. So I don't forget to close that later because I was just trying to work out when you said we're possessive and I thought, why don't I call my things my, something, I'm not a windows user. Maybe that must be it. Um, so, so I'm looking at the, uh, now this is a point where, uh, um, good old, uh, co-pilot is getting too smart for its own good because that is not a property of the, um, that's an output of it is the client ID, but I don't get to set a client ID, but that's OK, just ignore it. Uh So one of the things where I'm looking at the API uh so I can, I, when we were gonna remember, we're creating a client which is also referred to as an application because words are hard. Um So one of the things that lets me do is it lets me configure add ons, it says it lets you allow, you can configure add ons to allow your application to call another application like Firebase or AWS on behalf of an authenticated user. We're not gonna do that though right here. Um So, so like I'm sort of looking through the example. So there is a um so I'm looking to see what are the required properties and there's not really many that are, in fact, it looks like almost all of them, like we could, we could run this right now and it would just create a client with like nothing. Um You might need to provide an app uh as well and maybe an app type, it says non interactive. And I wonder why it's not means to me. Yeah, there's, I wonder if that's the default, if there's, there may be the thing is, there may be a default, there might be. So, you know, when we click on the create and you got the option of those for the native single page app. Um traditional, I think it was called and then a, a service to service or machine to machine. So you need to, you would need to know which one of those to create. But you're right, there might be a default. The reason I suspect there isn't. Uh Yeah. Well, the only reason I suspect that is under the, the, the resource properties which are, you know, that we would be adding to it like one of one of which is, and we will set um the uh what did we just, what uh app type? So let's just so we can see this. So there is one called app type. Now, you see we're getting this type ahead. This is the beauty of, of we're using a general purpose type programming language. There's no, you know, it just gets us from the package. So OK, app type now uh now Copilot is being helpful, but I think our choice is, here's what the options are. Um So there's native sp a regular web. Um I'm wondering what was, so the default one is generic. Is that not what? But I don't see that. I see native spa regular web, non interactive R MS box cloud be concur. I wonder if there's just a whole shit load of them. It's uh I'm familiar with the first four and I'm, I'm gonna set myself what to do and work out what the others are. Um It just says, it says options include. Um So I wonder if the native spa, regular web and non interactive are going to be the four options we saw when that came up. So non interactive is going to be machine to machine. So what would be a good one to pick? So if we're going to be creating a, an actual web application or an application of some sort that's not machine to machine like a server to server communication, any of the first three. So obviously, you use force. I, I use the word obviously a lot, I'm retraining myself. Me too, me too. I'm trying so hard. But um that would be something like reactor or angular or anything that's a single page app. Um If you're writing a dot net web app or PHP or Python or any of those things that would be a regular web app. And then if you're doing um electron or um trying to remember the name of the Android programming language. Anyway, if you're doing I OS or Android development or native can also include desktop applications, then you would go with native. So should we do regular web? Um Does it matter? We're not actually gonna be writing. Yeah, we're not doing anything. We just want to choose one of the first three. Ok. We'll just do native. Why not? Ok, cool. Um However, that needs to be a string because I swear to God, I can write type script. Ok, so a couple of other things we can do. Um So I'm just sort of going through So there's a loud clients, right? So allowed clients, I assume means like where someone can come from? Actually, let's find out who's gonna tell us list of application I DS that will be allowed to make a delegation request by default, all applications will be allowed. And the example is allow dot example dot com, right? Yeah. So I think we can probably just leave that as, oh, I think we can leave it as nothing. I don't think we have to set it. I'm, I'm just sort of trying to go through some of our, I just wanna set something. Um I guess there's uh well, actually just even the app type is probably good enough just to we said something, let's just make it happen, right? I mean, we can always add things, maybe we can find a thing and we can we can change it next to see how things change. So OK. So theoretically, I like to say theoretically a lot when I'm about to write, run some code. Um actually theoretically, uh let's, let's, let's, let's, let's do a fun thing just out of curiosity. Um who found an issue bug with creating an H two P authorizer in a w with, um Steven, is that in regards to, with, uh you're saying an HP authorizer, is that a, an 00 thing or is that just a general Pulumi bug you found that you want to talk about? That's Stephen in the chat uh while we're waiting for that. Does anybody know why this is not gonna work? You may or may not know. Um Apparently you do need to give it a name just looking at the, we did give it a name. That's the, that's, that's, that's in there. Ok. Oh, well, well, wait a minute. Um Yeah, that's the unique name of the resource within, within that um Oh Pulumi bug. Ok, Stephen, we'll, we'll follow up on that uh in a minute. Um I am the function signature. Yeah, I'm using and I like it but I'm pretty sure it's a Pulumi thing. Cool. Uh Steven, I'll definitely follow up with you and, and find out what you found there. Um We have not actually set the um um our auth uh our credentials, right? So what we need to do is we need to do a plume config and I need to do my configuration. So for this because, so the first one I'm gonna do, um I will actually actually let me see if this is gonna work the way I want it. Uh I just did the thing, I didn't want to do that and oh jeez, I just ruined everything. It's fine. Um. Ok. Hang on, I'm gonna stop sharing my screen for just a second. I'm just gonna do this. What I was trying to do was tear that tab off but that's not what it wants to do. Ok? It's, it's totally fine. Um Again, we're gonna, ok? So what I need to do is I need to set the configuration which you haven't done. Um So that went and it created the Pulumi dot dev dot Yaml, which is our default first stack and you can see it has now set the off zero domain. Now, remember I also need to set the client id and the um client secret. So I'm gonna gonna hide again for a second so I can do those without uh you know, again, watch the replay, you can see them, but whatever you're, you can see the 1st 20 characters, which is, oh, that's true. That's true. It did kind of go off the side. Um But the other good fact is like even if you did manage to do this, uh I'm gonna probably delete this entire tenant as soon as we're done with the uh with the stream. OK? So we did that. That's so now the fun thing is if you take a look, if we go back to our Pulumi DEV dot Yaml, you see how the client ID, so the domain stayed the same as it was, but the client ID, those say secret. So these are encrypted. So even when they get pushed up to Pulumi Sass and everything like that, these are all encrypted and even if you were to refer to these, uh um, they will never show like in Pulumi output because they're known as, as secret. So sure. And you be comfortable. Is it standard practice to put that file into your source control version? DEV? Yes, you're, you're Yeah, absolutely. And, and, and um because it's your configuration, so a stack, like in this case DEV, usually it doesn't always, but it oftentimes can refer like to an environment. So it's what are the, I like to think about it? Your Pulumi program is saying, what is the shape of the dial, your stack config uh is what is the dial set to perhaps, you know, can be that way. It doesn't always have to be that way. But yeah, so we're gonna go ahead and we're gonna do a Pulumi up. And uh so this is gonna say I'm gonna run my Pulumi program, but what it's really gonna do is it actually didn't even do that. It says I'm gonna do a preview. I'm gonna say if you were to, I'm gonna make sure that your program will, you know, run Maddie. Uh And what if you were to run it. What would it do? It says, OK, it has to actually create the stack. The stack hasn't been created and it's gonna create a client called my client, right? And then I can always say the detail, the detail is gonna get really specific about what's gonna happen, right? So you're gonna see inside of zero, it says, OK, it's creating an app type native. And so now this is interest, this is important. So you'll see that the client, even though we named it my client, um because Pulumi does this auto naming thing and this is to prevent name space collisions. We can override this if we wanted to. We're not gonna worry about that right now. We don't care in the case of something like this, you actually probably would because the name is descriptive. But when you're creating things like VPC S and resources and networks and stuff like that, but we're, we're OK for right now. So we'll go ahead and run this and um and error update failed. You need to create a client. OK? Cannot fetch token client is not authorized to access. We have, so I need to create a of that code in the index t to actually use these credentials. Uh We shouldn't have to, uh That's pretty cool. That's the, that's um so, but what I'm wondering, I'm gonna check something here. Um No. Ok. So, uh the client's not authorized to access so it could be that I have not done. I maybe I need to create a client grant in general for the client that we're using because we're using basically, right? What, what you need is because at the moment we're talking to management API so what you actually need is credentials to be able to talk to management API So if you jump back into your dashboard, this should technically be fairly easy. I think. Yep. Oops. Uh where, as you say, theoretically, I say technically this should technically be fairly easy. OK. So, all right. So we're in here, which makes sense because what I grabbed the client ID and the uh client secret from was just that client. It's not a client. Yeah. So correct. OK. So this is where the and we'll have a look at both. OK. Uh Engine says he created a machine to machine application type. Yeah, for the use of this. So, so we need to create an application for the, the purpose of using Pulumi. Yeah. OK. Is that what you were gonna do? OK. Cool. So create application this thing right? To share your screen again? Am I not? 00 I picked, I picked the right thing. I picked the thing I was sharing. I just didn't actually share it. I I'm not too bad at driving blind but yeah. No, no, no, no. It's, it's like I, I, because I have to add it to the, to the screen, you know, what I mean like. Yeah. OK. So machine to machine application, right? So uh there you go. So this will now show you a list of all the API S that, that are defined in everything, man. Just give it to look at me. This is, this is S 777 going on right now. I love it. Yes, it does. They do need, they do need some more love. And I um the good news engine that is every time I do these streams with a, with a partner or with a provider, I put a little to do in my Asana board that now that I know a little more about it, I can go back and I can, uh, I can update, update some of this stuff and create some guides. Ok. All right. So we're just giving them everything. It doesn't matter because that's not, this is not good practice, but yes, yoga. Yes. Yeah. Cool. Ok. So now, now you'll need to use the client ID and the client secret from, from this app which you'll be able to, oh, which I can do. Ok. So first I can just do the client ID, which again, we decided we don't care so I can do. I'm just gonna um Yes. So that's something we spoke about before we start the stream as well. Is that the documentation says to encrypt the client ID, which as I said, there's nothing wrong with doing that. Um but it doesn't need to be encrypted. The only one that you really want to not share is the client secret. And where will I? Oh, I can copy the client secret without showing it. Right. I'm sure I'll be able to. Yep. Ok, cool. Perfect. Yep. So I can grab this and I can do my thing back here. So that was something that at the very minimum. I feel like what we just had to do here should definitely, you know, and Engines Point should at least be added to the read me of the provider that like because it doesn't really, yeah, get us there. So that's, that's a good thing to remember. Ok. So now I've done that. Cool. Let's switch back to um let's clear our screen first. Maddie. There we go. Um ok, so if you're an Eagle eye, you'll see that this hash has changed. No, you won't because I'm not sharing my screen there, you know. Um So these have been updated but whatever, it's fine. So now let's do our oh jeez, I do not let me forget to just whack this whole tenant because if you watch the replay, it's all in my history. God, I'm so bad at this. Ok. So now, but this is fun. It doesn't have to create the stack because that happened, right? So all, but it's like now we have to create the client. So. Ok, cool. Let's see what's up. Look at that. Hey, and um, again, I apologize that it's so that I have to like, uh, go back and forth this way. But, ok, so if we go back to zero now and we go back to our applications, we see my clients. There. It is, it is, it's a native app and it's, uh, managed by Pulumi. Cool. That's very exciting. You can have a logo. Um So that got us. Uh, so we, we created ourselves a client. That's a, that's a thing we can, we can do. Um So a couple of things. 00, there is a way to do a client grant, although you still would end up having to even like you have to start with having the right to do this stuff. But I do see we have a resource for, for client grants. Um Let's do a little deviation if you go down to the little the third icon from the bottom, which will have the uh on the left hand side in the, the navigation. So the marketplace, the third icon. Oh, from the bottom. Yeah. OK. And just like Pulumi into the search box. So this is a way for various vendors to provide code that will automatically provision things or do things within the ace ecosystem. And I was just had a quick jump in my end to have a look at this. And I'm wondering whether when you add integration here, this might actually automatically do the create the um the machine to machine client. Uh No, you know what it did when you said when I said an integration to watch, what happens takes you to the installation tab can be done and set up and configured, takes you to this. So we absolutely need to fix this, this page. I can't see that page. I am sorry. Um It's, it's the, it's the same one. It's the one, it's, it's, it's, it's, it's, it's a different page. That's the same content that we were looking at. So yeah. Um but that's good to and like, yeah, the full API document. Yeah. So this is all right now because there's no way to there. Yeah, there's not an automatic integration. Technically, it's possible within the work, the marketplace to have the installation or the integration installation process, do all of the stuff in the background to create the, the client that has machine to machine and to give you those credentials to you somehow. I'm not sure what that workflow would look like. Um But um but yeah, the the manual creation of that. So that's something we can probably talk about offline. Yeah, I think so. Connect your people with my people and sort something out and all those people go, why don't you all just do it? Right. That's right. And I'll say, well, hm. Yeah. Um All right, we got, we got a little bit more time. Let's find something else. One we can do here. So, all right. So a user as now, this is where I, I'm, I'm, I'm finding things interesting. So like, so user ID. OK. So because let's, let's make a user into our, into our system here. So I'm gonna switch, gonna switch my, I'm gonna do it this way because I, I'm just getting so tired of. OK? So just so we kind of have a feel. So it says with the user resource, we can manage user identities, et cetera, et cetera. So let's uh go ahead, we'll add a user and then we can give that user. Um Well, let's figure out what we could do with it, right? So, yeah, that's, that's what I was just gonna do. OK? So let's uh I wasn't sure whether it was just hiding. I, I thought I know it's a little bit of both, little bit of both. OK? Cool. You're doing well, to be honest, I do really badly at talking and typing and sorting stuff at the same time. All right. So let's see. So if I'm gonna look at the user resource, OK. So we have our client. Um let me just move this over so I can see everything I'm trying to do at once. OK? So let's go ahead. Now, I'm gonna move this out of the way and we're gonna create. So, um so one of the things uh so we can create, we're gonna create a role just for fun. Uh because I want to show how we can pass things around with each other programmatically. Um But before I do that, so I want to look at what we can do with roles. So there's uh um so a role resource has a, a description and a name, I guess it doesn't really oh permission, name of the permission here. Well, let's just see what happens here when I try to do this. OK. So I'm gonna say we're gonna call this constant and instead of a user, we're gonna refer to this. We don't wanna call it Admins. We're gonna say it regular. OK? And this is a new all zero but regular is not a um oh I guess that's just what it's called. Ok, let's see what happens. And then do you want to payroll? Yes. Encryption is a regular user. What did I do wrong here? You got new zero dot user? 00 it's just assuming everything's a user. Yeah. OK. There we go. Ok. So this is gonna create a role just called regular. OK? Um and we don't just giving a role, doesn't inherently give it any special rights or anything that lets us then give it rights later. So cool. Ok, so now we're gonna create a user, right? And we're gonna do a new uh zero. No, see co pilot to hell. OK. User. OK. And but this time we're not gonna let it be quite so crazy. There we go. OK. Yeah, just go away. Uh, user new lot zero user connection. What did, because we don't have any user, we don't have any ags in there yet. That's fine. It's, it's fine. Ok. So we'd say connection name. Ok. And then that's what I was gonna say. Use the autocomplete. Yes, I hate that long screen out. So user ID, we can set, um, I don't know if we need to, um, user ID, I would be automatically created. I don't think I would set that. That seems unlikely. Yeah. OK. But we can do a user name. It is interesting that the documentation shows that you can provide it now is the user name. Uh OK. User name is like thanks. OK. And then, so given name is Michael. Family name is Bluth. Uh I don't know what the Nick, what nickname means. So nickname is just a friendly name. You an alias of the user. OK. So we don't really need that. You don't need it. What, what all do when, when you log in using an email address and password is it will take the part before the and use that as your only name. And it just means that when you get the ID token at the end of the day, then you've got things like the email address and um various other things. You've also got a nickname. So you can just say hi Ben instead of hi Benedict dot com. Email verified means that means that when I've created my account, I've gone to my email and clicked on the link that says this is my email address so I can set that. So that's sort of skipping if I set that to true it skips a verification process. Well, it just sounded Canadian or Australian there. So we're gonna do that actually. No, like I don't want to actually log in as him. So I don't want it because I don't want y'all to know how to log into this thing unless you have access to that. So we're gonna just call it who her? Like um ok. And then now this is where it'll get fun. So then we can say rolls and it's regular ID, right? Oh This is what like so because so we have the could get the ID again, I'm now I'm pointing at my screen. So when we created that role. So this is gonna create, yeah, we could log in as Michael Bluth at mats dot com with that password except we won't be able to be unless I verify my email, but I presume that I will get a verification email when this happens when we create it. Let's find out, let's find out some things, let's find out. All right. Ok. So let's do Pulumi up. Um and sorry, I haven't been some clients reject unapproved user. Ok. All right, cool. So again, if we go into our details, we can see it's gonna create that and see. So the name um But that's OK. Oh Because we called it user, but that's fine. That's just sort of the object. Cool. Go ahead and, and see what that looks like when we see it in the dashboard. Yep. Uh cannot say user name for connection with that requires user name. Uh So user names are generally not asked for when you're logging in and I was wondering how this would work as well. You can in all zero in the dashboard or probably through plume plume provider. Um You can require a user name which is an option you can configure for the user name, password connection. It was called us. Yeah, use user name, password authentication connection type. Oh, it says that the user name is the user name valid if the connection requires a user name, which you're saying default, the connection doesn't. Ok. So I should delete that. So is the user name of this us? Quote user name? The log in would be the email address. Got it. Ok. So many things in my documentation, I need to get like it. I I'm taking ownership of it. It's cool. Ok. And cool. So now let's go over to our pal off zero and let's see. Uh that should be under users users and there should be a role in that as well. Yeah, there you go. Ok, so there is our pal Michael Bluth and latest log in. Ok. Email is pending. I'm gonna take a quick look on my phone because just because we're curious, uh, and, uh, no, not yet. At least or if it was going. Yeah. M fa is enabled for this user. Is that just by default or is that, um, yeah, so it, it means that you can use M fa, oh, it's enabled. It's not required. Oh, send enrollment. Ok. It's, it's not disallowed. Ok. Um, so I don't know, we'll, we'll keep watching to see if. Uh, so now let's do, uh, sort of along a similar lines. We talked uh, a minute ago and by a minute ago, I mean, 54 minutes ago about how, you know, Ben was saying it's great because you can, you know, delete all of your, uh, what do you call it? Ews resources and stuff. Well, same thing here. So, if I, if I were to run Pulumi Destroy right now, it should remove from off zero, this client, this role and this user, which is totally fine. Uh, I am gonna try. You probably aren't gonna want to do this all the time before, before you do that. Should we just, should we test the client and make sure that the user name and password, the email address and password you provided will actually allows you to log in. Yeah, but don't I need to, I need to set it to pretend that the email was verified. No, you can actually log in without the email being verified. It just really when you get the ID token into your application, one of the values in that Jason web token is going to be email as false. So you can then choose as, as the application. Do I have to give this, this, this, this Michael does Michael Bluth does not have any access to any applications yet though, right? Uh He should have, he should have access to, well, he'll have access to any of the applications in the system. So logging in is one thing. And then the question is what, what API is might he have access to? Got it. Ok. So how do I try this? So yeah, just head back to dashboard and we can try it from the um uh authentication, connections area, uh authentication, no uh database, ok. Oh right. Got it. And then hit the three dots on the right and go to try. Ok. And this was with those details Michael Bluth. Oh no Michael Bluth at dot com. And that was who continue? Alright. It works. So you can see in that that that's the information that will get sent through as part of the um the identity token to your application when you log in. So even though you didn't provide a nickname, it's taking the nickname from your email address. Makes sense. Fair. One thing that's not showing that will come through in the id token is that email verified. Got it. Now check this out just for one other thing that we can do. So, um uh let me find it there it is. So this is also this is all in the Pulumi sas. We weren't really looking at this, but we can kind of um see all the things that we were, you know, so if we look at our DEV stack, we have all the activity. So all those, those pieces we were running, we were able to see and we can actually even see those, those same outputs that were happening, right? So if we look at the timeline, we can see what it did, we can see what changed the configuration. And again, we can't see these because they're encrypted. Uh These are the resources that are under management currently, right? So, what we'll see is when we go back and then we do Pulumi destroy. Actually, my, the history won't be gone. You know, it's uh well, it'll, it'll, it'll destroy. If I uh the Pulumi destroy, I'll still have my stack and all that. But then when I remove the actual stack, so we're gonna go ahead and um swap back over real quick to let's just go clean up after ourselves. Uh because there is no equivalent of Corey Quinn for a zero. And if we do Pulumi Destroy, sit there and say, OK, this is all the things I'm gonna get rid of and now you'll notice this view live so that, that link would take you to that um that thing that we were just looking at, right? OK. Cool. Yes, we wanted to perform to destroy boom, boom. It's totally done. And again, it says the stack is still there. So if I were to go back over to my off thing off off thing, Dev, I can still see but it would then show um like we'll just do this to because why should you believe me? Um Citation required? Yeah, citation required. Now CC Resources is none, you know, and again, activity we did it destroy, that was fine. Um But what I can do is then I can go and, and delete the whole stack like to clean up, which is something you don't necessarily do a lot. I will do it because I don't ever need to do this again, you know, this is, this is not an ongoing thing. So um awesome. Well, this was a lot of fun. I'm looking forward to uh doing some stuff. So I think what we were talking about uh doing in our follow up on this is using the Pulumi Automation API and maybe having a web app that can then itself configure itself for uh 00. It sounds very inception like it is a little bit, it's kind of turtles all the way down. Um Don't forget to tune in. Uh you know, if you're uh watching this on youtube, you know, subscribe if you're, if you're with us on Twitch, uh, smash that, that follow button and then you'll be notified when we've got upcoming streams. But we do Pulumi vision every Thursday at the same time. So, starting about an hour earlier than it is right at this moment. And, yeah, next week we'll have, uh, quintessences from Page of Duty. We're gonna be talking a little bit about, uh, some cool stuff we can do with PD and Pulumi and those of you who don't know, I, I spent a few years working to pager duty. So, uh, we should have a good time. Ben. Thank you for getting up early and for those who want to join us for the next stream that you and I are gonna be doing. Um, I assume you'll be sending that out via Twitter. We will. But, uh, what's, uh, let's just Twitch, Twitch and youtube channel names are both all so Twitch dot TV slash zero and youtube dot com slash, um, ok. Go ahead and, uh, why don't you go subscribe to those? I just put those, put those links in the chat. We don't spend quite as regularly as you do, but we do have a couple of interesting things coming out every now and then. Awesome. I'm excited. I see. Interesting. Anyway, I, that at least you have a couple of things. That is definitely things, is what we have things is what we have. All right. And until next time we'll see you all.

---
