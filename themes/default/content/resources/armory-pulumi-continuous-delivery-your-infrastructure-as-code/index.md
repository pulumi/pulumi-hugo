---
preview_image:
hero:
  image: /icons/containers.svg
  title: "Armory + Pulumi:  Continuous Delivery for your Infrastructure as Code"
title: "Armory + Pulumi:  Continuous Delivery for your..."
meta_desc: |
    Join engineers from Pulumi and Armory to learn how to automate your cloud infrastructure deployments as part of your CI/CD process.
url_slug: armory-pulumi-continuous-delivery-your-infrastructure-as-code
featured: false
pre_recorded: true
pulumi_tv: false
unlisted: false
gated: false
type: webinars
external: false
no_getting_started: true
block_external_search_index: false
main:
  title: "Armory + Pulumi:  Continuous Delivery for your Infrastructure as Code"
  description: |
    Join engineers from Pulumi and Armory to learn how to automate your cloud infrastructure deployments as part of your CI/CD process.  Learn more about Pulumi at https://www.pulumi.com
  sortable_date: 2021-04-13T19:05:03Z
  youtube_url: https://www.youtube.com/embed/KwNo26MaAzY
transcript: |
    Good afternoon, everyone. Uh Welcome to the Pulumi and Armory uh webinar. Uh We're gonna get started in a few minutes here. Uh We're just gonna take a few, few moments for uh everyone else uh who registered to join uh in, in the meantime, we, we have a few poll questions. We, we'd like to ask you and, and get your uh answers from the space. All right. So we have both some uh some new users as well as uh people who have been using plume for a while. That's, that's great. Great to see. Um All right, I think we have a, another poll question for everyone and this one is, what's your favorite Pulumi superpower? OK. All right. So it looks like uh within the audience. Seems like there, there's pretty solid usage across the board if uh various pluming capabilities. Um So let me have a few, few other questions here. I'll, I'll pull up one last one and then we'll get started. All right. So how much experience do you have using Spinnaker? Are folks here new to Spinnaker or uh is, is this something you've been using for a while? We would love your feedback. All right. So it, it looks like there's a, a good number of you are, are ready to have your minds blown about how awesome it is to use Spinnaker with Pulumi. Uh And with that, I'm going to turn control over to Daniel and uh let him kick things off everyone and uh I am Dan Peach and software engineer at Armory. Um I've been working in the Spinnaker community um for about four years and super excited to be here to talk about uh Pulumi and Spinnaker and I'm Puneet Loki, I'm a software engineer at Pulumi. Um I work on our platform um And I especially like working on C I CD integrations and um I actually worked on the Spinnaker plug in um for Pulumi um with uh with Daniel Peach at Armory Cool. Um As per mentioned, we're gonna be talking about uh sort of the, the plug in that that per um made for Spinnaker, but just sort of at a high level. Um We're gonna talk about sort of how uh CD tools and infrastructure tools um can work together. Um And how sort of we can take the best concepts and best practices from application delivery um and apply them to infrastructure changes. Um So you can imagine like canary changes to infrastructure rather than rolling out those changes monolithically. Um Another side of this is infrastructure tools can help in the whole CD process. Um things that can be hard to do in a CD tool like setting up um ephemeral Q A and or test environments um are easy. Uh When you bring CD and infrastructure tools together. Um CD tools like Spinnaker usually don't know about say SQS or your S3 bucket but Pulumi does um what is Spinnaker? Uh It's a continuous delivery tool. Uh It was open sourced by Netflix and Google in 2015. Um because it's open source, it has a huge set of integrations usually built by the cloud vendors themselves. Um When it was open sourced, it was like really a tool for deploying uh V MS um to EC2 or a Google compute engine. Um And it's really, it's expanded so much now. So there's um a cloud Foundry provider, an app and pro app engine provider, uh a cober provider and so on um through the the shortest path to understanding Spinnaker. And what sort of separates it from um other CD tools um is to talk about sort of the, the building blocks that it works with. Um Because I think they're, they're really different than other CD tools. Um So that the primitives that Spinnaker works with and that you can compose pipelines with um are things like blue green deployments, um Canary analysis. Um And one click, one click roll back backs. Um And so what's sort of the relationship between Armory and Spinnaker? Um Armory is really enterprise grade spinnaker. So really the the feature support and security, that sort of enterprises need to be successful with Spinnaker. Um We're super excited about our upcoming SASS offering. Um We have a sort of a couple different ways you can get sort of our enterprise use distribution, you can install it yourselves. Um We'll manage it in your environment and um, soon we'll be able to have sort of a fully fledged A S um offering. Um And we also sort of work in open source, we're in it for the long haul. Um We work in our open source to make sure that the project is healthy and cool. Uh I'm gonna turn it over to, to talk about uh Pulumi. Um But also if any, if you guys have any questions, um feel free to, to ask them um at any point and we're happy to answer them. Great, great. All right. Can you still hear me? OK, perfect. All right. So, um so as Dan mentioned, um you know, um I'm here to talk about uh Pulumi. Um Pulumi is a um modern infrastructure as code uh platform. Um I think of it as a platform because it, you know, it, it combines several things. Um you know, the ability to uh write infrastructure using general purpose programming languages. Um And there's a cli that um lets you run those um those apps that you write um as well as there's the uh a offering that allows you to kind of get this 10,000 ft overview of um everything that's going on in your organization as far as infrastructure goes. Um So it's a great place to go see. Um what's going on with your infrastructure. Um get the full traceability of all the changes that have happened um with, with regards to a specific stack or whatnot. Um And I, and if you're unfamiliar with the terms, don't worry about it. Um, you know, when you check out uh Pulumi dot com slash start, um you know, we'll explain all of those concepts to you. Um But um briefly, as the here mentions, there's um there's, there's a few things that that's, that makes Pulumi really special. Um You know, one because we're dealing with general purpose programming languages, um That means that you can also do things like, you know, normal code reviews and um you can write tests for it. Um You can integrate it as part of your continuous delivery workflow, which is what we're here to talk about today. Uh But, but really, you know, anything that you can do today with your application code, the code that runs during run time, um You know, we're, we're trying to change the thinking of developers um and ops teams to also treat your infrastructure the same way, right? Um You know, if you're continuously testing your infrastructure and you're continuously um deploying or updating your infrastructure, uh why not doing, do it through um a pipeline and automate all of that, um especially allowing your DEV teams to also be able to move in a, in an agile way and, and um be able to quickly offload um things rather than having to go back and refresh their memory on um how a certain infrastructure was implemented and, and whatnot. Um It's really easy to pick up and start. Um And, and so it really helps eliminate those silos um that exist between the various ops teams. Um and the um developer teams um that, that work on the application itself. Um So, uh you know, II I mentioned that Pulumi supports um some popular general purpose programming languages. There's um the one of the examples that we like using that, that we think resonates with uh most of our audience is, is being able to create an S3 bucket with aws. Um As Dan mentioned, um You know, Pulumi is able to let you create infrastructure across various cloud providers which, which we'll see um in a couple of slides later. Uh But, but basically, um you know, when, when it comes to creating a resource um in a specific language, uh we, we're not trying to reinvent how you go about creating those resources. Um We're, we're basically whatever knowledge that you have working with a specific programming language or just even any general purpose programming language, really. Um It's easy to pick up one of these languages and, and start creating your infrastructure in that in that programming language. So for example, if you're used to writing and um apps and um using the node Js run time, uh then you're probably using EXPRESS and you're, you're using the whole node ecosystem and, and pulling in a bunch of N PM modules and such the experience of writing infrastructure um using Pulumi and no jazz would also be the same, you know, you're basically going to be able to use the same N PM modules. Um Any libraries that you uh that you have been used to using, you can still use that uh you can still um make calls out to other tools um as part of your infrastructure if you need to, you know, fork out to another process that needs to do something. Uh Basically, you can do all of that. Um So really, we're, we're, we're, we're opening up the gates to what you can do with the programming language um for the infrastructure space as well. Um And, and I mentioned about deploying continuously and, and um being able to use the existing workflows that you have for your application. Um also for infrastructure. So, you know, we, we've seen uh users use any of these V CS to uh several C I CD systems. In fact, we actually have guides covering how to use Pulumi and all of these C I CD systems today. We also support writing infrastructure in any of these uh major cloud providers. Uh But that's not all. Um, we actually support, um, over, I think a few dozen, probably 40 plus providers, which we'll, we'll take a look at that momentarily. Uh, but he, you know, today we're, we're gonna talk specifically about Spinnaker and, and I'll show you how to install the plug in, uh, the Pulumi plug-in for Spinnaker, uh, with just two simple commands and how you can get started using, uh Pulumi and Spinnaker. Um, And um as I mentioned before, you know, there's, there's over 40 plus infrastructure providers really, you know, we, you, you know, just, just looking at all the logos here. You can, you, you know, some of you are out there probably wondering, oh, you know, I could, I could automate pretty much my entire infrastructure stack using, using programming languages. Um And you won't be wrong, you know, we've, we've seen teams go from, you know, nothing to completely uh reinventing their infrastructure um with, with just programming language and, and just, you know, really do it very quickly because you know, where you're basically going to reuse um your existing knowledge of how these providers work or, or how you, you've been working with them. Um And that's not to say, you know, the, the development environment also. Um pretty much just like how you're used to writing your application code using any of the um ID ES that you may be used to using, you can use those same ID ES, you get the same strong typing support, uh with many of the programming languages that we support and, um, and as well as, you know, just being able to integrate that into your local development, um, you know, loop itself. Um And, you know, and like I said, we, we definitely support the top, uh or like the big cloud providers, but there's so many other cloud providers out there, um, including, you know, digital lotion and uh cloud and, and whatnot, uh that we, we support as well. Um So really you should go out, go and take a look at all of the cloud providers that we support. Um and then, um, you know, get started automating them um today. So, um, so I wanted to show a quick demo um of how to install the plug in itself. Um And, and we actually have the plug-in in a repository. Um, today, it's open source. Um We've, uh we've been working with um Armory and, and I basically have been working with Daniel Peach, um, you know, on this plug in itself and using the new uh plug-in framework that um that that's being developed for uh for spinnaker. Um So if you haven't checked that out, you should definitely check it out. Um But basically, um there's just two simple commands, you know, one is you add the repository um that the plug-in is going to uh be sourced from. And the other one is to actually install the plug in itself. Now, I'm not gonna go run these commands because I've already uh gone ahead and done that. Um But I just wanted to show you what these commands look like um in a terminal. Um You know, basically I'm, I'm adding my Pulumi repository uh that contains the path to the uh repository JSON file that's like a metadata. And the second one is actually adding a specific version of the plug in itself. So if I take a look at my hai your config um you can see that the repository gets added. Um As you can see, I have my own repository here. Um And that's because you can, you can have other repositories in your uh spinnaker or your how, how your configuration. So you could imagine, you know, pulling plugins from different repositories because you would like to use some custom stages that are provided by different uh plug-in authors and such. So you can totally do that. Um It's kind of like um you know, similar to some of the um uh plug in and experience of other C I CD services where you can add whatever community author plugins to uh to enrich your experience of using the C IC service. Um And you can see under the Spinnaker extensibility um the plug in that, that I was adding um using that second command. Um So that's pretty simple, just two commands to get started. Um And um so I also wanted to show how to use the plug in itself in uh in Spinnaker. Uh it's pretty simple. I have a very basic pipeline here. I won't go through too much of the pipeline because um you know Daniel is gonna do the deep dive about uh doing the continuous delivery using the plug-in um and showing awesome pipeline there. Uh But when, when we designed the pipeline, we wanted to keep in mind that um you know, people users would, would want to use their own, uh may want to use their own Docker container uh that has some specific ways to pull cloud credentials and whatnot. Um You can definitely do that. Um If you, if you don't know if you want to do that, um you can leave the default. Um which, which I think is um Pulumi Pulumi latest, which, which gives you all the tools that you need um in an environment to be able to run the um Pulumi App itself. Um And we expose some other things such as, you know, which command you would like to run. What are the arguments that you want to pass to that um command? Um And this is this basically maps directly with the commands that the Pulumi Cli itself exposes. Um And, and there's this curious thing here actually, the, these two things. Uh but first, the back in URL itself is the um default managed service back end that we provide. Um And this is our SAS platform um that you can use to manage your, your stacks and you can control our back for all of your stacks. So if you have a team, um and you only would like to give access to specific uh members of your team access to the production stack. Uh Then, you know, you basically uh that's the place where you can do this. Um But of course, there's also the option to self host Pulumi. So if your organization is interested in self hosting, Pulumi, then this is where you would change the um URL that the cli will talk to you to keep track of the infrastructure state. That's one of the really beneficial things about um using something like Pulumi. Um you, you get uh infrastructure state tracking out of the box. Um So really, you can, you know, when you start today, uh when you go sign up for an account, you start today if you're not using it already, uh you, you know, you by default, you're getting that. Um you know, basically we track what's what you uh what infrastructure you've already deployed. And then when you make changes, we tell you that. Um hey, you're changing your, uh you know, resource XYZ and we have to delete it because you change property, you know, def or whatever. And so we show you this really rich diff uh right in the cli um and as well as you know, because we're using the Pulumi plug in. You can see the console log output here also. Um Then the last thing is the secret. So your Plume app may uh will need access to the credentials to your cloud provider. So you can actually go out and create those resources. And so the uh secrets uh name is, is a KTIS resource secret uh or secret resource, sorry uh that contains environment variables that your plumbing app uh needs access to. So, in a setting in a multi team setting, you can think of Spinnaker admins, basically creating these re secret resources for you and, and only giving access to a specific secret uh to a team and that therefore, you know, only that team can use the environment variables and, and hence um the credentials to uh to a specific cloud provider itself. Uh So, um that's um you know, that's pretty much um a, you know, all what, what the, what the plug-in does, you know, it's really powerful like it, it exposes um all of these functionalities of, of what you would be able to do on your local machine with the cli. Um And, and really allows you to customize this in, in a way that your team needs to. Um And, and like I said, you know, if your organization is uh interested in creating um its own um docker container image or uh an image that, that are pre bakes uh a way to pull cloud credentials or package some other tools, you can absolutely do that. As long as your spinnaker cluster can pull that image down. Um You know, you can specify that image here and run your plume apps within that image itself. Um So that's a really nice option for uh for some advanced use cases as well. Um But uh with that, I will actually pass it over to um DAN to take us through some. Oh yeah, sure. Just a question for you. So if I if we sort of know more about installing and configuring the plug in, um where's a good place to look? Is there documentation uh about the installing the plug in itself? Yeah, or, or sorry, I thought there was a site under Pulumi dot com that gave you sort of the configuration options and, and no, that's a great question. Um Yeah, so there, there is um we actually have a, a whole section about continuous delivery tools. Um And this is, this is a, this is a section that I actually referenced in uh one of the slides. Uh And there you go, there's the Spinnaker guide um then walks through all the Spinnaker concepts. Um Of course, it doesn't do a deep dive into Spinnaker concepts. Uh but it touches on a few of them and as well as um some Pulumi concepts as well to get you started really quickly. Um But um yeah, you should definitely check, check out this guide um on, on the various options that the plug-in provides. Um But yeah, you, you can, um the, you know, the installation method is pretty simple but to know what customization options you have. Um The guide is a really good place to start. Um That actually reminds me, um, you know, um I was actually looking for the Spinnaker examples for plug-in and if I'm not wrong there's a plug-in repository. Yeah. Um Do you wanna talk about this one? Um Yeah, I can talk about it briefly. Um Just if anyone's curious, um I know a lot of people are new to Spinnaker on this call. But um I work at Armory on a team that's just generally uh um interested in making Spinnaker more ostensible. Um And that includes sort of this, this plug in framework that, that um used to make his plug in. Um And this sort of uh actually organization Spinnaker plug-in examples um is a bunch of really templates and examples um for how you could get started building a, a plug-in for Spinnaker. Um And there's really, there's a ton of reasons why you might want to extend Spinnaker. But um if your sort of organization has, I don't know, an internal service that, you know, the open source community really wouldn't be able to use. Um But you want Spinnaker to talk to that service. Um That's a really great, great way. Uh A, a plug-in is a really great way to enable that kind of functionality. Um And then the other side of that is if, if um you're a tool like Pulumi, um of course, uh and you want to integrate with Spinnaker. Um But uh wanna have sort of a fast development cycle um and not sort of have to deal with, with committing to the, the big open source community. A plug in is a great way to go. Um What? Yeah, that's awesome. I, I remember going through these examples um quite a bit um when I was trying to learn and understand the concepts of spinnaker uh especially like the plug-in creators guide. Um although it touched on some things and I was able to kind of quickly understand, you know, the gist of how to write a plug-in. The examples really helped me out. Um So I was really thankful for, for having the examples there. All right. Um I will give the presenter rights back to Daniel so we can go through the um deep dive of the um the demo that, that we've got for you today. What? Um Yeah. So uh we're gonna actually show sort of the, the plug in that Bernie wrote in action um at a super high level. Uh We're gonna make a code change, uh deploy it to an ephemeral Q A environment with Pulumi uh with the Pulumi plug in. Um We're gonna Q A it uh If we like it, we're gonna deploy it to broad. Um If we don't, we're not going to deploy fraud. Um And once we're done, in either case, either sort of branch of the pipeline, we're gonna tear down the Q A environment. So we don't waste resources and cool. So, um so I set up a, a really simple uh github repo um to sort of get this working. Um And the, the repo has two components, um infrastructure directory and a source directory and the infrastructure directory is your PLU app. So you'll recognize this. Um And it's pretty simple. Um We're going to be deploying our Q A environment is gonna be, um, but of course, it could be, you know, whatever provider uh you want that plume supports. Um And we're just gonna be applying a few things. So a name space, uh a load balancer and a deployment. Um And the name space is gonna be parameterized by the bloomy stack, um which will be able to pass in from Segar. Um What? Um And then on the other side of this, we have a really simple spring boot application. I just took a starter app. Um And the change that, that I've made, we're gonna sort of skip ahead, fast forward to the demo. But, um, instead of saying greetings from spring boot, we're gonna see in our Q A environment that it says hello Pulumi. Um And then the, the sort of last thing that that's going on in this github rebo is that um when I uh sort of commit a change and then push a tag to this rebo, we start off uh a github actions workflow um that uh builds the application um and uh builds a Docker image and pushes it to AAA Docker image registry. And so at that point, that's where it sort of spinnaker um pops in. Um So right here, we've, we, this is sort of the pipeline that we're interested that we're talking about. Um And I already sort of committed that change, uh pushed up a tag and uh the KUB action ran and, and created a Docker image um earlier today about 45 minutes ago. Um And so it's waiting here for a manual judgment. Um And of course, you can think about this as a stand in for like uh much more sophisticated testing here. So you could have integration testing um uh canary analysis, um Some of these stages that, that come out of the box for Spinnaker. Um So before we click, yes here and we'll talk about what's going on here. Uh I'm just gonna walk through the pipeline configuration, what's going on. Um So, uh for those that aren't familiar Spinnaker has this concept of, of triggers. So triggers, trigger pipelines. Um And uh there's a lot of sort of different things that can trigger pipelines. Uh And one of them is, is uh Spinnaker can sort of listen to your Docker image registry and um trigger a pipeline when it sees that there's a new image available. Um So, in this case, uh our guard action pushed off, uh pushed up a new image uh to this uh repo um And we kicked off the pipeline. Um So here this stage is, is using the, the Pulumi plug in um that talked about. Um And so a couple of interesting things to say here, one, we were passing the stack as Q A. Um Another piece is that Spinnaker has sort of this um template language or parameter language. Um And we can say uh we want to pass the, the tag that came in from the Docker image um uh two Pulumi here. Um That's how it's resolved. Um Next, um We're sort of uh asking uh kubernetes to tell us what did, what did Pulumi deploy in the previous stage. Um And we're hoping to make this, this experience a little bit smoother um in future iterations of the, the plug in. Um But basically, we need this stage in order to get this, this follow on stage um which gives you the nice sort of drop down that we'll, we'll talk about later on. Um But we're gonna be able to click a button and it's gonna pop open. Um The, the actual controller endpoint that we saw earlier that should say, as I mentioned. Um So here's that template language again and it's just saying um from sort of the resolved, deploy and point stage. Um What's the IP that you resolved? Um Cool. And so, uh in this manual judgment, you can either click pass or fail and we can affect the behavior of downstream stages accordingly. Um So in either case, whether it's a pass or a fail, we're gonna tear down the Q A environment and this is actually sort of just kicking off another uh pipeline. Um And we can look at that in a second but it's just, it's really just gonna be running the ploy stage. A plumy destroyed. Um The other side is if we said pants, then uh Spinnaker has a notion of like flow control. Um And you can say uh based on that expression language, um what happened in an upstream stage uh If it was a pass, if we mark it as a pass, then we're gonna run this stage. So, uh if we mark pass, we're actually gonna deploy the product. Um And again, this is kicking off sort of another pipeline, we call a child pipeline. Um And we're passing again this parameter, the, the doer image that we um triggered the pipeline with to the child pipeline. Um Cool. So I think these two stages are, are really very simple. They're just um uh one is, is running gloomy destroy, this is the tear down Q A pipeline. Um And this one is the deploy to Prod pipeline. Um And again, pretty pretty simple. It's, it's just pulling me up, but the environment is different. Cool. So um we've executed sort of the, the deploy to Q A. Uh we resolved the end point and now we're gonna actually check that this is working as expected. Um And great. It is says hello. Um Cool. So now we get to say yes, it passed. Um and a moment. Yeah, great. So the two sort of downstream stages which are actually child pipelines kick off. And so this one is gonna be tearing down the Q A environment and pretty soon uh this sort of Q A, the, the end point that we resolved is gonna be gone. Um And the other one is deployed to our broad environment. Um Great. Um I'm going to hand things back over to um so we can finish this off. Great. Um So before we talk about the testing strategies itself, if I actually have a question, um you mentioned the Docker registry, um is there a way to plug into other image registries? Uh And like what other types of uh triggers could, could one use? For example, if I um if I want, if I have ac I job and I just wanted to kick off a build or a pipeline and spinnaker, could I do that somehow? Yeah. So we have like there's like first class support for like a bunch of different C I tools. So like Travis or Jenkins, uh Jenkins is um really one of the oldest and primary ones um and sort of uh those triggers. So you can say, like on the completion of this Jenkin job kick off this pipeline, and um you can sort of pass references to like the artifacts that you want to deploy um between Jenkins and, and Spinnaker. Um But something that's happened in the past couple of years is, is um this triggering has become more generalized. Um And so, uh if you just want to send a web hook with sort of references to what you want to deploy or um we have support for like SQX or Google pubs sub. Um And so uh you can really sort of build the triggering flow that you want um based on sort of these approvals or web, web books and so on. That's cool. I, I didn't realize that uh there was pub sub um triggers also. That's, I could, I could imagine um creating that um pub sub infrastructure itself with Pulumi um and setting that up for use with your Spinnaker pipeline. Um That that'd be a, that'd be a cool thing to do. Um Awesome. So, um um I, I wanted to uh talk about um testing strategies. I, I, you know, I, I don't think I can cover all of the amazing things that you can do with uh with, with the various strategies that Pulumi has to offer with infrastructure testing. Um I definitely urge you to um check out the testing guides for examples on each of these strategies and, you know, and just kind of give you a starting point for how you can use this um uh or any of these strategies to, to test your own infrastructure. Um So because it's a, because polo allows you to use uh programming language, you, you might be wondering, you know, could I then test it just like my application code? And um and yes, you can, you know, and there's, there's also some nuances about infrastructure itself, right? We, we, we're creating infrastructure resources, um you know, physical or like, you know, actual cloud resources that, that do a thing. And so in, in, in the simplest case, we have unit tests where you can mock those resources and then you can do some really basic testing. So if you were, for example, using the um typescript or javascript language, you can use Moca tests. Uh you can write a test using Moca test, uh uh Moca test framework and uh run really quick unit tests uh for simpler things. And if you want to do some more advanced things such as, you know, enforcing policies and such, which um which I touched on very lightly before. Um but it's a really powerful tool, especially for um organizations, but, you know, not just organization but you know, any other team that wants to enforce security policies and such, you can definitely do that with, with the policy test. But one really um simple example that I that I like to use is uh you know, just the, the requirement to tag resources for cloud, it becomes really um um a, a thing that pretty much every team wants to do. Um Once you've started using um cloud services and, and you've, you've grown a little bit and you start to add more cloud resources, you, you know, there's usually a desire to tag those resources. So for a for cost control, um but also for B to see why certain resources are being created and, and you know, just so that you don't have zombie resources out there um that, that are just churning and um you know, and contributing to that cost control um thing that I mentioned. Uh And so you could imagine writing a policy test that uh that ensures that your teams are uh when you, when they are creating infrastructure resources that these tests will run at the organization level and check if those resources have a tag and if not, then, you know, you can either set that to fail the deployment or you can warn them. Um And so it gives you the ability to kind of turn the knobs based on what your organization policy is. Um And, and lastly, the integration test itself, it's a really good way for you to automate the whole end to end of setting up your infrastructure. Um And then, and then just validating that your infrastructure runs and uh maybe run some smoke tests as part of that and then tear it down. Um So that's completely possible as well. And, and of course, you know, again, uh just using programming language to, to do that as well. Um And, you know, I, I definitely urge you to check out the uh testing guide and, and look at the examples and, you know, write tests for your infrastructure. Um It's really very easy to get started. Um But with that, um you know, that's pretty much what we had to uh discuss today and, and show you a couple of demos about the plug-in and um a sample continuous delivery pipeline. Um but um some helpful links for you to get started. Um and uh specifically for Pulumi, uh we, we do have some really nice tutorials uh on our get started page. Uh It, it introduces you to a lot of new concepts. Um But in a, in a very uh simple way and so you can get started um with pulling me fairly quickly actually. Uh so understand concepts like stacks and um projects and whatnot. Um But um other than that, um Dan, I don't, I don't know if you uh have anything to add about um a good way to get started about uh Spinnaker itself. Um Yeah, there's great docs on Armor, the link there. There's also sort of the general open source website. Uh both places are, are a good place to look. Great. Um I actually remember just now, um I know when I was trying to set up Spinnaker, um I, you know, I, I definitely was trying to go through the setup guide and I, you know, I found that, you know, there's a lot of steps to do um to get it set up, right? Uh The one thing that really helped me out um personally was the Minnaar tool uh that you guys have uh put together um which, which was super easy to get started with. Uh And I had a local cluster up and running in like 15 minutes or so. Um And then from there on, it was super easy to just quickly test the plug in um when I was developing the plug in itself. So um if you're looking to get started uh to use Spinnaker and um want to, you know, just take it, take it for a test drive on your local machine. I definitely recommend um checking out Armory um Micar um tool as well. Yeah, I appreciate that call out. Um Yeah, Spinnaker is um you know, it's not like Pulumi, which is this really easy cli to get started with. Um Spinnaker is a bunch of micro services um uh and sort of getting that up and running in a single command or set of commands uh is, is not as easy as Pulumi. So Viniar is um a great tool. Um So, yeah, I appreciate that. Um So, um yeah, it does. Um if you have any questions, please feel free to uh submit some questions and, you know, we'll, we'll be happy to answer those. I have a question about the testing and if someone from the, the audience has uh questions they can interrupt at any point. But um how does sort of the policy testing works? Like, how do, how do those policies get like distributed through an organization? Like what form does that take? Yeah. No, that's, that's a great question. Um In fact, um let me see if I can open a um I'll go to the very guide that I've been asking um folks to uh check out. Um So, um so we uh we also refer to the policy test as policy as code. Um But um let's go check out some examples here. So basically, um the way this works is, you know, you author your policy um as code and um and here's a very simple example. Um It's a, it's a policy that is um validating the cluster resources um just reading this on the fly. But, but you can see that it's pretty simple, you know, you, it's, it's kind of follows the pattern of a um of a unit test where the unit test is uh validating um a specific uh artifact. Um And in this case, this validate stack um callback is past the um the resources that are being constructed. And so, um you, you can basically evaluate certain properties about the resource based on the value of the properties. And you can, you can either report um an error uh and, and control basically the uh violation level um with the sort of enforcement that you want to put on that policy. Um But, you know, this is a very quick example of, of, you know, what a policy itself looks like. So, um basically, you, you've got your infrastructure code and then you've got the policies, um and they're uh they're independent of each other um in terms of uh where they live within the uh code base. Um But um, but as far as publishing the policy itself goes, there's a separate command that you would use to publish that policy to your organization. And so the, the policy gets stored as a policy pack as we call it and you can version those and you can control enforcement um of those policy packs uh either for all the stacks within your organization or you can, um, you can enforce them for uh specific stacks and you can do that through the uh Pulumi console. Um And so when you run a, um you, when you run your infrastructure code itself, you can specify which policy pack to run. Um But also when, you know, when you're enforcing it for um all of your stacks, when you run, pull me up um basically that will pick up um the policy pack that it needs to run. Got it. That's really cool. Um So I see a couple of questions here. Uh So, um I, I'm actually not super familiar with the Spinnaker um Canary deployment method. Um But um you know, speaking just from the Pulumi perspective, um you know, I, I would say if, if uh using Pulumi to orchestrate the red green or uh whatever deployment strategy works for your team um is, is easy and manageable for, for your team, then I would say that. Um But I don't know, Dan, if you have something to add about contrasting between, you know, using Spinnaker to do the Canary deployment versus using Pulumi itself. Um Yeah, I, I'm curious what sort of a canary deployment um with Pulumi uh means because I think uh you know, different sort of tools have different notions of, of canary. Um You know, there was a tool is do which many people are familiar with, which uh you know, uh said had canary support. And really what I was talking about was like the ability to sort of uh do like traffic management at a very low level um between multiple versions. Um And for Spinnaker that uh the integration is really saying like um uh Spinnaker is integrated with a bunch of sort of um uh metrics providers. So, uh data dog from et cetera, et cetera, et cetera. Um And if you give sort of spinnaker uh or actually sort of Spinnaker's uh Canary analysis service is called, um And the idea is that you give uh Kayenta uh uh two labels, one is like you're the old sort of deployment and one is the new and a time range. And uh sort of asks those metrics providers for the metrics over that time range and does like a statistical analysis um of the metrics across that range and comes to like a yes or no judgment. Um So that for Spinnaker is what we mean by Canary analysis. Um And so uh I'm curious sir, if it says both Pollo and Spinnaker have the building of canaries and what does a Canary look like in the pooing world? Yeah. And the polo world, I, I think de depending on uh what set sort of resources you're deploying, um you the managing the, the switch between the traffic um can um like you will have to employ an explicit strategy to, to code that um rather than having a higher level tool that can manage that um such as in the case of um Spinnaker. Um So I, I know that we've, we've done some work on uh an operator for Kuti specifically um which, which would allow you to do such a deployment strategy. Um And I don't know, um I know Mike has been um Mike is on um as well, so I, I don't know if uh Mike you, you have something to add here as far as like the uh operator goes and how you could use um Pulumi as part of um as part of that to do a, a blue green type of deployment. Yeah, that's a great question. So uh to, to take a step back for a second, the way Pulumi works in general with resources uh is in a, in a crate before it deletes approach. So by definition, all resources in Pulumi uh and their dependency graph um are blue green um out of definition. Now to, to Benes point, things get a little bit more, more tricky once you start involving service traffic and making sure you even, you don't have dropped packets. So that, that comes down to making sure that um you're gonna do a little bit more uh orchestration depending on, on the platform you're using. So uh is a good choice where blue green deployments are, are naturally supported. Um If you're using stateless services that are funded by a service um selecting on labels that can be facilitated in a series of steps with gloomy. Um But generally speaking, when it comes to, to the true service, uh um blue green, it's always gonna be a little bit dependent on, on how it is. You're rolling it out and, and the platform that you're, you're working with. But again, by definition, the way we, we create and uh replace resources when say there's specs change like if you have an S3 bucket and it's, it's a public setting by default. If on the next run, you want to make it a private bucket, we will create that private bucket first. Make sure it's, it's uh responsive. It's, it's up and only until we know we have complete success, then will we tear down the previous S3 bucket? That was private? Yeah. And um, speaking of specific platforms that, you know, um Azure has some um services to um that, that have that capability sort of built in um app service is one popular one that supports deployment slots. Um So you deploy to the ideas that you deploy to a staging slot. Uh And then you have your live site running in the production slot and then they have this feature that allows you to swap the slots. Um And you can also, and I, I don't remember if they have a way to direct traffic to both slots and um and then do a, an intelligent swap. Um But again, like as, as Mike, um Mike has also pointed out, you know, it's really dependent on what type of platform that you're trying to deploy to. Um and and what you'll need to work with. So um that can get a little bit tricky with uh um the cool um I don't think we have any other questions for today. Um So I guess um we can end the webinar for today. Um But Uh Dan, it was really great um talking to you about this and um you know, showing off the plug in and um and going through the pipeline as well. So, um yeah, it's been great. All right. Uh And thanks much for participating and helping with all the questions and uh thanks everyone for joining. Um We'll uh we'll hope to catch you on the next one. Great, everyone. See.

---
