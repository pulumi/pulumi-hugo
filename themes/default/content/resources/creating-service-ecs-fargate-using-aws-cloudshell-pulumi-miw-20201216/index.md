---
preview_image:
hero:
  image: /icons/containers.svg
  title: "Creating a Service in ECS Fargate using AWS CloudShell and Pulumi | MIW 2020-12-16"
title: "Creating a Service in ECS Fargate using AWS CloudShell..."
meta_desc: |
    We try out AWS CloudShell and use it to deploy a service on ECS Fargate using Pulumi in this week's episode of Modern Infrastructure Wednesday.
url_slug: creating-service-ecs-fargate-using-aws-cloudshell-pulumi-miw-20201216
featured: false
pre_recorded: true
pulumi_tv: false
unlisted: false
gated: false
type: webinars
external: false
no_getting_started: true
block_external_search_index: false
main:
  title: "Creating a Service in ECS Fargate using AWS CloudShell and Pulumi | MIW 2020-12-16"
  description: |
    We try out AWS CloudShell and use it to deploy a service on ECS Fargate using Pulumi in this week's episode of Modern Infrastructure Wednesday.  Today's example is in Python, but Pulumi makes it easy to stand up infrastructure in your favorite languages including TypeScript, JavaScript, C#, and Go - saving time over legacy tools like CloudFormation and Hashicorp Terraform.  https://www.pulumi.com/docs/get-started/?utm_campaign=PulumiTV&utm_source=youtube.com&utm_medium=video
  sortable_date: 2020-12-16T18:02:47Z
  youtube_url: https://www.youtube.com/embed/eAGNFN5NcL4
transcript: |
    Hello and welcome to another episode of Modern Infrastructure Wednesday. I'm your host, Li Zen. Today we're going to be exploring Aws S new feature that they launched at Reinvent clouds shell. And so here I have a cloud shell terminal open uh in my browser and we've already got ahead and installed Pulumi, I ran, you know, this curl command. Let me actually, but my font size a little bit here. Um Just a little bit extra. There we go. So hopefully that's easier to see. Uh Yeah, so already installed Pulumi and um already set up my access token. So I'm not gonna show you that part since I don't want to reveal my axis tokens. Uh And then we're gonna go and see how easy it is to actually just get Fargate running uh using this thing. So um in the Pulumi examples, Ribo, there's tons of different examples. Lots of alibi examples. I'm gonna use the one I just had opened uh Aws Py Fargate. So I can actually just copy this and let's make it directory uh I four G and we should be able to just run Pulumi new against uh that URL and So this will actually uh create a new project for us based on that example, we call this uh cloud show for gate um DEV and that's pretty much it. Uh And so this will actually go ahead and do everything else we need. Uh There's already Python uh installed in the cloud show environment. So I don't have to bother doing that. Uh Pulumi takes care of the rest in terms of installing all the dependencies as you can see, scrolling across the screen. Uh right now and then after this, uh we're gonna run Pulumi up and you'll notice I didn't set up my AWS credentials uh or anything along those lines, we're just gonna go ahead and run this thing and actually, you know, it all just works out of the box because everything's already set up in our environment. So we don't have to fill it with credentials or anything like that and away it goes. Um And so you can see it's creating our ECs cluster along with everything else that's needed for the example to run. Let's take a quick look at what's in the example. Um You know, it actually talks about uh we kind of skip through all this stuff and, and so now it's creating this part, it's gonna create a load balancer for us as the actual service end point uh to talk to. Uh And then we can actually go access that end point to see uh that it's actually working. So we'll do that. Um And then also just take a quick look at the code uh while that update is running. So you can see in the code uh that, you know, all this is doing is uh creating the VPC, creating the subnets, uh creating the load balancer, the target group, uh a role. And then also finally the task, the task definition with the service. Um and you can see kind of over here, uh you know, we're still uh creating uh the load balancer. Uh but kind of all these things are all part of that example. We didn't have to even pop up in the code or look at anything like Pulumi just again is taking care of all of this infrastructure for us. Um And it's working seamlessly with clouds shell. So one of the cool things is, you know, if you want to have a persistent environment in Aws with Pulumi installed, uh So you don't have to, you know, make sure you're using the right profile or using the right um you know, set up or anything like that. Like it's, it's gonna be the right account because you're kind of uh logged into that one via your Clouds shell console. Um And ideally, you know, it'll, it'll have been set up with the right permissions and everything ahead of time. So kind of, you don't have to worry about, you know, if you're deploying from your DEV environment for example, if you're actually deploying to the right DEV environment. So, for example, in this case, I'm logged into our DEV environment uh where I'm, I'm uh executing this. Uh It's taking a little bit longer than it's expecting. So let's a little wait a little bit longer. Let's go back and take a look, uh more of the code and see kind of what else it's doing here. Uh So beside, you know, creating the BBC and the security group for that VPC, um and then I, I mentioned kind of the, the, the load balance. So that's the part we're, we're waiting on right now. Um One of the things we also do here is uh set up this task uh that actually just uses this container image uh engine X. Uh And so if we, if we go back here, um And then it's like, obviously don't do anything here with that. But if you wanted, uh what you could do is you could create your own Docker file, use the Pulumi Docker provider, uh create that image and then feed that all the way through here. And then, and then reference that image uh you know, as a, as an image you've uploaded to, you know, Docker hub or, or ECR or somewhere uh that you're hosting. So it looks like it's all done. Uh Let's copy this and actually see that this worked. Uh So if we go to uh that URL, uh I guess it's still probably loading double check this. Uh So it should wait, maybe like another second. Um I wonder if somehow uh there we go, just do a refresh and it's all done and ready to go. So, proving that it's a live demo. It's actually for real. Um But yeah, like super easy, right? Like all I did was fire our cloud shell install. Pulumi uh was able to just clone that example by running Pulumi new against this repo. There's like I said, tons of examples in here. If you haven't explored them before, lots of Aws ones in multiple languages. Um I didn't have to really set up anything and it all just worked out of the box and they got an engine X service running on ecs in three minutes, two minutes plus the set up time. Anyways, I hope you enjoy this episode of Modern Infrastructure Wednesday. Make sure you hit that like and subscribe button and we'll see you next week on modern infrastructure Wednesday. Thanks a lot.

---
