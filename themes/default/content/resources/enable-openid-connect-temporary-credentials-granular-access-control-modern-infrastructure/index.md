---
preview_image:
hero:
  image: /icons/containers.svg
  title: "Enable OpenID Connect: Temporary Credentials & Granular Access Control | Modern Infrastructure"
title: "Enable OpenID Connect: Temporary Credentials & Granular..."
meta_desc: |
    You can use OpenID Connect (OIDC) for temporary cloud credentials when using Pulumi Deployments. The main benefits of using the OIDC integration fo...
url_slug: enable-openid-connect-temporary-credentials-granular-access-control-modern-infrastructure
featured: false
pre_recorded: true
pulumi_tv: false
unlisted: false
gated: false
type: webinars
external: false
no_getting_started: true
block_external_search_index: false
main:
  title: "Enable OpenID Connect: Temporary Credentials & Granular Access Control | Modern Infrastructure"
  description: |
    You can use OpenID Connect (OIDC) for temporary cloud credentials when using Pulumi Deployments. The main benefits of using the OIDC integration for Pulumi Deployments are as follows: 1. Temporary credentials 2. Granular access control This video is based on the article Managing credentials with Open ID Connect for Pulumi Deployments at https://www.pulumi.com/blog/oidc-blog/   
  sortable_date: 2023-03-08T23:36:18Z
  youtube_url: https://www.youtube.com/embed/0IcpWLhatoY
transcript: |
    Welcome to modern infrastructure Wednesday. My name is Aaron. So we launched Pulumi deployments at the end of last year. Uh Pulumi deployments is a deployment as a service technology where Pulumi fully manages the execution of infrastructures code programs for users of the platform. Um I'm gonna do a series that shows off some of the features of Pulumi deployments. Today is part one where I'm gonna show you how to enable open ID connect uh to enable temporary credentials and granular access controls. So open ID connect or O I DC is an identity layer built on top of OO 2.0 framework. It allows third party applications to verify the identity of end users and to obtain basic user profile information. O I DC uses JSON web tokens which you can obtain using flows conforming to the OO 2.0 specifications. So with O I DC, it allows you to create temporary credentials and granular access controls, which is considered best practices for doing cloud infrastructure provisioning. So every time a deployment runs um a new temporary credential is generated. So there's no need to store sensitive credentials that are reused with every deployment. Um you can also associate a O I DC token to a stack or organization um with that, you can essentially implement least privileged access for all your stacks and scope down access to only what is needed. OK. I'm gonna walk you through creating a new project, setting up employee deployments and enabling O I DC. Let's get started. Let's do that name this. We're gonna use um something from the examples folder uh that I have cloned into my github. Um It just deploys a simple uh static website do that. We can go over settings. We're gonna enable, deploy. What we're gonna do here is select the examples of repo um branch and then we're gonna use the code and the S3, it is probably three folder. Uh Now we're gonna hit um enable Aws integration, open ID, connect here and what it's gonna ask for is a role on. So first things first, we're gonna go to the AWS console, to the identity and access management console. Um First, we have to create an identity provider uh because I'm using um a plum account, this is already created. So you create an identity provider. Um You know, here this is the uh fighter use api dot ploy dot com slash O I DC. Um And then in audiences, you have to include the uh organizations that it uh that you wanted to recognize. So here you have Aaron um and we use that. So next, we'll create a role the O I DC integration uses. So we'll create role, we're gonna select web identity. Then we're gonna go and pick the provider here that I showed earlier, the API do ploy dot com slash O I DC provider. And then the audience is the organization. I'm gonna do a deployment into which is uh Aaron. Um We're gonna select a policy. I'm just gonna use a um general administrative access policy here. Head next. Uh we'll call this cow R DC and, ok, that all makes sense. So we're gonna hit create roll. OK. The roll is created. We'll hit view roll and here we'll have this A RN this iron. So we're gonna copy it here and go back to our plume deploy setting. So this is where you paste the roll iron. Um give the session name uh duration. So zero hours, we'll set it for 30 minutes and zero seconds and we're gonna hit save deployment. We also need to add in uh a environment variable setting our A S region. So we'll do that real quick. Mhm. Uh Now we can kick off a uh deployment and we're gonna let that run. Ok. The deployment is complete here. Um And you, you can see here it uses O I DC to fetch credentials to make changes to your AWS account. And then here's the plume deployment and we can take a quick look at the website provision and yep, that works using O I DC gives you temporary credentials and granular access controls for your infrastructure stacks, which are some of the best practices to use when managing infrastructure, I want to quickly call out that. In this video, we use the administrator access policy in our I AM role. But in production use cases, we would likely want to create a role with finer grain permissions and lock down to lease privilege for only the resources that the stack creates and modifies. This video is based on a blog post by Pat Gavlin. The link is below in the video. Um If you enjoy this video, don't forget to hit like and subscribe below. And the next part of this Pulumi deployment series, I'm gonna cover how to use deployments for drift detection and time bound stacks. That's it for today's modern infrastructure Wednesday. See y'all next time.

---
