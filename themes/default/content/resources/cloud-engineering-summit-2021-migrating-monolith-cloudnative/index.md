---
preview_image:
hero:
  image: /icons/containers.svg
  title: "Cloud Engineering Summit 2021: Migrating a monolith to Cloud-Native"
title: "Cloud Engineering Summit 2021: Migrating a monolith to..."
meta_desc: |
    So your company has finally decided to move to the Cloud Native ecosystem. You’ve landed on containerization as your first step. You heard that all...
url_slug: cloud-engineering-summit-2021-migrating-monolith-cloudnative
featured: false
pre_recorded: true
pulumi_tv: false
unlisted: false
gated: false
type: webinars
external: false
no_getting_started: true
block_external_search_index: false
main:
  title: "Cloud Engineering Summit 2021: Migrating a monolith to Cloud-Native"
  description: |
    So your company has finally decided to move to the Cloud Native ecosystem. You’ve landed on containerization as your first step. You heard that all you needed to do was containerize your first app and then push it to Kubernetes/OpenShift/Nomad, and the cost savings just come. You’ve done this, and well, things have gone not as planned. Some of the tech didn’t do what you expected, and wait, what do you mean our OpEx has gone up? Simply said: the promise of containerization or migrating to the Cloud Native ecosystem can be a lie if you don’t do your homework. Sadly most companies don’t. In this talk, I’ll explain a few gotchas that a “few” enterprises, in the guise of AsgharLabs, hit moving towards the Cloud Native world, and hopefully, you’ll learn from their mistakes, so you’re trip down this path will be more comfortable and closer to the promise.  Talk by: JJ Asghar
  sortable_date: 2021-10-20T23:01:36Z
  youtube_url: https://www.youtube.com/embed/0Jnq-M_7se0
transcript: |
    Hello, my name is JJ Agar and I'm a developer advocate for IBM cloud. You're here to see migrating a monolith to cloud native and the stumbling block you may have not heard about. So let me go ahead and switch over to my slides. Hopefully, you can see an IBM slide here now and there we go. So here we go again. Hi JJ developer advocate for the IBM cloud. Um You can find me at JJ Agar uh on Twitter or I really do have the address or email address of awesome at IBM dot com. So your company has finally decided to move the cod native ecosystem, you've landed on containerization as your first step and you heard all you need to do is containerize your first app and push the Kubernetes or open shift or Nomad and the cost savings will just come. You've done this and well, honestly, things haven't really gone as well as planned. Some of the tech didn't go do what you expected and wait, what do you mean our op has gone up? So if we said the promise of containerization or the migrating to the cloud native ecosystem can be a lie if you don't do your homework. Sadly, most companies don't, they just don't in this talk, I'll explain a few got, and a few enterprises in the guise of Agar labs hit towards moving to the cloud native world and hopefully you learn from those mistakes and so you don't trip down those, those stumbling blocks as you go past them yourself. So, what is Agar Labs? It's a multi multinational tech conglomerate that bought hard into the VM ecosystem. They make ones and zeros like no other company but noticed that they were falling behind in all seriousness as our labs is just a collection of different companies that I've seen and the stories I've taken from the different ones that have the same issues honestly. So I don't say, you know, random airline or random bank, I just say Asgar Labs, it makes life so much easier and yes, it is a fake company and no, they're not hiring. So what did you ask our things? Ask our webs think they needed to do? They really thought they could take their migration from the physical data center or co location to the VM ecosystem, right? Use that exact same technique where they could just move their monolithic applications to cloud native bare metal is the same or bare metal to V MS is the same as V MS to containers, right? I mean, that's, that's a promise, right? Well, obviously it's not, that's the whole point of this talk, I come into this conversation normally with a labs when they've had a few of those successful migrations, which honestly, I beg to differ that they were, they're nowhere near where they thought they could have been for the amount of time and effort and money they've spent. I'm the cloud native expert that comes in and asks some very simple yet very tough co co uh questions that believe it or not are deceptively hard to answer. So let's ask, let's ask these questions now to, so you can kind of see that conversation that kind of can appear and hopefully make your life a little bit easier. Let me go ahead and fix my screen real quick. Seems a little weird with me chopped off it, doesn't it? Hm. There we go. So here, here we go. Let's ask those questions now. So first question, who containerized your app? Honestly? Was it developers or the operations team? Was it a DEV team? Was it the coe the center of excellent. Was there more than a couple of status meetings? Cuff our webs coff between the project teams and who shipped it? Like was an actual like communication back and forth? It's really important to know who actually containerized it followed up with why? Honestly? Like why did we containerize this app? Ask our labs containerized it because they were told to somebody read a magazine in an airplane and said, hey, we need to containerize this app now we need to be cloud native. So go do it. Is it no other reason than some executive wanted to be next. Gen I've seen this happen with the cloud where people move from in the black with physical hardware, moving into the cloud into just V MS and they went into the red because the amount of effort they had to spend on migrating from bare metal to V MS. That conversation happens with V MS to containerization. Now, it's a really important thing to ask. Why did we actually containerize this thing? Next question is where, where do you plan on deploying this or where have you deployed this to dispersed from the conversation? In which cloud are you using? Was it because of choice or is it because of some EL A is the best, is the best one for our company, the one we're actually using? Or is it the one that we're forced to use? It's an important question to ask because if you do a lot of ML maybe a cloud that isn't IBM cloud someone different out there or maybe you, you are really bought into the AWS ecosystem, but you're forced to use Azure for some reason, you really need to really look at um where you're planning on deploying your application. And finally, what, what did we actually containerize? This comes from the a the the actual architecture of what you containerized, the, the, the the actual conversation around it. Like one of agar labs subsidiaries just took a war file. Could have actually honestly been an ear file. I don't really know. And that they could just shove it into the dock docker container and call it a day. This opened up so many conversations about why going down this path they did. So let's actually look at some very specific container. Uh Some architectural changes you have to do when you move down this path just uh just before. Oops, I'm actually in the way. So let me move myself up here, make myself a little smaller. There we go. Hm Transition. There we go. So this is that first step, right? The rep platform example, they took that ear file, they took that, you know, that war file and shoved it in the container and made that happen. They thought this was as far as they needed to go. I begged to differ. I begged to, to, to say that this is just the first step when you just shove a container into, shove a wire, a wire file into a container. You don't take advantage of the scheduling or any parts of openshift or ktis in the cognitive ecosystem. A lot of that time for instance, because I work for IBM. Of course, I say webs, webs exists. There's a lot of things around it that take care of a lot of the your, your application openshift and Ktis don't have that by, by by standards. So you have to start thinking about how to build those things. So let's talk about the next step. You need to start looking into repackaging into micro services where you take that wire file. Now you break it up or if it's in your file or break up all the wire files into different small little applications. So you can start having their own um own histories, their own speed to deploy things. So now all of a sudden you don't have this one big wire file that deploys everything again, it doesn't have to be a wire file. It can be a Python app, it can be whatever. I'm just using that as an example here and you start cutting it all up into small different pieces. So then you start repackaging to allow for the different levels and different velocities. You want to be able to deploy your application. But this is only the, the, the, the, the, the second step to grading to true cloud native. The third and probably the final step, which actually is the longest one to get to is refactoring into something called the Strangler pattern. And I'm using reactor as the actual term here because you're going to have to refactor your application to work into cloud native Strangle pattern. If you don't know is the ability to slow but surely take bits and pieces your application out and not just micro services, but even smaller portions of it. So you can start creating functions and things like that where everything now has a bunch of different uh widgets to be able to be successful. Obviously, it depends on the different applications out there and the way that your applications are ran. So I can't actually give you a great example uh off the, off the bat here, but take a, take a few moments and, and look into the strangle pattern, refacing your application to it. It's a journey to get to this point. It's very important to recognize. So let me go ahead and bring myself back down into the corner here. So we can start talking about some architectural advantages and disadvantages going down this path. But first of all, going, spending your time in this space velocity becomes the most important value prop. Now people are starting to bring out applications so quickly that if you have to spend any time not doing the cloud native way of deploying something you will be left behind the ability to focus on your own histories and scoping your clusters for what you actually need, which will help you save a significant amount of money will only benefit you in the long term. Having one big pod is not, is not as good as having multiple smaller pots. So when you start building out that Strangler pattern application and ref factoring it, you start building different services with different pods so you can scale out what you need when you don't need it, which in turn allows you to actually optimize for the hardware you have. But on the flip side, this all requires such a higher level of cooperation. You need to build out more, more advanced integration tests along with likely most likely a completely different deployment policy system. I didn't realize at the time that the concept of CCB was not considered an industry standard. But when I was working in a place at Agar Labs company, they had something called the CCB or the change control board where traditionally a bunch of middle managers would literally get into a room every Thursday afternoon and give a thumbs up to say, yes, let's do the deploy this weekend. I was actually part of that at one point where I would, when I saw those thumbs up in that meeting, that means I was waking up at three in the morning on that Saturday to deploy the application now that just does not work inside of the cloud native ecosystem. Imagine the hundreds of possible deployments you could do during the day with micro services. That whole change control board is, is something of the past, it just doesn't work. So then imagine the cultural change that you're gonna have to make, make happen with that. All of a sudden those middle managers don't have that level of control or understanding. So you have to work and have a collaboration between all these different people to be successful. Hey JJ, are we doubling up on things like as we move down this path? Why, why is there another load bouncer inside of cnet's or open shifts or why is there a scheduler there when I have a schedule written to my app? Well, of course, you're gonna, you're gonna need to audit and verify, um, your application as you ref factor and move down this path, you're going to have to do your homework. There will be a time where you're going to see, you know, basically an application where you might have a schedule or built into, into it that you're not leveraging the scheduler. For, for instance, Kubernetes a great example is that I saw this one as our labs company, it has a schedule built into their, their job application and whenever it spun out, um child processes, it would spin it out and it would sit inside that pot and instead of the cloud native ecosystem instead of cloud native or at least Cober is an openshift. You can't spin out child services outside of the pot. So when all of a sudden these child processes would start, they came to me and was like JJ, why do we see all this usage spike on this one specific node? We have three nos shouldn't it leverage it across? I'm like, well, no, because you're running everything inside of one pod. So it's all just staying on that one plus one note, you're like, oh, so we should just make one really big note. And I'm like, no, don't do that. That's a horrible idea. What you need to do is leverage for what it is and create a way to have a service that has those child services. So when he needs to spin out and do that, it spins it out and gos it across the whole cluster, like, oh, I get it now. Well, I mean, they're still in the process of getting to it because they had to refactor, their application to get there. But now they're actually leveraging the cluster for what it was. It's no longer just one VM if you will, it's now an actual like clustered application. There's also the challenge of load balancing, right where you have a built in load balancer inside of Kubernetes and Openshift. And with that, you might not need that F five anymore because you're going to use the ingress in the way that the networking is done. So if you have that, that hardware sitting in your data center, you're gonna have to have some real conversations around this. So keep that in mind. So wait, isn't automation good here. Now, oop, there we go. I'll move out of the way so you can see it. And why is everything so complicated? Well, I I rebut by saying it's probably always been this complicated. You just probably haven't noticed how the complication you've probably had a enterprise engineer or architect who actually knows how everything is done and kept that visibility minimal. But now that you're breaking things out to micro services, now you're actually seeing the complexity of your application. And yes, of course, automation is good here. Yes, I mean, humans are error prone. So you're gonna absolutely need to build that pipeline and to be able to do that work, you need to take the human error out of that complication. A great friend of mine said this as I was talking about the um this presentation and he really did say this, which was like when you have a uh um monolithic app, you have an ordinary bo master. But as you move to the, the uh cloud native micro services based architecture, you now have 13 yipping Chihuahuas. They're both dogs, you both have to care and feed for them, but you have to deal with like walking one bull massive instead of 13 Ying Chihuahuas at the same time having 13 yapping Chihuahuas, you'll be able to just take more care of one smaller dog which believe it or not is less overhead when you are, when you start thinking about it, it's a great visual representation of it. You take it one step farther and I stole this from a good friend of mine, Ken who stole it from someone else who stole it from someone else. And if something does go wrong, you need to really understand that it does become a murder mystery. You need to take a moment and think about that no longer. Unless you have really good aggregated log monitoring, you'll have no way to be able to understand what something went, where something went wrong. You'll have to be Sherlock Holmes digging through the logs to understand where the different services happened. So you will have to create a standardized way, standardized contracts between your applications or your micro services to be able to talk to one another. And this is challenging. It becomes a huge cultural change inside of auto companies. I mentioned the CCB earlier and then here's some questions you should really ask yourself about the cultural shift that's going to happen because you will change your, your culture, the CCB. When I, when I first saw it at this one Asgar labs, it really was something like something out of um the Phoenix project. If you ever read that book, people stopped coming at one point because it was just useless. Was moving to cloud native. You naturally start allowing for self orchestration and rollouts. You really do start empowering the the different teams to be successful and eventually you will build that pipeline and yes, you will, as I say, build that pipeline. And I've said this is the third time now because you need to trust C inc D, you'll need to leverage the standards of linting and always make sure that there's standardization for your code. One reason why go is so easy to read is go, came along stand a standard outside the box with a GO format command. So imagine at 3 a.m. when you have a bunch of micro services, things going wrong and you got woken up and having to deal with it because of the GO format command and everything. Now looking the exact same the engineer for us to sit there or the operations person or SRE or whatever, they can actually read it and know without having to leverage that cognitive overhead of where that semicolon or that, that curly brace is they can just read the code like a book that is so important for when that murder mystery happens. So you leverage pipelines to enforce these policies and shared contracts. Yes, people are going to argue about tabs and spaces or it's the same thing with emacs and V I. But honestly, when it comes down to your business, you create a standard, you stick to it and you will only see ro I in the long term, you have to learn to collaborate with the other teams too. The hardest thing I saw as our labs deal with was the actual collaboration between the teams. They had some great propaganda around having scrum teams and tribes and whatnot, but people still want to do things. The old way. Collaboration isn't just about status meetings. It's more than that. It's really truly creating declared contracts and responsibilities with a constant communication between teams geo tickets will only get you so far. One of the most successful things as our labs did was that every sprint? They switched out one person from one tribe to another for the portion of that global app. This took a lot of buy in from executives above. But imagine every two weeks you had a brand new person on your team who had to know how to run part of your application before you know it, tribal knowledge doesn't exist anymore because you know that Jane Doe and and John Doe come over and you have to train them and they have to be useful within two weeks because they'll be gone. And then all of a sudden they know that turns out that shared contract with that team over there turns out this person's really good at XY and Z. So then it builds better cohesion between the different words. Collaboration is unbelievably powerful. I thought that you could just buy one product and call it a day when it came to visibility and monitoring and any any talk, you need to really mention this because there's a lot of companies out there. I have friends who work at these companies too, but honestly, NAOS is just not going to cut it anymore. When you start moving into the cloud native ecosystem, you're gonna need to have different slices of, of visibility and monitoring because different teams are going to care about different things. You're not going to just have 11 size fits all as badly as Agar labs wanted that single pane of glass. It's unrealistic. There's just too many moving parts. It's a huge cultural shift in one of the agar labs companies had but, and they're still dealing with this, but you will have to spend some time and effort with that and to recognize also that we actually have to pay for the economics of this. The opic yes, will now go go up, you will have to pay most of this by a credit card. CFO S go back and forth about these things because some love it because they is assuming your team can, can control of the work and you could control good control of your spend. It's very predictable and the, the costs are easy to project. But on the flip side, some CFO S hate this stuff because it's really hard to depreciate or it's impossible to depreciate. Um It has to be Capex. So those data centers and the hardware they used to buy, there's some interesting economics out there with, with um with sorry uh accounting practices that allow for depreciation, it turns some really interesting stories around. So hopefully your management team at least acknowledges this and wants to spend time to talk through these, some of these problems. So, hey JJ, what do you mean all our supporters on stack over for now? Well, honestly, a few places is Yeah, it is. Um But there are companies out there IBM Cloud that leverage open source and have offerings for some of these things. But yes, if you're gonna um wear on top of it, you're gonna have to be part of the community, you're gonna have to spend time in the open source community to, to understand where it's coming and what's doing and you know, you'll be able to uh be successful that way. But if you do want enterprise ready, Tti openshift is a great offering. I had to say that. So let's talk about some really tangible things at the very end of this talk to make sure that you understand where you can get going from the, from the from the get go. There's a ton of technology out there to help you get going. The best thing is really to just take a moment and figure out when you containerize your app, did you really need to or did you just wrap what? Wrap your app, your app in a pod and wash your hands of it? Have a large on conversation on why you did this. Because honestly, if it's just because you're being left behind, that's not a good reason to, it's good to be in the black. It's not good to be in the red or is it because you thought you could have some software to make your, your, your business move forward? That's great. Have a larger conversation about it, but don't just do it because it's what they're cool. And kids are doing nowadays, ideally, with masking all these corporations, I've had exposure to as, as labs. I've helped highlight a few of the consistent issues I've seen which none of it sometimes is just having conversations on why we're doing this technology. The best thing I can do is ask if you really need to and if you're really committed or if you've already started down this path, you should probably take a beat and look for optimizations instead of features, which is probably what you have to do because you have to start learning how to use micro, uh build out micro services and whatnot. But remember the more you pay up front, the more you do your homework and use the correct tool for the job, the better you'll get to quote a great friend of mine and I'll make myself small here so you can see his name, Thomas Kate. You wouldn't use a saw when you needed a hammer or you wouldn't use a hammer when you needed a saw, right? And it's true. Take a moment to think about that. You can use a saw, it's a hammer and a nail. It's gonna take you some time. It'll be weird but it'll work and you can use a hammer. If you need to break a piece of saw, a piece of wood apart, it's gonna be weird but it'll work. So take a moment and, and recognize using the correct tool for the job is the best, best thing you could do. And thank you. Um My name is JJ Agar and again, I'm a developer advocate for the IBM cloud. Let's see if I can make myself big again. Uh There we go. Um And thank you. Uh You're more than welcome to reach me at JJ on Twitter or awesome at IBM dot com. And I hope you learned something. Take it easy.
---
