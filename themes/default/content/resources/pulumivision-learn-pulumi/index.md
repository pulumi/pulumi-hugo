---
preview_image:
hero:
  image: /icons/containers.svg
  title: "PulumiVision - Learn Pulumi"
title: "PulumiVision - Learn Pulumi"
meta_desc: |
    Matt Stratton will walk through the first module on Learn Pulumi and answer questions live!
url_slug: pulumivision-learn-pulumi
featured: false
pre_recorded: true
pulumi_tv: false
unlisted: false
gated: false
type: webinars
external: false
no_getting_started: true
block_external_search_index: false
main:
  title: "PulumiVision - Learn Pulumi"
  description: |
    Matt Stratton will walk through the first module on Learn Pulumi and answer questions live!
  sortable_date: 2021-11-12T09:03:17Z
  youtube_url: https://www.youtube.com/embed/DvwtmPYqVeM
transcript: |
    Well. All right, here we are. It's time for another week of some Pulumi live streaming for the show that we're still working on a name for. But maybe it's called Pulumi Portions. Maybe it's called Pulumi TV. Maybe it's called Infrastructure is video. I think. Uh today I called it Pulumi TV, but we're still working on that. So let me know what you think um As that goes and we've got uh nobody's, nobody's really joining us. So I think I'm gonna take a minute to do a little twittering um to let people know what's going on there. Let's turn that off there. And I, I did send in that and let's see. Uh let's tweet from the brand account. So um uh here we go. OK. Let's go ahead and use the power of having the ability to tweet from the brand account where that goes. So we just sent in a good little fun there. All right. So let's get ourselves happening. Hey, someone's here. What up there we go. Hey, OK, we can start doing some stuff. So here's what's going on. Um We just launched this week, all new content at Pulumi dot com slash learn. And what I wanted to do today is kind of go through that first topic, uh which is Pulumi fundamental. So again, if you're, if you're Pulumi expert, you're this might uh be review for you. But also this will be just kind of some, some fun times to go through that and see what, what we think of it. This is also me going through the content for maybe the first time since it launched, I was uh supposed to review it for my colleague, Laura and I didn't review the most recent. But if you do go to a lot, it's really hard to read. Uh I'll put the link in the chat um be a little bit easier to, to see what's going on there. But yeah, this is where this is where we'll be working from. So what we did with this new Pulumi content. So we already have, you know, some tutorials. We already have lots and lots of stuff, but learn is just more of the beginnings of our learn path as you go through. So the first one and we'll be uh if you were to go to Pulumi dot com slash learn, you'll see. We have the Pulumi Fundamentals, which is what we're gonna do today. Um But then the next one, which is what I'm gonna do. Um next week, the same time, next week, I'm gonna go through building with Pulumi where we talk about more complex configurations, multiple environments uh and, and a bunch of other fun stuff. Um Not that today isn't fun, but what we're gonna do with uh what we're doing in Pulumi fundamentals is we um let's see, what does it say here, learn how to use Pulumi to build configure and deploy a real life modern application. This is we're gonna be using the uh Boba, the Pulumi Boba T Shop app and this is going to be a, it has a front end, has a back end and a database and the couple of things that um this goes, this is all very Docker focused. Um But if you uh again, if you want to kind of come along for the ride, I put the link in the chat and a couple of things. So if you wanted to do this tutorial, this is what we kind of assume, right? So we assume you need a Pulumi account and a token and you need to have Docker, we're gonna be using Docker for this and we're gonna, this, this is written in, in Python. But remember you can, you can kind of do this ploy stuff in, in whichever of languages you like. This one just happens to be Python. Um So this is using the Pulumi Boba T Shop and it's a progressive web app. So PW A built on the me stack. So which is Mango express a reactant node. Um This is, you know, kind of how some people write some apps so it seems reasonable and it has a front end client, it has a back end rest server and then a Mango DB instance that stores our product data. That's what we're, that's what we're doing with, with this app. And this is as you kind of go through this path. Uh what we're gonna do, it says we're using plum to crater infrastructure, configure that infrastructure and push that infrastructure to production. OK. Uh And again, we're using Docker here. Part of the reason we do that in this case is that it's uh you know, you don't, you don't have to have cloud credentials and stuff to, to be able to, to build with this to kind of go through this. And this is uh so what you will be able to do after we're done here, be able to, you know how to create projects and configure and provision our, our infrastructure. So um it all boils down to everything we do in Pulumi is organized, our infrastructure is all organized as a project and this project is a Pulumi program, right? In programming language that if you run it declares what is this desired state we want our infrastructure to be. Uh And then we want Pulumi to manage and then we have these things called stacks which are in isolated, independently configurable instances of that program. Um Stacks are a thing if you want to know more about them. Tune in next week because that's when we're gonna dig into that. And so we're gonna go ahead and let's see enough of just my face to bring up my, uh, code window here. And the first thing is again, as we said, like every Pulumi program, um, lives in its own directory. So we should have one of those. So we'll call this one and I first app for, I would just call it my, let's do this Boba shop because I might have a conflict. We swing into there there. Look, we created a Pulumi Pro uh project. It's that easy. It's, but um blooming program is this directory with a bunch of files in it. So, uh the platypus is blocking the view of me. That's the platypus is the pluming puss is definitely better looking than I am. Um But I think how do I have that set up? Um If we did wanna, this is, this is me. This is also like fun, fun re stream live, whatever we do it like this. See then now you see way too much of me. Nobody wants that one. Maybe this is the view that we want. Um I feel like this is a little bit easier to see the code. Maybe we'll just turn off. Uh There we go there. See, overlay on overlay off. This is a streaming show now. OK, cool. Um You're gonna bring back the Pulumi push. All right. Anyway, we want to go ahead and again, all this is, is this directory with a bunch of files in it. However, uh you know what I, the more I think about it, the more I think this is actually the better view. There we go. Ok? Uh We uh it's not gonna, gonna block as much stuff that way anyway, fun thing. So uh we can use the ploy new uh command which is gonna prepopulate it with all the scaffolding we need. So we're gonna go ahead and say, you know, there we go even better. So what we did here is when we said Pulumi uh New Python. So it's going ahead and scaffolding out all the stuff that we need inside this my Boba tea shop app to write a Pulumi program in Python. OK. Awesome. Right. Fun. Fun, fun stuff. Also, let me tell you how much I love Python. That was being a little sarcastic. I Python is probably the only which I know the least. But that's what, what, what Laura wrote this tutorial in. So that's why we're gonna do it. So it'll be fun. My teammates are both much more Python than me. Um But it's OK because I could just go and do this whole thing in, in typescript or go. But part of this is that I wanna go through this content uh and guess who's gonna be going and rewrite and adding in the other languages later. Probably me. Um What is this. Ok. And, ok. Uh It's also entirely possible that my entire Python set up on my laptop here is completely jacked. But uh we will find out does Pulumi do anything with Dockers. We are absolutely gonna be doing Docker stuff. That's in fact exactly what uh this lab is gonna be. We are gonna be creating some Docker images in just a second as soon as I get um this uh this stuff installed. Why is this doing that? It's funny because I've been doing a bunch of Python workshops and presenting them, but I've been doing it all in Git pod. So I don't even know what state Python is on my machine right now, but it should be able to, oh, I don't know why it's taking so long to build GRP Cio your GRP Cio. The, the, the way you specify the, the OK. Come on Python. By the way, this is definitely much more of a situation of, I don't use my laptop for Python. And I also think that I did have a weird thing before. Let me look at my oops, what I meant to do uh At one point was something I was doing because of this GRP Cio situation that I thought they fixed. Um Let's see, but we're gonna, I had something. Um Let's source my ZZHS DH. OK. Let's go ahead and um OK. So this is empty now. Yep. And then let's go ahead and run that. Again. Oh. Oh, this happened to me before. Ok. This is, wow. Yes. Uh We will be talking a little bit about where the SASS comes in. The, I'm not really demoing like the deep features, but we are using the Sass as our state back end. Um, ok, let's see if it's able to build GRP Cio better this time. This looks a lot more promising. No, no, this is, this is where I got stock last time for the record. If you're curious, the reason that I had the weird problem that I had before or at least what I was trying to undo is uh GRP Cio had some weirdness on Apple Silicon, which is what I'm running and there were a couple environment variables you had to set in order for it to build proper. Um OK, while we're talking about it, what are the deep features in the Sass? So if you really want to, if we kind of want to think about that for a second, um What the Sass is doing is in uh with Pulumi, we have to have a place to store the state, right? So you can store the state in a bunch of different places. You could put an S3 bucket, put in blob storage, put local file store, whatever, um or you can use a plume sa So just for storing state that is our uh you know, if that's at the app dot Pulumi dot com. Um and that's, that's, that's free for you. No big deal. The difference is where um it kind of comes in to some of the, the features that might um come in is it has to do with your uh uh sorry, I'm still just frustrated by GRP Cio um uh if you are, excuse me. Um So what you're gonna get is you have uh it's uh built into the SASS that's free for individuals, right? Is you have state and secret management. Um And all your integrations if you want to use our team features, which are free to start, but then it just uh depends on um how much you're using this, lets you have up to 25 members on your team and it gives you uh lets you run concurrent updates and you can throw some web hooks in there. And then if you uh the more advanced features include um your role based access control and uh and also even potentially self hosting if, if those uh things have to go into play. But if you're gonna talk about um being able to create uh gated deployments also, right? So if you want to use our cross guard feature for the policy as code that's in the enterprise, if you want to be able to have or I organization wide policies or have a server side uh piece and then um using Sam L or SSO is on the enterprise stuff. So that's all if you actually go to Pulumi dot com slash pricing. All that stuff is listed there. I am really trying to figure out why this is not wanting to build, this is getting uh This is, this is not a great experience um for you who are having to watch me troubleshoot my Python issues right now. Um I'm gonna maybe phone a friend in just a second and see if that. I'm gonna see if I can get Laura to join because she might be able to um help us walk through stuff. Uh I uh definitely apologize but this is part of the fun of um live stream. Why is this so fussy and building this particular part? All right. So the problem is this has really got me just stuck right at the beginning and again, back to my usual thing of that. I don't really know Python. So I don't know. 00 There we go. That just took a right. Did it or no, that just, no, that was just me clicking, sorry, false alarm. Uh Laura is gonna be joining us. So worst case is maybe we could twist her arm into having her, share her screen while I talk, but welcome to Python troubleshooting. Um because this is, this is actually Python troubleshooting. I still assume this is something to do with this Apple Silicon because why would um Yeah. Mhm mhm All right. Sorry for the dead air here. I'm just trying to look to see if there's anything. Oh, there it goes. Wow. That just took quite some time just in time for Laura to join. But, hey, Laura, do you want to come hang out with us anyway? Sure. Hi. So, um, if you want to hang out, Laura, that's awesome. Uh What happened? Just because you just joined is, it took about a million years to build GRP Cio to the point that I thought there was something wrong and uh troubleshooted. And of course, the second that you joined the stream, it, it started to work uh magic. That's you. Are, you are. OK. So yeah, we are going through. Yes. Yes. Laura, so Laura, Laura, this is also everybody gives some good claps. Laura for launching Learn Me this week. Um Which is what we're actually going through. So um yeah. Uh Cool. All right. So we were just uh here we go. We're continuing along. All right, cool. So if we go take a look at what just got created basically, this main dot Pie is our Pulumi program. Um Oh my God. Are you kidding me? Visual studio code needs to be updated or what? I'm, I'm can I just be done with computers for the day? Can we just, can we just start it all over again? Let's talk about Battlestar Galactica. I recorded two hours of video yesterday with my microphone disconnected. It was great. It was a good rehearsal. It was perfect. Thank you. Oh, thanks. So, uh all right. So now that we're in, we're going to actually start writing something in our Pulumi program here and we're gonna create some darker images as sure what it looks like is what we're gonna do. So we're gonna create a Pulumi resource and the resources are all of our building blocks of, all of our infrastructure that happens, but we just lost a ton of viewers. Um But that's ok because I wouldn't have been watching either uh for the last 15 minutes of me, but it's ok. People will come back. We're good. You can as long as they're not running away because I'm on here. No, no, no, I, I um ok. So the first thing that we are gonna do is um our resources that we're gonna build and someone had asked, uh Felix had asked us that we're gonna be doing Docker and we actually are. So the resources we're gonna be doing are Docker containers and images. The resource provider we're using is Docker and Python is our language. And again, we're using Docker because it makes it a lot easier to set this, this stuff up. Um Where, where these, these pieces come in. So that's, but you would probably likely be using one of the major cloud providers or Kubernetes or something like that. So, inside our directory here, we are gonna create the um my uh we're gonna create an app directory. Ok. We're gonna go into there and inside of here, we are gonna pull down the code that the Boba Tea Shop app does. So we're gonna clone that into there and then we are going to um bop it up a level. So we're just gonna move that directory up there. So now if we look, we can see we have our back end and data and all of our front end. So if we were to go take a look at the back end Docker file, um we can kind of see what it's gonna do, right? So this is taking the rest back end uh into the Docker file system, installing our depths. And if you know it's saying exposed port 3000 on my host machine, which I sure as heck hope is open. Uh or else, you know, we're gonna have a port conflict problem, but it's ok. Let's find out what happens. Cool. So now we need to use the provider. We're using Docker in, in here. So let's, where am I? Yeah, I'm in the right place and we want uh since we're using Python, we need to install the ploy docker provider. And as I understand from my friends who know Python better than Iak a Laura and everybody else who's ever touched. Python knows Python better than I um we want to uh use a virtual environment or a V. Is that how do you say or do you say VN? How do you what's the right way. I do VM for sure. Yeah. Um But I mean, it's virtual for me. So virtual because I use, I use other tools versus VM, which is like the VM is the built in, but, you know, is my favorite right now. So it makes me sound like I know what I'm doing. Uh Well, don't necessarily trust that. I know how I think so. So we're gonna activate it right? So now that it's activated, that means all of these Python things we're doing are happening in the virtual environment, not on my crappy uh jacked up Python environment. That is my machine, right? So now we're so what we don't want to do is we wanna install Docker, the Pulumi Docker provider because we don't want it. We want to sell in the virtual environment, not just on Matt's laptop, right? That's why we, that happened when we activated the, the VN virtual and think, think of it as that virtual environment is like a fresh install of Python on your own tiny little machine. That's kind of how you can think about it. It's almost like an environment that is virtual. You might say, I know it's amazing how that works. Cool. OK. So uh so installed that package and it also threw that into the um where the hell did it go? The requirements that did it? Whoa What did oh no, it's in the Venz Wait, what did you, what, what just happened. I add the package. Oh, am I supposed to add that to the? It's a good idea always to add it to your requirements dot text. So if you have to get interrupted in the middle and you need to reinstall your requirements, you want to put the, put the package there because then all you have to do is just to pip install dash R requirements dot text and just like that like no, no version or anything. I wouldn't put any version on this one. Yeah, you got it. Did you save it? I just did. Yes. Ok, good. We've had that problem before. Ok, cool. So if we go back into our main dot Pie, um what's the, what's the Python way to refer to these double underscores or whatever or do you just not pronounce? So I call it. So it's Duma Dunder is how I was taught how to pronounce it. So you hear me? Do Duma Dunder um or uh it depends on, depends on the person, but that's how my old school Python teacher taught. This is such a wonderful program. All right, cool. All right. So we have kind of, no, I get it. I get it. It's like Mifflin, right? No, it's great. Fantastic. Cool. Ok. So we want to, we need to use our packages. So we're gonna use the ox package, right? We already have Pulumi imported and then we're gonna impro i impro things a lot Um, Docker as Docker. Ah, where does the Pulumi name come from? Um, I honestly now want to know if, you know, because, I don't know, I haven't heard the story yet because I never got a chance to have my one on one with the CEO started. So, yeah, it's, I, I, I'm misremembering where, where it comes from, um, is something to do with sweeping, I think. Um, I don't know. Does it mean broom in, in a language, I think, but I don't think it, I don't think there's like a, a really idiomatic idioma. Yeah. So yeah, see, maybe, maybe you can see what you can find on the back end while, while we're, while we're putting this in because that's, that's the thing that we should come up with something. Yes. Update manage for me. I don't know, I'm making it up as I go. OK. So what we're gonna do here is we're gonna, you know, we're OK. So we say we're gonna Pulumi get stack and uh this is because we want to know what stack we're operating inside of. Um And, and we're gonna use this variable later and then we're also going to now build our backend image. So the back end image name is very cleverly called back end instead of like, you know, yes, it's B broom in Hawaii. That was I, I knew it was something to do with Broome. Um So if we go ahead and create this and then we say the back end is going to be a uh docker dot image. Um oh by the way, I should turn off copilot because copilot actually uh just turn it off right now uh actually works fairly well with Pulumi I've discovered. Um But we're not assuming that. OK. So if I go in here and I say darker image back end, why did it not see this is I just don't like any of this. I don't understand why it's not auto. I know you, you don't even use visual studio code. So submit, like know my indentation that I'm trying to do when I hit the carriage turn. Um No, you don't need to watch me type. We're just gonna look at what it's doing. OK. So we, we're basically saying um it's to use that the context is in the app backend directory, Laura, you're, if you were talking, you're muted, you're still muted. Did you forget to turn your mic back on? I did. Um Oh OK. This is why we use the stack variable because the image name we want it referring to the stack, whether it's DEV or prod or whatnot and we are skipping the push um because we don't actually want to push this to a registry, we're just gonna use it where this, where this comes in. So that's cool. So this gives us a Docker image uh for the back end that's pulled that's built from that Docker file. Um Why does this not uh coming in? Oh Because it's in the end, it's not in my regular. I remember this. So you need to change, you need to change the interpreter that it's using. So I think that's down to, I don't, I don't really know vis visual code, but yes, that one. So uh you want to change it to the actual virtual that you're using. So I know where it is in Pie charm. I just can't tell you where it is in there. Um If you wanted to push to a private registry, that's a really great question. Um I believe and let me, let me look it up while we're talking. There is a flag in it or a um uh value that you can pass in um to actually do that with our Docker provider. Uh Pulumi Docker. Yeah, I have the extension. I remember this is sort of just a, I think a cheater way that uh we have done in the past is that I would install Pulumi Docker just in my local machine. And that way visual studio code knows what to do with it because again, I don't, I don't know how to tell it. Like I can set language mode, but it's still um let's see. So there is a registry flag and there's a credentials. So if you actually, if you're wanting to push to a private registry, um if you go to the Pulumi registry, which has all the information on the doctor provider itself. Um There is some image registry arguments that you would be passing in that have um the various information about uh credentials that you need to pass in the, what the URL is, et cetera pieces like that. So that's where you would find that. Um So I don't have the specific call out. I also don't have access to the comments. So, but if you go to Pulumi dot com slash registry slash packages slash docker, uh you'll be able to get to the API docs from there. It won't, it won't let you type in the chat. Laura. No, because I'm a guest. Oh, but that's dumb. I guess it makes sense. I guess it makes sense because otherwise it looks like you're me. So um got it. I can impersonate Maddie. So many things I could do, but I'll be good. OK when you're ready to deploy. OK? I'm just trying to read what it says about how to use virtual environments in VS code. Um This is more complicated than I wanted it to be. So, but this would explain why certain things aren't working. OK? So we're also gonna build our front. So we got our backend image. Cool, cool. You do our front and image, which looks very similar, right? Except it's the other one. And then finally we're gonna do our mango one which is uh we're doing this a little bit differently because we're not building it locally, we're doing a remote image, right? So we're saying just go pull down the actual Mango bionic version. We don't actually have to build that because we are not working at Mango DB. We are working at the Boba tea shop and you'll notice that we don't actually provide a registry URL. It's because it automatically assumes that you're going to Docker Hub. So that's why you're seeing this. If you were doing something different, there's, I believe another flag you can put in to say where you're getting it from the packages. So now, um, we are going to go ahead and run our Pulumi up which remember the first thing that it's gonna do is it's gonna do a preview, right? Like, um, oh, what, what did I do? Slow down? I know I was, I was going back up to the top of the stack, I guess. Let's see. Do so it's having issues with the back end. Let's see. The back end something, something's up. Do you, did you actually remember to clone down the app directory? Do you have an app directory? There's the doctor file? Ok, good. So it is there. That's good. Oh, this is just not giving us a great, great error. Yeah, the error is a little weird on this. One is not compatible with Matt. That's, this is a problem. Um, ok. Well, you have, do you have Docker running? Oh, no. Probably not. Uh, I, because I always turn Docker off because, yeah, the same thing, I think you're 100%. Right. It's probably because I don't have Docker in my, I used to but then when I switch to this M one, I just don't have the ram that I used to. So, letting Docker just sit there hanging out, using up my memory. Um, ok. Well, that, that is 100% the problem. Um, it was trying to do a Dockery thing and of course it could not because there is no Docker running. Um, and it's still coming up. So, did you do, do we do a? Hm, I'm just sort of going through the tutorial now. Um, we kind of just sort of say like do pull me up but we don't even say what it is. What Pulumi Up is actually doing. Yeah, it just says now run Pulumi up and then it says in the future you don't need to do this. Oh, no, it did, it did. I, I missed, I missed the first one. Yeah. Sorry, sorry, this was me skipping around. Ok, Docker is back up. So again what Pulumi Up is gonna do here? Um, yeah, you're right. Um, oh, resource failed, failed with exit code one sending. Yeah. So it's still not happy about, oh, Docker is still coming up. Geez Louise Docker. You're taking your sweet time, aren't you? I thought it was up. Um, it's probably because it wants me to update. I bet. I guarantee it's complaining because my doctors out date. So, one thing to know is, um, yes, the last two lines do pretty much say what's going on. One thing to know is that the Python errors with Pulumi are not as clear as you might see with like typescript stuff like that. Um, I think I got into a discussion with one of our folks about why that is and I think it's about typing. Um I'm not exactly 100% sure why, but you may have a little bit more parsing mentally to do with the Python error than with like, say if you're used to type script or javascript. So just something to know. Um It's not really a problem with Python in general. It's just, that's how Python is. So uh always fun. Yeah. Yeah. No, it, it just took forever for, for a doctor to come up on my machine. So, yeah, and this does look like nothing's happening. Don't panic. Uh I was about to Docker. Docker takes a little while to show things and it doesn't actually uh it's not very verbose on, on uh Pulumi or in general really when you're trying to build uh an image. So um Python is also extremely verbose api wise compared to all the other languages. Is that just a Python thing? Um Can you give me an example? Like, I guess I, I don't know, Python to me is it, it gives a lot more context when you're doing things, but it also might give you a little too much sometimes because it's digging down into the code. I think that that error stack, the error tracing and the error stack itself is very much a um a holdover from c uh since most Python implementations are built on top of C. If you looked at like um a Java built, it's gonna have a lot of the same really long error traces. Uh But all these something arcs with other languages just have the value inferred. So, uh Python has this thing about being explicit versus implicit. Uh If you've ever read the Zen of Python, which is Pep 20 I think. Um It, it kind of tells you a little bit about the mental picture that you're getting of um how to think through a Python program and how to think through how Python works as a language. So, in general, it says we'd rather be explicit on what's going on versus implicit. And the reason for that is that we end up with less errors mentally when we're trying to do things quickly. So, um that's, that's how I was always taught it. But if somebody else has a, has a different take on it, that'd be great. Um But that's my personal. Why does this take so long? Like I, this could be something jacked up in my Docker though too because last time I was using Docker was trying to work on this content in a different module. And so there those images might be all squarely but you didn't destroy. No, the, the, well, the images were probably still around just that the containers that there's no containers aren't running well, but the images are considered a resource. So it should have done a plumy destroy to clean it out. Now, you might have some intermediate container images that um that, that do it. Yeah. Um Yeah. So the one thing I've noticed about the Docker resource provider with Pulumi is that for a reason that I don't 100% understand it doesn't really show as much of what's going on, but there's a lot of layers to this image. Uh Oh Yeah, you have quite a few. Yeah. And look at, look at all this six weeks ago. I remember when we were doing all this. Yeah, you have a second front. Yeah, it's still building. You're, you're, it's, it's doing OK. It does take a little bit. I think we actually put that in there as a note um at some point in the actual learn docs. Uh I have all the local host stuff up. Let me just check here. Yeah. It probably is just trying to keep things clean um in answer to the chat. But I don't know, I, I like having verbose things. Obviously, I like Python and therefore it doesn't bother me that it's so verbose. Um But mostly because I wanna see it working. Uh If there's a usual do error, error code zero. Yeah, you won't get anything in this case. You will, you will still get an error, it will give you the error at the end, but it doesn't show you all the layers building uh for the actual container. So i it's, it's something that I think maybe might get improved in the future or maybe, oh, there we go. OK. We are screwing around enough that things happened. OK? So also this is kind of a fun thing I've noticed is the preview. Really likes to talk about being verbose. This is the, the, the, the doc, this is all from the Pulumi preview is it has to show you all the stuff that Docker wanted to do. If you noticed that Laura, that's super fun. Right. Right. This is, we normally would have this, but it throws all this war all these warnings in because they're considered diagnostics. Yeah. And so the the warnings are that you're doing it locally, you're not pulling down from somewhere else. So that's what this whole layer is, but it does give you all the details, which is kind of nice. Um Only problem is now when you actually build it, it's gonna do the whole thing all over again. So this is why normally I'll use a dash Y flag it right the first couple of times it's worth doing once and it is a bit too much. I don't know, like it tells you all of the stuff that goes underneath and this is not just if you're running it on Python, this is also if you're running it on like typescript, if you were doing this with typescript instead of that, that's just the resource itself. So, OK. All right. OK. So we got our doctors up there now. So we've created our images and we want a provision um with the network, with the containers. So we're gonna add some configuration, right? So we can configure in infrastructure, which means we can configure all our different stacks and our stacks are different instances, right? Excuse me. So we are going to go back into our uh program and after our imports, we're gonna say these are the things that are configurable. Oops, these are the things that are configurable. So we're creating the object, the configure object that is a Pulumi configure object. And we're saying you need to set the port, the front end is using the port, the back end is using and the port that the mole port is using. So if we were to run a uh Pulumi up now with this change that we just made, it's not gonna be very happy because it's gonna say um excuse me, you told me uh that these were required and they aren't here. So you can just get out right now. Um So we wanna go ahead and set those and then we can do these in a couple of different ways. In this case, we're gonna do it with the command. We set these Pulumi config which will then go ahead and create our uh configuration file for the stack that we're in this Pulumi dot dev dot Yaml. Um These because they're not, secrets are not encrypted. You could have done this by hand if writing Yaml by hand is a thing that you enjoy doing. Um So now if we were to go ahead and plu me up and I'm gonna do a dash Y like Laura recommended just because we don't need the preview. The dash Y just means skip the preview, just go ahead and YOLO that right in. OK. Now we've set those things but we didn't do anything with it. So that's not too interesting. So let's actually do some stuff. So um we are gonna go ahead and we need to create a network and it's a docker network and we're gonna name it again after our stack. Um I like to believe that all things uh all the times we refer to stacks in Pulumi, we're actually doing that as a shout out to Paul stack, who is one of our engineering leads, but I'm sure he's tired of hearing that. And now we want to um after we've created the uh actually, I should have probably, we're gonna put these, put this after our images, there's no dependency put from one to the other, but just sort of thinking about things, we're gonna create our container for the back end and where this is kind of interesting with the stuff we were just talking about um is that um we're uh we're using this image that we've already created and you'll also see we've set a couple of variables that we haven't uh done anything with yet. And um those are the mango host, the database and the uh so we're gonna go ahead and set those variables again, set those config items, those have been set. Um Don't we need to laura we, we may have set them but they aren't being read by anything. 00 Wait a minute, never mind. That's the exact next thing I was about to do. Got it. Sorry. OK? Cool. So to my point, we, these are more configuration variables that we now need to have. So we're setting the um mango host and all this. OK? And then we uh so we have our back end container. Let's go ahead and do our front end container, but also our Margo container and we're pulling up all of our pieces, everything's put together and this ends with our, so if we were to go ahead and, and I see the question in the chat just one second if we do a blu me up here again. All right, working with Docker. One thing I appreciate is I can name my image using a name I can recognize. Um So, I mean, that sort of thing, you can name it whatever you and you can override the um the um so when you're setting the name of the image, I, we are in this particular case, uh Well, you have, we are doing that right there. See how that's, I think this is sort of referring back to, to your point, right? We're naming it in this case according to the the stack. Yeah. So I, I think the question really is like, how, how do you, so for people who can't see the comment, um how do you avoid having Pulumi overwrite images so that you can go back to an older image that you know, actually works? Um Yeah. And so to me that's, that's really that tag at the end because you can always go back in your tags. Um So in this case, I probably would look for like a latest tag and then have it every time update with the latest tag. Uh Not everybody wants to stick with the latest tag. So I probably would name it, you know, like a do an increment plus one to the previous tag or something like that. Um To always make sure that you're getting a, a fresh tag on the image and you can always call back to an older tag on your Docker image. So um that's how I personally would do it. Maddie. I don't know if you have a, a way you would rather do that or is something broken. And I need to take a look at the code right now. No, it's something in the order that I did stuff. So we did the Mogo image, we do the network. Uh oh Mago container needs to happen before front end container before all these are the ones the, the way that you have it. So this is something to maybe think about for the um should be the first one that's created. I know, but I don't think it did. I did, I mess up the order in there somewhere. I'm like, oh no, it does. It, I just didn't read it. You do seem to put it ahead of there. OK. So, but yeah, so the reason that was happening if you're following along um is that um the backend container refers back to Mago container, which hadn't been created yet. So cool. Let's go ahead and run that. Um And then we, we do have one more question in the chat. So OK, can I tell it somehow do your docker stuff but don't build if it's already there. So generally resources will only update in place if there's been an update to the actual resource. So for example, um I was just building a whole bunch of stuff on GCP compute and when you have your instances are running and I have a new instance, template, it only changes the instance template. It might not actually update the instances unless I tell it to. Um or, but then I also had like a sub net and a network and things like that. It didn't touch those resources because there wasn't anything changed on them. Docker. On the other hand, I'm not sure. And Maddie, you might know this better than me. I don't know. I think every time you call Pulumi up with anything that has a Docker image, the image gets rebuilt, doesn't it? Or does the image not get rebuilt unless you change it? I don't know if it's considered a change is what I'm trying to remember. Yeah, I think there's, it definitely seems like it wants to keep changing. That's a pretty good question. Let's, let's see what we can find. We might need to do a little digging, but good question because I think the, the Docker provider is like a little bit strange. I think mostly because of the of Docker itself when it comes to things. This isn't a unique situation just to Pulumi um I think you end up with this with other infrastructure as code tooling and other tools like that, I think. Yeah. OK. Um As we're coming up for kind of our end uh last bit, um we need to populate Mango DB and we want to tell the Yeah, it is relying on the fact that Tucker Cash is so much um, that, uh, we want it to auto poul on our next deploy. So the first thing we're gonna do is just, uh, we want to pull that, uh, products dot JSON file out of there and just bring it up into our main directory so we can do things with it. We're gonna mount it into this sort of seed container that we're just gonna use for this particular and we're gonna mango import that. And this is kind of common when updating databases intermittently, but you would typically wire that up to an API and update it. This way. This is just how we're getting from point A to point B in this tutorial. But you can do this, uh, with plumy just like you would with Docker. So after the backend container, um, but before the front end container, we're gonna add this data seed container, which looks a little bit like this. Let me make this so you can see it a little bit better. And right, we're seeing we're sort of, uh, we're, we're bringing up the mango and uh, we're, we're mounting that and then we're running this mango import against that JSON file is gonna get our stuff into um, our mango. So let's go ahead and gloomy. Let's go ahead and save the file, Maddie. And now let's meet up which it's gonna, you know, have some, some things it wants to do. So there's a question about, um, we use Docker and the API so that does that mean we currently have no intention to support containers and only support Docker. Uh I don't know if you want to talk first about the code itself. I all I was just gonna say is in this case, we are specifically using that resource and that provider, there are other providers. This, this is uh this tutorial only supports doer. It doesn't mean Pulumi only supports Docker is sort of the short part of that. But go ahead and, well, I was wondering if, if you were also talking about like, would we support pod man or, um, oh, I always know it is, uh RKT or rigged, but I don't know what it is. Now. Uh, this is a good question. Uh, this is, this is me not being cleaned up on my doctor from before. So, um, or is it, no, this is that Mango Dev, this, this happened before I think. Oh, no, it's just, yeah, it's just this old, hang on that. That's the reason that happened was again from other stuff I was doing. Yeah. Ok. We'll try this again. Ok. There we go. Yep. Then have that old container hanging around. Ok. Did, did everything go again? All this extra junk in there? The problem with all these, these warnings coming in is that, yeah, see, see, I actually had errors and I didn't see them because it blew this over. Um, why does it not like see, I had this problem before. Laura where like, oh do a Pulumi refresh which refreshes your uh state your, your state of what your system is. Because if you're, what, what will happen is is that if you, um if one of the containers failed to update it will then knock over one of the other containers because they're wired together. Uh So, um because this work flow containers, maybe what options do I have as a DEV or DEV ops to control the deployment of my application. It's so completely reliant on the environment. It's deploying too. Hold on. I gotta read that one again. I re read that question again there. Uh Pulumi does work with CNET. Um It does work with service meshes, things like that. I as a DEV. Hm because this workflow involves creating containers and manipulating containers. What options do I have as a DEV or DEV ops to control deployment of my application? Yeah, I want to take a step back and just sort of be a reminder of we're using a very darker heavy part because this is just sort of introducing some of the concepts in writing the Pulumi code. This is probably not what your Pulumi program would look like because uh does have mechanisms if I deploy to random resources. Um OK. Canary, blue green, et cetera. So OK, I just, I, I just did a video on this that released yesterday about blue green deployments and things like that. So um did it, did it run? Did you want to? No. Um I, I am going to find that video. Oh, ok. Yeah, sure. Um So short version is yes, you can do canaries and blue greens with POY um Long version is it takes a little bit of work to get your code right? To be able to do that. But you can actually split traffic and pardon me, do all of the various things you would do. You have do have to think a little bit about how do I network. So like what, what does my network need to look like? And how do I load balance a little bit? So you have to have a little bit of that understanding to be able to do a canary in a blue green depending on what you're trying to do, but it does actually work. Um And in terms of I just trying to think of any specific features. That's a good question. There's your video that Laura is just talking about. So it's probably a good place to, to start. Um So uh I am yeah, totally falling over because of it still can't fail. It's still having problem deleting that container because it thinks the container isn't there that it wants. I had this problem before. Um hm So I tried the Pulumi refresh although let's just make sure that I didn't again back to like, ok. Yes, refresh. It might not have taken the first time. So see if we'll see if it does. Yes, you don't. Yeah, you, you, you are correct. You don't really have to fight PLU. That's, that's the thing. Ok. So yes, and it's still still having that issue, deleting that contain. Um, we are, we are running low on time. Um, I think we've proven our point. I can't actually show it working but it mostly is, we tried, we got to the point of actually doing it and I will say that learn is gonna have information about deploying the various cloud providers instead with the Boba Tea Shop app. So it's coming. We are and also, uh, if you tune in next week, we will be going through and by we, I mostly me, me until, uh, I have a problem and I tap in Laura again who was like planning to do something completely different this afternoon. So I was like, hey, come jump on the street with me. Um But in this, in that one, we're gonna talk a little bit about different stacks, how the outputs go from each other and uh how secrets uh tran transfer again. But let's go ahead and do a Pulumi destroy and just get 00, tea is not a real thing. Pulumi is in time out hell. Um So yeah, the thing is you sometimes do have to kill but then that's where you're gonna have to do a little bit of an import and export and do a refresh and see the state that you're in. Um the Yeah, it just sort of the question, by the way was just saying sometimes I get a Pulumi up and it gets stuck. So if you do uh because I think if you do control c to interrupt it, now your state is in a weird no pun intended weird state. Um And so that's where your Pulumi refresh or even you could do an import a Pulumi import into a file or sorry Pulumi export into a file and then bring that in. But uh refresh is where you want to get started. And then let me just do a Pulumi stack RM DEV and just clean up after myself. And it's that uh that simple. So yeah, I oh there's that weird. I I will say so other than refresh, the other thing to know is that you can get that universal resource number or unique resource number, the urn which you can find um in, in your cli or if you actually go on to the console, you'll be able to find it there. Um That urn is what you can use to like specifically remove a resource from your state and then reinsert it later. Um So if you like kind of just take it out, then do a plumy refresh, it'll pull the resource back in um in in whatever state it's currently in. So that's another way you can do it. It's not recommended, but I found that actually works. It'll get you where you gotta go. I mean, refresh doesn't do what you needed to do. So, so, well, everybody thank you for joining us in our 2nd, 2nd instance of whatever the heck we're calling this. Uh, we're still sourcing some ideas for our weekly live stream show. But, uh, go ahead and match that subscribe button, uh, either in youtube or in Twitch wherever you are watching us. And we'll be back next week to do a little bit more with uh learn Pulumi. So, and we will also think of a good way to end the show and a good tagline, but right now, I don't think we have one. So see you on the internet.

---
