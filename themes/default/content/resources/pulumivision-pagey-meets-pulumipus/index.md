---
preview_image:
hero:
  image: /icons/containers.svg
  title: "PulumiVision - Pagey meets the Pulumipus"
title: "PulumiVision - Pagey meets the Pulumipus"
meta_desc: |
    Quintessence Anx from PagerDuty and Matty Stratton from Pulumi will be streaming live to talk  Pulumi and PagerDuty can work together! It's not jus...
url_slug: pulumivision-pagey-meets-pulumipus
featured: false
pre_recorded: true
pulumi_tv: false
unlisted: false
gated: false
type: webinars
external: false
no_getting_started: true
block_external_search_index: false
main:
  title: "PulumiVision - Pagey meets the Pulumipus"
  description: |
    Quintessence Anx from PagerDuty and Matty Stratton from Pulumi will be streaming live to talk  Pulumi and PagerDuty can work together! It's not just gonna be coding though - who owns the services? We'll dig into figuring out some good practices for that, and how to use PagerDuty to help once you do!
  sortable_date: 2022-01-28T09:01:47Z
  youtube_url: https://www.youtube.com/embed/arzxtM4PNNc
transcript: |
    We don't really say anything important at the beginning because nobody's here yet. So nobody, nobody's here yet. So we're just talking and you know what, maybe nobody will be here. Um I know to seemed interested in coming to um let's see. Uh oh, interesting today. I learned uh if you go, I was trying to find a tiktok video that I remembered vaguely seeing somewhere and then I just found out that if you go into your tiktok search and go to the filter, oh God, it wouldn't be a stream if there wasn't like an oh no, oh God moment just like right in the beginning also. I see that a Joey and an S Mcallister. I know who you are are saying hi. So hello. Right. Yeah, that's uh hang on one second. Um OK, so let's see. We've got, yeah, I got a couple of people in there. Hey, and you know what? I would totally be fine. Like if this stream is basically just like you and me talking on the video and Joey and Scott in the chat, I mean, for crying a lot, we should just bring Scott into the video. Um we see you there. Yeah, Scott Over on Twitch. So awesome. Uh Yeah. OK. So a little bit as things are catching up and people are joining, um, we are definitely gonna be talking about gloomy and about Pager duty and stuff and part of the reason for anybody who's viewing as, as you're joining, who might be curious about why can talk about this. So I worked at Pager Duty for a while. Um, If you don't know, my name is Mattie. I'm, I'm your host. I'm at uh Pulumi staff developer advocate. I'm, I'm joined today by Quinte who is a developer advocate at Page Duty. Yeah. 11 might say that Quinn replaced me. She didn't, she improved but I left, I left, I left and Hugh joined. So she took my, she took my seat at least. So uh it was a trade, it was a trade up for Pager Duty at least. Um But uh Scott, I work with Scott Mli who's another uh developer advocate at Pager Duty who does a lot of infrastructures code stuff. And I'm so excited that he's, he's here and we're, we're, we're, we're going through our stuff. Um So I thought we would do, we're definitely gonna get into some uh some coding in a little bit and kind of talk about how Pulumi and Page Duty can work together. But given uh that I have thoughts and feelings about service management and all of these things and and Q has lots of those uh thoughts. Um We kind of, yeah, I kind of thought we would talk about like, how do you figure out who maybe like, yeah, like we talk about services a lot. Uh I had a talk that I gave um uh sort of um uh bittersweet to say it was the last in person talk conference talk I gave before COVID uh was at De Stays New York City. It's called the life cycle of a service. I don't expect that you're gonna, you know, click on that link because you can't click on it because it's just in the video. But um but I remember that random character straight in the middle, right? Yeah, thanks a lot there. I noticed. Um But when we think about services, so like there, there's sort of these pieces. So like we want to talk about service ownership and how do you figure out who owns it? But we probably should start with like, what are we even talking about? Right. And I think it's important and one of the things that I I dug into for some blog posts that are, that are in the process of being published literally as we speak is, is a bit about how you have the definition of a service that's working in your organization. But you also need to understand how you define service within the page you duty app, at least with, within the concept of what we're talking about here, right? Because when you, when you say, oh, I understand what a service is. And let's say Maddie and I are on the same team and it was like, hey, Maddie, did you update sessions with service? And he knows what I mean? But then if we go into the application, does the application use it in the same way that we are using it in our speech? All right. And do we, and and it sounds like really pedantic until you realize that there are consequences for that like slight variance. So when you're, when you're talking about like a service, we like to define a service as something that's like a unit of functionality. So that if you have monoliths and microservices or both or the sliding scale spectrum, you can talk about them. But then when you're defining them in the page, you Duty App, you kind of have to be conscious of how you're defining it. Is it in a single environment or multi environment? Because you need to work out how all of that is going to plug into the page of Duty App? Got it. OK. And so may maybe when you think about that, like why does it matter what, what, what does it even mean to own one? Right? Because like, I feel like we, we always want to talk about owning it. Usually it's because we don't want it. Like when you talk about ownership of anything at work. It's usually in the concept of not wanting to say that you do own something but be in a real big hurry to say that you don't. Well, sort of not it. Right, because you're going to be the one that gets woken up for it is like one of the consequences of I own X. Great. Yeah. Yeah. So how do you, OK. So when we think about how we compose these things up and we think about it, like, what are, what are some of the, some of the ways that you like? Because there's different strategies, right? There's all sorts of stuff and, and one of the things that we put like a resource. So there's uh these things called s guides that they are published by Pager duty, they're not necessarily page of duty specific. Um And I don't even remember uh which is the one I'm thinking of, but I helped write. Yeah, full service ownership. I helped write that one uh dot com. Yeah, that actually digs into that a little bit. But, you know, because there's different strategies, right? The story is not the same. It depends on your monolith or your micro services. How is your business structured? But, and how was it structured before you got to where you're at now? Because entirely, it's entirely possible that you didn't really think about ownership. You went from your startup phase. We have like five engineers like ever and they're just working on everything and then you like slide scale through SMB to maybe large corporate and it's just like at some point you need to start making decisions whereas you did, you just didn't need to. There was no justified reason to and there's only five people or whatever. I mean, that's, there's a, there's a pager duty story about that because like it was relatively, you know, for the first few years of pager duty's existence, every engineer got paged on every single incident at pager duty and that was fine with, you know, a small number of people. But yeah, it doesn't, doesn't really scale. Uh but making those changes is not always easy, right? Because once you like what works at really small scale doesn't work at really large scale and vice versa, you like, you don't want to over implement when you, I'm just gonna keep going on with five people. It's an easy number to understand. But, you know, if you have five people having highly separate roles, does it make sense at that phase? Right. So it's this very like sliding scale of when does it start to make sense? And then when it does start to make sense and then you start to dig into what we're talking about, which is trying to figure out what pattern is most effective for your organization. So usually we talk, I say we as page duty, we, but whatever we talk about uh ownership as if you're building it, you own it. So like in that initial model, this goes back to what doesn't make sense when you're small, everybody's building everything. So rush. Um But as you get kind of more role, separ, separate, separated roles, apparently I can't words today as you get more separated roles. Yeah, you, you start to get to this point where you're like, oh actually it does make sense for some concept of maybe mobile or some concept of maybe back end or something to start owning things in their own domains and not page everybody which is five, please don't page everybody if there's some concept of 100 people separate rant for that. Um But when you start to define those teams, you want to make sure that the team escalations are, are defined correctly. So if you're, if you're building it, you kind of own it in that sense, you're the one that has familiarity with the service and, or its code base and therefore you're proud you slash your team are the the most adept to respond if it starts to fail. Um So that's one pattern, the kind of you, you, you wrote it, you run it, right kind of perspective, which I OK. I'm gonna go out here on a limb and, and, and this is how I I'm, I'm maybe thankful that my boss. So I've discovered, OK, I'm gonna ask you this and this is gonna sound like going off on a on a and anybody in the chat I want you to answer before I tell you. So if I were to give you the term two pizza team, what am I describing? Like, what is that in reference to? What does it mean? And what is it in reference to a two pizza team? Yeah, I'm not gonna answer because like I know why you're asking. So you've already, yeah, you already, I've already, I already, yeah, that's right. Ok. So we'll see. Ok, you know, chat, you know, if I say two pizza team, what do you think I'm talking about? We'll give you a second to, to, to reply and then, then I'll tell you why. I'm confused by this. No one answers. Scott should be, we're just gonna rag on him the entire entire, whether he's there or not. Yes, that's, um, ok. Well, ok. Yeah, Scott says that a, uh, a two pizza team is, is, is a team of Scott mcallister because they'll eat both. All right. So here's the thing, as I have always understood it. I first heard it and it may be an Amazon creation and I believe, quote unquote Amazonian, but it's, it's about team size. It's basically saying your team shouldn't be bigger than can be fed by two pizzas. But several people I know who came from AWS continue to conflate two pizza team and you wrote it, you run it, which is what Werner, I think is the one who coined that phrase Werner Vos and Two Pizza has nothing to do with you wrote it, you run it, you can have a two pizza feature team that throws stuff over the wall and there's still a two pizza team. It's just the size. So it's, it's as I understand it, two pizza team is, like, intentionally loose so that, you know, if you're starting to trend towards the team is growing so large that inter team communication is starting to muck up the gears. It's like a micro dunbar number kind of thing, you know. Yeah, because you don't want to get it all the way out there because at that, at some point, you're just gonna have, you know, all this overhead. But at the same time, you don't wanna really aggressively say, well, we've decided that teams are, I'm just gonna keep using the number five for some reason today, we want all teams to be five people no matter what, no matter if it makes sense. And there's no sense of like sliding scale looseness. Like some can be five, some can be 10. But once you start to push like 10 to 15, I just never think about it. I'm gonna try to remember how I get the number right? But you never want an on call rotation that is divisible by seven if you have a weekly or no, if you have a daily, uh uh like a one day on call like a rotating because we learned this, there was a thing with the way the incident, commander rotation was at page duty because Roda is your only on for like a day at a time. But so the problem is if it's divisible by seven, it means you're always on call the same day of the week, which could be a blessing on the curse. Like if it's Yeah. No. Yeah. But I remember because of that there would be scenarios and I'm sure it's still the case that like let's say there were 13 people in the rotation and then they're like, we want to add another incident commander. It's like we actually can't add another one until we can add two. Oh, I see what you're saying. You know what I mean? Because like, yeah, because otherwise it would be like you were on call every Friday or every other Friday, you know, always. So I, I'm gonna say like, if I were an incident commander, I wouldn't hate that because then I'd be like, I know what day of the week to reserve. Yeah, I mean, there's an argument can be made for that, but it also sort of means that you're always screwed on that day and then you have to sort of do some horse trading on the team because what if the math makes it fall that it's always Tuesdays and you have a community meeting every Tuesday, you know, you'll never be able to do it. So, yeah. So um that is a whole other, like uh humane on call. Like, how do you deal with the fact? Like, a lot of on call processes don't really um are not as, as accessible and open to people that have, I almost wouldn't say like non-traditional but, or as, as have, have uh as setups that are maybe different than, than people who are doing on call at first, right? You know, again, like, maybe you can't have 24 hours because, you know, there's a lot of stuff and I know as a, you know, again, it's kind of fortunate that my on call days were when I wasn't a single parent but, you know, or then I was a single parent that didn't have to drive kids, you know what my, my uh you know, but these days, you know, when I was having to drive kids to and from school and stuff like that, like, and, and you can do that, right. There's lots of things you can do within your team and, and this is, you know, never be afraid of the override. Like you can, you can say like, ok, you know what, even when it's my week because I think about like how on call and I'm sure it is this way in a lot of places and sorry, now we're talking the whole thing about on call. I was gonna say we probably should explain it like we're talking about in some commanders for the most part at this junction. Uh No, this could still be just the on call person, right? OK. So just perspective, perspective of time um of, of the context. So I'm thinking about uh this, this is important because this is like pre everybody has a cell phone and a hotspot kind of thing or whatever. So when I was working at a bank in the olden days when you were on call, you actually worked from home that week because your commute was too long of a time. Like you had to be able to be on a terminal within five minutes over a 24 hour period for one week straight. So, you pretty much, I just heard you say that. And I'm like, oh, you definitely live in a big city? Oh, you mean because of the commute? Yeah. Yeah, because like, when I was working in person was like, 15 minutes and that would have been too long. Five minutes. You had to be in five minutes. Um, although also another fun on call. Story of that was, I was on call at that in that job over New Year Eve once. And so my ex-wife and I used to say we're like, well, we're gonna have a New Year's Eve party at our house. Then I'm like, didn't say I couldn't have a party. I just can't leave the house. So everybody come to me. Um, but, but, and, but as we've moved on, like you, you may still have this but you know, you have better backups you have and you have the ability to say like, ok, even if it is like I'm the primary on call, you, you need to have flexibility and trust within your team that you can a lot, you know, people will, will come in and, and, and cover for you, not even cover for you. But you could say like, hey, I need an override during the next four hours. And I, again, most of my more recent experience with on call was at pager duty and it was as an incident commander, but the practices apply no matter what kind of engineer you are, what kind of rotation you're in where that would just be the thing people would be like, hey, you know what I'm on call today, I have to go pick my kid up from school or I have a doctor's appointment or whatever, you know, when you're a traveling developer advocate and an instant commander at the same time, hey, I'm on a flight. I is fine. My talk is in the next two hours who can take someone, take an over ride for me. And again, a lot of that comes down to culture and trust in your team that you can just do that. Like if, if it's always the same person who's like, like I've also seen uh so this is an anti pattern to watch out for. Right. But see people that want to track that to make sure that it's equitable because that's the fear is like, that. Quinn is the one who's always asking for overrides but never takes them. And, uh, but if it's, like you were saying before, if it's like that daily schedule, there might be a reason I, it's on the day that I can like, great or no, just in general like it just Yeah. Yeah. No, I just feel that there are things that could really make it awful for, make it off, make it just to be that you don't have that flexibility. But people want to feel like the thing is, most groups tend to be self managing when it comes to this kind of thing. So if there is someone out there less than two pizzas, well, right. As long as there's someone on your rotation and your team that is never backing anybody up, they're gonna find they're just having a hard time getting people to take over rides or it just happened. You don't, my whole point is don't feel like you have to create some tool. And the reason if you wonder why I'm telling you not to do this because I can tell you how many places I went to as a developer advocate of pager duty, talking to people and I'm talking about wanting to build a thing to do this or even better. They wanted pager duty to track it to track a budget of overrides to keep it equitable. I'm like, no, please. God. No, just like talk to your team, right. It gets a bit fun at that point. So like the app will track if, if a person is on call all the time. So like to the earlier conversation, it's very low level. If someone's on call, too much and too much kind of being defined, not just by the frequency if they're on call, but also who's getting paid the most. It's trying to help catch that use case where it's like if you're always on call on Monday and there's always an incident on Monday or whatever, like, like, right, you're kind of getting, you're more likely to burn out, but like it doesn't abstract any higher than that because you're right, like after a certain point, if, if you notice these patterns emerge from what the app is already telling you, the humans have to do human things and sit around and kind of have a conversation about how they want to address it rather than have the app kind of make too much directional choices on their behalf. What is and this is where I'm gonna, and I, I, again, I apologize if we're getting a little too product meta. Um And it's been, it's been a minute since I talked about page new products. But one of the things I think this is what you're getting at. And I, I think the products probably all got renamed. Um But there was a product, there was a feature that was about the operational health of your teams. Um And it was honestly one of the things that made me want to work at Page of Duty and I wrote a talk called, uh how do you trans uh uh it was about humane ops. Um And it was based on like some of the data that, that we had around that. But it was the idea that like, you're, you're, you know, so I think it's, I think the feature you're talking about was an evolution of that. I think it is just referred to as like it's in the suite with operations health. So like, yeah, so it was, it's, it's so not important. This is trivia. In fact, actually Joey, if you're still on, you're about the only person that you might remember what this thing was called. Um, doesn't matter. So, um, ok. Well, let's maybe like take a, take a minute and like, look at page duty a little bit, look at like maybe some of the things we'd wanna set up and then figure like for these services, um, poke around on my, my pager duty and then see if we can use some Pulumi to, to do some stuff with it. That sounds like fun. Let's do we have different ideas of what fun means? Let's see. Uh share a chrome tab. Um Where is it? There we go. This is they are gonna be our call out that we mentioned when, when, when, when Quintessences saw this, when I pulled this up at first and it says you're always on call. He's like, yeah, maybe we need to talk about that. Yeah, just like as a brief aside, unless you're using your own personal pager duty, like free trial, community size personal project pager duty. Probably you never want to see, see this. Yeah. Where it says over here it says you're always on call. Oh, look my next on call rotation starts in the day. Um And it, and it ends and it ends on Monday. Yeah, I don't, I don't even remember what all my uh stuff is that I have set up in here. We, we found that one thing that was fun. We could tell how long ago it was the last time I was using this is that the time zone is still sent to California time. So it was when I lived in San Francisco. Wow, we just lost a bunch of people watching. I guess my joke about not always being on call uh fell on deaf ears. It's OK. It's OK. All right, cool. Um All right. So like uh what's up? Um oh I have teams. OK. That's what those are. Yeah. So you have projects, you have teams, you can look in the services. I don't know. If you have any services to find, but I, I believe I have one. Yeah. So this goes back to what we were talking about. Oh yeah. Relevantly this goes back to what we were talking about before where like what does service mean to page your duty as an application should be closely aligned? Maybe not perfectly because there are other apps and services you're gonna be using should be closely aligned with how you conceptualize services in your organization. So that's something to consider and the services are in the thing they provide because like I know like an anti pattern of sort of defining services and patri duty would be to name a service after like it's ingestion, right? Like you would not have a service called data dog. And by you saying you would not, that's untrue because many of you would, I know I've seen it but you would not want to or you would want to because you did, you shouldn't, it's a bad idea. Please don't. You know, it should be data dog is part of the part of the thing that provides value, right? The website, the the micro service, the even the data, the data provider, not the database itself. That's the other thing too is you'll see services that are like a server or a cluster or a thing unless that's the the the boundary of the value, it's not a service, right? And what can really help with that? Is like that business service thing that you see in the middle there for everyone looking at that those are aggregates of services. So rather than have your service named data dog or whatever, you could have a business service named data dog and have a bunch of services under data dog again, depending on what you have it doing, right? So, so that might be a way for you to see what you're used to seeing aggregated, the way you're used to seeing it aggregated, but still have the app differentiating things correctly. I think part of the reason this, we haven't had an incident in this long is that I think this just stopped working. Um but that's OK, but it's all right. We're not, we're not making having to make a thing go. But like, right, we don't need to, no one needs to be triggered by an incident today. No, today, especially because it's just me. So we have ourselves as service. OK? So, and then, so when we define one, what are some of the other things that are interesting about services? I mean, I usually um think of services if you're not sure because we were talking about ownership and the concept of services. So like ownership and when you think about it in terms of like a page of Duty app or really anything that's alert management, be it pay of duty or otherwise you really are thinking about it in terms of its escalation path. And so if you find that you have like a tenuous view of ownership or a tenuous view of the service, you can look at the escalation path and depending on whether or not you have a knock or something, escalation path may not be the true owner, so to speak, it might just be the intermediary. But if you want the app to behave true to what you, where you want it to pay and who you want to reach out to. And its first round of alerts follow the escalation path for your services because the worst case scenario is even if things are a bit too broadly defined and not granular enough, they're still gonna notify the right people. And like, yes, you still wanna like clean that up later, but it's not going to negatively impact your immediate urgent response, which takes priority over any cleanup actions that should happen after. Got it. So like if we were to take a look at, so like you're just talking escalation policies. So like when you start making those, you make all the people of course, but then they're on certain escalation like teams and everything. So when you start to think of like what team is in the escalation path for service A and B to determine if it's one service or two. And so far as the app is concerned, if the escalation path is the same, you're kind of free to experiment and make it service A B and make it one service in page duty or split it between two. Um If there's a logical reason to do so, like if they're owned by the same escalation team, but not actually the same someone use air quotes thing, right? Depending on, on what's happening. Yeah. OK. So, uh so maybe one of the things, so if we look at my team, I have this, uh this, this team that I might want to send things to and it kind of sucks because one of the things we pointed out is on this devo stay team, there's just one of them, there's just one person and that sucks. So it would be good to add another person, which we could do it. Well, we're gonna, it's gonna be, it's gonna be, uh this is how we're gonna do it. OK? So first we're gonna, we're gonna do this by hand because this is how we do info coach stuff. We're gonna say let's add it, add a team person, team member. Um, but then it would be kind of rad to like see if maybe we can write a little Pluie program to do something similar and poke around. So make a separate, make a secondary team with two people in it or something. Sure, I guess we could just make a whole brand new team because I don't really care what I'm doing with it. OK? So we're just gonna call this the Pulumi plus pals. OK. OK. And then cool. So how do I add people? If I edit team? I think you have to a, you edit the team but like you should already have the people to add. So like users. OK. Yeah. So I have a whole bunch of users actually. Oh, I did. 00 I deleted a bunch of them. Yeah. Um OK. So I would go, I would add a user. OK. They, I recall this from when I tried this stuff before. It's like it's fine. Like they don't have to be confirmed, they have to be confirmed to do anything but I can add them and, and manipulate them without so we could just so we can, we can make a little arm demo. OK. They just Yeah. And then what is it? Uh Actually we're gonna do this and also I saw a question in the chat if the free version is good for a start, I would say, yeah, especially if you're, you're looking at just building out something small. Um Just to see if it works for you and you pick a project with a few people on it and just do the, the free trial phase and get used to the mechanics work with us if you have any questions. Um So, OK, so we added Michael Bluth. So now if we and I also one of the things that it let me do, was it let me say what team Michael was gonna be on. But let's say I also want to make sure to add myself to this one so I can go in here. Oh, sorry. Bridget, we are not gonna add Bridget Krom back to the, I mean, we could but like it's interesting because even though you've deleted her, her user, the memory of it exist somewhere. Yeah. Something is, I don't know that I deleted her user though. I don't understand how that happened. I also don't know what happened to all my ponies that I used to have. Did you just have a bunch of blank users? No, they were all users that I made the same way that I made the um Michael Bluth one. They were all like my Gmail address plus rainbow dash at gmail, you know, just so I could because I, you wanted to like show all this stuff. Um But ok, cool. So we, we gave ourselves another user. We're gonna, that's beginnings of something, but let's go ahead and maybe um do a little uh coding. So what we're gonna do is um we're gonna be using the pager duty or the Pulumi Page duty provider. Wow, that's a some alliteration for you there. Pulumi page D providers say that over and over again. Um What was it sound like? Words, Laura and her team was, was talking about like Pulumi packages with Python. It was like something where it was a whole bunch all at once. Um, so we're gonna, I'm gonna say, let's see, we'll switch back over to my, um, VS code and, um, bear with me for a second while I get the packages. Um, so q if you can keep an eye on the chat for me because I just had to put something over the window where I would see the chat. Um, ok, so what I'm doing and, um, as, as per you, if you've done Pulumi before, great, if you haven't bear with me. Uh, so the beautiful thing about Pulumi is we are going to write a program using a general purpose programming language. And, um, I think today I'm gonna go back and use a typescript again. If for no other reason, then somebody on Twitter got angry about having to use M PM with Pulumi. Uh So it's, it's topical. Uh, but you could use Python, you could use go, you could use dot net, you know, VB dot net, C# et cetera engine would love for me to use one of our favorite. Uh, viewers would love for me to be doing this and go. But I'm just gonna do typescript right now. Um, but, uh, we write this program in this general purpose programming language, which means we can use all of the cool things like the ID E and type ahead and all that stuff. Uh, and what we're gonna do is write this program. Uh And when we run it. It will do things for page duty for us. So, the first thing that we do is, uh, every Pulumi program, uh, lives in it. Basically. It's just a directory of files. Right. So, right now I'm just in a folder. It's just called PDP Vision. This was just a holding place because I wanted to stage up VS code. But if you mean to be sharing or not yet, thank you. That's what I wanted. Yeah. Um Cool. No, it's the same problem with re stream where I, you share it but it wasn't brought into the, uh, the thing. Uh, you're good now. OK. Good deal. Oh, wait, hang on. What am I looking for? Word V Cogo, sorry, I'm losing my mind. Um No, not that I want there. It is. OK. Good deal. So we're gonna call this program, uh Page power. OK? So if you don't know, um Page is the mascot of Pager Duty. Uh, it's kind of the pe is the Pulumi pu of Page of Duty. So, and then we're gonna change directories and we're gonna say Pulumi new typescript. Now there's various different scaffolding. We could do, we could say, you know, OK. And go, we could even say if it should be aws, we just sort of want a generic new typescript and using the dash. Y just says, you know, who's the defaults? Um, which means it's just gonna name it. It's gonna name the, the program and everything after the directory and what this gets us. So now if we look at Pagey power, it's generated all this for us. A couple of things are just interesting to look at this YAML file is just some metadata about our program. The only thing that's really terribly interesting is it says the no time says this program is run using no Js, right? Not Gola or whatever, plus its name and description. Who cares? Uh You can see that it's uh in its package that J sign has gone ahead and installed just the basic dependencies, it knows that it needs, which is the Pulumi package. And then we have the index dot TS because I'm doing this in typescript is basically our Pulumi program which is not really doing anything yet, but that's cool. Um But we want to do some, some stuff with Pager duty. So there is uh the way we install the um is we just do an N PM install and we're gonna install Pulumi slash pager duty. And so what that's gonna do is install the N PM package that lets us use Pager duty with Pulumi. Um You notice nothing happened in our program but if we go to our package that Jason, we now added page duty. Cool. Now we can do some pager duty. You got to talk so careful with some, some stuff at this company you work at when I tell you what um I mean, it. Favorite sticker. Yeah. Yeah, it is. It is. So now one of the things is all that my Pulumi program is doing is it's reaching out to P to Pager Duty API. Ok. And so in order to use Pager Duty STK, uh I have to have an API token, right? Um Pulumi is never gonna see these credentials. Now, there's two ways that, uh, so this is just a AP Yeah, Pager Duty podcast. Yes. Pager Duty. It just has this token, right? And you can set that token. Uh you can either store it in an environment variable or we can store it in a Pulumi config uh And when we sort is an encrypted value, um that means that other people that are running my Pulumi program would be able to do that. Um Which is what, that's what I'm gonna do. So what I am gonna do first is go and grab my um token. Um It's an API access key if this is uh important to you to know how to do uh tweet at Quintessences on, on Twitter and she will tell you how to do it. Uh I mean, I just don't want to share my pro it's, it's, it's uh I'm just trying to Yeah. So we're just gonna say, so I'm gonna create an API key. I know you're not seeing this, this is intentionally hidden, you know, you don't wanna share a screen for your API key, you know, OK, so I have my API key and then what I'm gonna do is using um give me a second here to do, OK? I am gonna set with Pulumi config and I'm not showing you that I'm doing this because I'm gonna type in my key, but I'm gonna show you what happens. So we're gonna say, you know Pulumi set, it's pager duty Colin Token and then now if we go back and look at our code in theory, so you're seeing my screen now, right? You're seeing my visual studio code. So now you notice it created this Pulumi dot dev dot Yaml. So Pulumi has this concept of stacks, which is basically an instance of our Pulumi program. And so this is config specific to that stack and you'll notice it has a value called pager duty token. This is not my token. This is the encrypted uh version of that. So this could get pushed up to source control. That would be fine. It's all fine and again, even and the only way you can decrypt this because right now what one of the things I didn't show you is I am I'm man, you said to be careful, but it was a mistake. I was wow. But to answer uh engines question, if you're a Deb advocate, if you don't leak API keys, you most certainly are. Everyone makes the mistake once though. It's like being an engineer and like messing up production. I could also, I could also go delete this API key right after I'm done. So you can see that this is logged in as Matt. So it means I have access. So even if Quinn tried to run this Pulumi program, it wouldn't decrypt unless she was in an account that had access to my Pulumi uh account, my Pulumi organization. Ok. So we've got ourselves the ability to talk to pager duty. Um And maybe one of the first things we could do. So we, we created a team before. So let's kind of maybe let's do that. That's easy. And so, um as we also, you know, a lot of times when I'm doing demos, I like to turn off uh co-pilot because I'm teaching, but we've also found in Pulumi Vision, it's kind of fun to have Copilot on. So one thing is, but the thing I'm forget the Copilot part. But you see how, um as I go in here and I'm gonna call this uh demo team and we're gonna say it's, it's a new, wow, look at that, right? It's a new, but it's not a new Pulumi team. It's a new pager duty dot team. OK? And we give it a name. We're gonna call it demo team. OK? And the uh and all that it really has is a description and we're gonna say it's called Paige's Best Pals. OK. And so what did I do on here? It's a new, oh, who knows what I did wrong. Wonder if Scott's still here? Well, I'll tell you, I do know what I did wrong. I just want, I know it'd be nice if they answered us though. How much, how much, how, what's, how's your javascript? My javascript is ok. And I'm, I'm looking at some commas right now. I will. Well, again, actually cannot find the name. Pager Duty. We never IED the package, we added it to our package. Jason, which is why none of our type of head stuff was working. So we do as pager duty from it is interesting that it partially worked. That was no, what was partially working was the um ok. So now can't find him. Is it, did I spell description wrong? Does it care about? Oh, we got someone who did figure it out too. 0000 ha ha ha ha ha. Sing a brace. There you go. So this is way of arguments was not. Um Yeah. So it should look like this. Ok. So now what we can do is the first thing we'll do is we're gonna run uh uh what's called Pulumi preview, which if we run Pulumi up, it does preview by default. And so when we run Pulumi up, it's gonna say I'm gonna run, gonna pretend, basically pretend to run your Pulumi program. And if I ran it's kind of like a no. Right. It's like what would happen if I ran it and says, OK, cool. I'm gonna create two things. I'm gonna create a Pulumi stack because we on the Pulumi Sas side, we have yet to create uh the stack. The instance I created the DEV dot E. So it says I have to create that stack and then I'm gonna create a team. So I could either say, do I want to perform it? Yes. No. Or then I always like to say, let's look at the details and let's see exactly. It's gonna tell me exactly what it's gonna do. OK? And you'll notice that the name is actually demo team within an identifier. So Pulumi has this notion of auto naming and we do this to prevent name space collisions because there are oftentimes in cloud systems resources that have to be unique. Um You can override this and we might want to do that for something like this because the team name, but it makes sure that the name is still unique. We're gonna go ahead and just leave it as it is and we're gonna say, go ahead and we'll run that update and we'll see if my token works. Cool. So that claims it did something. So let's go ahead and now if we go back and I'm gonna res share to um the other tab. There it is. OK? So now if we go back to our teams, yeah, there is our demo team with the silly name. OK? So that's cool. And all, but we're writing in a programming language like all I, oh my goodness, sorry, I didn't, I didn't share. I was sharing what I didn't share. Um So, so what would be cool is like, let's add a user but then add the user directly to the team. But we don't, we might not necessarily know the name of the team. OK? And that's where we're gonna play with the fun of that. We're using a programming language and you'll see what, what I mean in just a second. So we're gonna go back to here. So we're like, cool, we've created a team now, we maybe want to create a user. So if I go and I look at the API Docs, it's pretty straightforward. Um And we like to, we can, oh, interesting. Use the page, your duty team membership resource. Oh OK. All right. Well, first we'll create what I said. We wanted to create a user. OK? So we have our demo team. Am I sure also not right now. I also just kicked over the API documentation. You all if we want to share that out um for people to have it. It's just developer at dot com. OK? For anyone following around. For what? Um Well, what's if you wanted to really look at it? This is the, I'll put the link, this is the API docs for the page provider in Pulumi. So this is what they're using because they, they should be a, a pretty consistent match and if they aren't, we can blame Scott because somehow it's his fault. Um like on the street. Yeah. So, so like here's what we would do, right? So first we're gonna say, let's create uh we're gonna create the user and we're gonna call it demo user. And this is a new page of duty user called demo user. This is how we keep ourselves honest here. Right? Cool. So it needs uh basically they need an email. OK? And that email we will do um OK. And then um I think they can take a name. Yep, Joe Bluth. OK. So that gives us, so we created a new user and then there is a resource called team membership, right? So if we say constant, we'll call it demo team membership. Oop. OK. It's a new team membership which let me, let's fix something here. Do do do do do OK? Um Now and this is where it's gonna get kind of cool. Uh I could these two things. So first it needs the U the user ID that we're talking about and you'll notice it, it, it knows to want demo user. Damn it. Freaking copilot. I'm actually gonna turn you off. So you're spoiling things, right? So this take, did I not just turn it off? Oh Globally. There we go. OK. Um So this takes the ID right of and I would need to know what that ID was but I can just get it by doing demo user. And then I can see these are all the properties of demo us. This is all coming from typescript because of the package, right? So I'm like, OK, I'll just get the demo user ID. But then of course, one might assume I also need to know the team ID because I need to know what I'm gonna do, which again is gonna be back to what was demo team. It also has an ID. And so what should happen when we run this program? Right? Um What do you think is gonna happen? What do you think Pulumi is gonna do? Um We've got, it's going to create the user, it's going to try and create the user ID. I also wanted to ask and I don't know if it's the spec or not because I was briefly Googling it. Do you need those trailing commas? My javascript is a little rusty for like, yeah, um for the last item in the, I think they are um uh optional, but then I won't get distracted by that anymore because I definitely, if it's bothering you, if it's bothering the thing to check. No, it's, it's fine. I mean, I think vs code would yell at me if not. So if we go ahead and do Pulumi up what you're gonna remember, it's gonna do a preview um to try and create. So a couple of fun things are happening. Right. It says actually it only has to create the user and the team membership because two are unchanged, the stack didn't change the um team is still there. So if you say let's go ahead, I mean, we could go and look at the details. Um We're like, OK, cool. Yep, that's description, you know, uh always helpful to know that that's where it came from. Like we didn't put it. Now if we, we could have overwritten, that sort of is the default description of the user. But we're gonna say, go ahead, let's run this cat and it is nice to have that default because for when you don't remember to put it in, you're not stuck with this. What is this thing? I'm gonna show you something too in just a second. So if I um bear with me for a second as I right, I'm gonna show you what I just did there is I clicked on this link where it said View live. So if I were to go to um to that link on the Pulumi console, I'm basically seeing all the things that I've been doing that we've been seeing on the console. So I look at the stack I've created. That's cool. Um You'll notice I cannot see the value of page of duty token because it's encrypted. And if we look at activity, you can see we've run a couple updates, right? So we did, you know this one and if we go into details, we can see it went uh went in there, what were the changes? And the one we just ran here, you know, uh we look at the timeline and it, you could see all the things it did. And then even if we go into resources, this, this is important because this tells us all of the resources uh that are under management by this Pulumi program. So we know, and even if you go like this is not super interesting because it's just, you know, but if you imagine if we're in a cloud provider which has, you know, virtual networks and pieces and that, that all might trigger off of each other. And um we can sort of see the graph relationship of those of those pieces and parts. But yeah, if we go back to page duty now and uh hang on a second, my API key is what was on that tab, I just switch that tab real quick. Um By the way, this is what you do, you go to integrations API access keys and then that's where you can create your blue. But we uh so we had our team, which, you know, our, our, our demo team which has job in it now, which, you know, looks uh exactly like uh like we, we expected. So pretty cool, cool. Um The last thing we probably wanna do is we always want to clean up after ourselves. Uh There is no, uh, fortunately with, um, pager duty, it's not like aws. You don't need to have the duck build group come and make sure that you're not over extending your use of that. But, uh, just to sort of clean up one of the things we can do is we can go and, um, just get rid of our, so our stuff using a Pulumi destroy. So if we were to go back and go look at our friend over here. Um So if I say Pulumi destroy, it's gonna say all those resources. Remember when we saw the resources that were under the stack, it says cool, if you destroy, I'm going to get rid of them, right? Um You're like, yes, I want to destroy. And you'll notice though. It says once it's done, it's gonna say the history and configuration are still there. You would see that if I was sharing my screen, OK, we'll go back. This is what happened. I said Pulumi destroy. Yes. And it said I am deleting all these things. And so if I uh but then again, again, this is where we go back to like the freaking re stream sharing. Flipping flopping is crazy. Um So if we go back to my, my stack, so now under pagey power, if we go to resources, there are no resources but we still have the activity. We have all the history, all the things that we did. Um And if I were to go back in and I could run Pulumi up again and it could, would recreate those things, you know. Um And, and, and where that goes, but if I want to get completely, I could destroy this entire stack if I needed to and get rid of it and say I want it, you know, burned from, from the planet. Um, so it's up, Nova, thanks for tuning in there at the end. Um So kind of kind of wrap it up. So there's a couple of things like, yeah, if we sort of look at there's, there's a, a bunch of things we can do. Now, I know. Not everything you can do in page of duty can be done in Pulumi because not every feature of Pager duty is extended through the API um which is fine. I don't judge um a little bit. It's so here's why. Well, here, I'll tell you why it's hard. And Scott, I wish I wish Scott was, was still in here because I think he would feel this pain. Um It's very challenging to use uh infrastructures code and also do manual configuration. At the same time, you, you run into a split brain situation, right? Where you might go in through the console and change something and then your Pulumi program that your other team is doing will go and undo that right? Versus if all of your configuration is done through infrastructure is software that's in version control, you always know what it is. Um which is a fine thing to be able to do when every single thing you need to do can be done through that. So that's one of the challenges with when you don't have everything. Now that said you can do some informal things, right? You can sort of say this is how we create it. And one of the things I think that's really powerful and I've seen a lot of people do this um is when they're creating their Pulumi program that defines their service altogether, not their service necessarily from a patron d perspective. But you can have your repository that has your code in it and then it can have an Infra Repo in it that has the Pulumi program that not only deploys your service but maybe ensures that there is a team that exists with all the right people or even sometimes they're one at a time I've seen, there's a um go to the Pulumi blog, you'll find it. I, I wrote, I think it's called a, a single Infra Repo. I talked to Green Park sports about how they do stuff, but they sort of have, when they create a new service in their organization, there's basically a Pulumi program that could get run that will set up all of their github repo the way they're supposed to be, make sure everything's according to that. And then again, same thing, something like pager duty like ensure, OK, there has to be a service, there has to be a rotate, like all those things that we're saying you want to have, you can define them and then you're just sort of plugging in variables right to what's different. So that's where it gets really um really powerful, I think. So, uh do you have any kind of closing thoughts on this and any, you know, I definitely hear what you're saying, at the very least with regards to having a split brain, I think in so far as like the main goal of being able to manage a lot of users at once via plume or, or what have you, I think it, it gives you a lot of what you need in, in the core. So like if you're at a large engineering organization or company, because it's entirely possible you have more engineers in your page of duty instance, like you can add a bunch and you can remove a bunch and you can do a bunch of things with your scheduling and such and you can do them via code and, and you do have that version control and, but you do have to be mindful of either preventing access to make certain types of modifications so that you don't change something manually that gets unchanged the next time someone pushes a new user and thus pushes the last known codified state of things. Um And, and some of that can be managed with who has access to do what? Um, but, but I definitely still also hear what you're saying. So, um, I guess that's where I'm thinking of it. I think that's true. And again, that was, this is not an uncommon thing. Not, not everything that a product can do is exposed through a public api and it's, it's less of a like, oh, this is why this is bad. It's more of just exactly like you said, just things to be mindful of, be aware when you're, when you're scaling your work of what constraints that means for you. Well, thank you for joining me on Pulumi Vision. Uh, if you're, if you're still watching and you haven't, uh, if you're watching on youtube, push that subscribe button if you're watching on, uh, T, uh, Twitch, smash the follow button. Uh, we do Pulumi Vision the same time every week. I don't know what I'm doing next week but, you know, hit me up on Twitter at Matt Stratton. If you got an idea for something you'd like to see on Pulumi Vision or you want to come on and do something fun, uh, on that, we will see you on the internet.

---
