---
preview_image:
hero:
  image: /icons/containers.svg
  title: "PulumiVision - Never Surrender:  Building a Kubernetes Cluster with Pulumi"
title: "PulumiVision - Never Surrender:  Building a Kubernetes..."
meta_desc: |
    Guinevere Saenger (Software Engineer at Pulumi) and Matty Stratton (Staff Developer Advocate at Pulumi) use infrastructure as software to play arou...
url_slug: pulumivision-never-surrender-building-kubernetes-cluster-pulumi
featured: false
pre_recorded: true
pulumi_tv: false
unlisted: false
gated: false
type: webinars
external: false
no_getting_started: true
block_external_search_index: false
main:
  title: "PulumiVision - Never Surrender:  Building a Kubernetes Cluster with Pulumi"
  description: |
    Guinevere Saenger (Software Engineer at Pulumi) and Matty Stratton (Staff Developer Advocate at Pulumi) use infrastructure as software to play around with some Kubernetes clusters!
  sortable_date: 2022-04-23T05:04:30Z
  youtube_url: https://www.youtube.com/embed/gH_FmBpeMGM
transcript: |
    Uh, oh, can you? I'm gonna do that. Ok, just for the moment till we're ready to start also. I'm not even looking, I need to move this so that I'm looking at the camera too. Ok. I mean, I'm super unprepared other than the fact that I like made the providers work and then I get them into a component which I'm hoping you can help me with a little because I don't know what I'm doing. Let's find out. Um, no, but what I was gonna tell you. So, so if you are as people are joining, oh shit, we got a bunch of people. Um, so I'll give you the background about why I was gonna tell the story I was gonna tell. So right before I turned on go live, I asked Gwen, I said, are you, are you ready? She goes? No. Well, let's do it anyway. And so one of my favorite movies is, uh, this movie called State in Maine and it's a movie about making movies which are rarely good. But although the player is, is great too. But anyway, long story short. So, uh, Philip Seymour Hoffman plays the screenwriter. He's like a new screenwriter. And William H Macy is the director and there's a part where I don't want to give it away, but basically something happens where they have to rewrite something because of a contingency in the location and whatever. And, you know, the director is trying to, you know, William H Macy is trying to convince Philip Seymour Hoffman. He's like, oh, but it's so important and blah, blah, blah. And then he goes and then finally, you know, the writer, you have screenwriter, he's like, well, you know, maybe it's for the best and Willie H Macy's director says, uh you know, best or not, it's with the gods, we gotta ride this thing out so best or not, you know, ready or not. It's with the gods. Here we go. Never surrender. So, uh again, uh so, yeah, joining me really excited. Uh Gwen who's one of our uh software engineers here at Pulumi. Um And we're gonna, and by we, I mostly mean Gwen, I'm gonna sit here and just offer color commentary and stuff and Gwen's gonna hack on some, some things and uh we're just gonna see what happens, but we'd love to as you join, like, let us know what uh what, what's making sense, what you have questions about and we're gonna just have a good time. And, you know, also, if you're in the chat, let us know if you like the movie Galaxy Quest because we do that is correct. And because secretly I'm really just like an alien in a developer suit um today, like, and this is meant to be informal in a conversation. At least that's what Maddie told me before. He suckered me into doing this. Um I am by all means open to audience participation, questions, tips and tricks and all of the same. So um yeah, let's see. Um What do we have? Um Are we sharing my, I've never done this part. I was just took it off if you're ready to. So, yeah, so here's I I'm just gonna start out with a blank terminal and some ideas. Um So, one of the things that's super cool, in my opinion about Pulumi is that it's sort of an interface between you, the developer and all of the tools that are out there, like all of them, well, not all of them, but potentially all of them. And I'm actually gonna go a little bit into this. Why? So um in a previous life, I uh ran Kubernetes clusters in production and um that was really cool. Um And kubernetes clusters aren't traditionally something that you would, you know, have to create and recreate a lot of, but there are situations in which you might want to do that unless you're like a developer advocate or a sales engineer and then you do it like five times a day. Exactly. But normal regular humans that work for a living do not do that, but there is a use case for it, right? So especially if you're like a business trying to like bring up like uh production environments for your clients a lot. And uh then like this is this might be something you might want to look into. I know people toss multi cloud multi providers around a lot, but when you are dealing with customers, they come to the table with ideas, right? They're like, I'm sorry for like, you know, this mysterious reasons, I will never use this particular cloud provider. I'm not gonna name names here, but like you might choose to not go with a particular cloud provider over the other. So what I wanna do is just, you know, the same start, I'm gonna create a directory. So now here this is where Maddie's gonna do talking because I can't talk and type at the same time. So I'm gonna make her uh never give up. Yeah. Ok. Um Hey Gwen, can you like? Yeah, pull that. I'll make that a little tiny bit bigger bigger. It is never as, as my friend Layla who does stream say it can never be big enough. There you go. Perfect. Amazing. Ok. So we're, we're creating a new Pulumi program, right? Are we not even that far? Yeah. Ok. Got it. I just wanted to see what we were doing. Ok. So we got ourselves our new directory for those of you who haven't done Pulumi thingies. Before. All right. So I have an empty directory. Now, I'm going to do a Pulumi type script because typescript is a little bit. I tried to do this and I tried to play around a little bit with go and I was like, well, I'm gonna have to, like, fix that for our components is our friend engine is rolling his eyes right now because every time he come on the live stream and I'm like, I'm going to do this in Times Square, I'm gonna do in Python. And he's like, why can't you do it and go and I'm like, we'll do it and go for you sometime. But, well, I, I mean, this is, this is a personal goal. I have, I did, I did try it but then, you know, I was like, shoot, it's Thursday already and no, it's again, go or not. It's with the Gods. Ok. So we created our new, uh, we're gonna walk through. This should be a name change. This, this is great. I've had this happen before and I don't remember why. Um, anyway, for some reason I've had this happen to me. Yeah, it's, are you in, is there something already in the directory? No. Ok. Well, give it a name. Ok. Well, well, you sure can't call it that. Well, you, you just named it LS. Oh, Piers is right. Yeah, you already have a project called. Never give up. That's why I do. Ok, let's let's do this. OK, type script. Um project name, Glen is awesome. There you go. Much better. Although I'm surprised you don't already have a project like, oh OK. I guess I, I guess I removed that project. Uh I hit enter. I, that is fine. So now we're gonna do see the screen do its Pulumi Magic. This is pretty great. I learned this week that all of this stuff comes from a repository name Pulumi templates where you will basically get a scaffolding. If I look at my file structure now, I have a Pulumi yamma. I have all the node modules installed. I mean, well, a node module directory, I don't actually have them installed yet. We could do that next in Ts and all this stuff. Cool. So then I'm gonna use my um OK. I'm gonna bring up the code here we are. I'm gonna make this bigger too. Do not worry. Um I'm very excited because like I feel like everybody who does engineering at Pulumi Loves Intell and I don't even know a damn thing about it and I just use VS code for everything. So really, I'm just going to be watching you use Intell and trying to understand why y'all are so like enamored with it. The main reason I use inte is because in intelligence for going works in at the end. OK? And yes, I know it for Python work in it in Pulumi. You know, I have no idea because I've been trying to pretend I know Python successfully, you know, no one has called me on it. Yeah. All right. So here we have an empty NXTS file and in order to not type and talk at the same time, I am going to copy from something that I prepared for you in advance. Which for those of you, if you haven't done Pulumi before, one of the things that's cool, which, you know, you don't kind of see is the like type of heads and stuff that um that we'll get because all those packages are there, but we can go ahead and paste in. So um fun thing. So we're seeing a squiggly on uh that import because we don't have, we haven't added that package yet for those of you who you know, don't do. That is super cool. So Pulumi is a provider that I'm going to find the docks for Pulumi. Uh So y'all know it's, you don't know what is. I had no idea what is but is a pretty cool cloud provider with which you can bring up KTIS clusters quickly, which makes it awesome for demos. So here we are, these are the docks. Um Mattie, if you want to send a link that would be dope. Um I'm gonna make that bigger too, but uh so here we are following this import. A CBO from Pulumi. I can look at the installation. I have set up the credentials already. So we don't have to worry about that. That's um that's not fun to watch someone do. So, here is api docs and we want to bring up a KTIS cluster. So I'm really interested to see how this goes because so when I do workshops where I need a, a shared Cobern cluster for everybody in the workshop, I've been using Digital Ocean because that's been kind of one of the fastest ways I've, I've been able to do it versus like something like Eks or whatnot, but I do know that co is pretty dope. Um So I'm, I'm interested to see and I may have to move over to uh to co for for these purposes. So, so there's a very bare example here and one of the tricks that I do because I work here is I actually go to the source code. Where's the source code? Um You can do this even if you don't work at Ploy, you can do it. I know that's right. But um so here's examples and I can go in here and just kind of look at Cabernet's typescript minimal. And here we are, we have what should be a working example. And yeah, that looks right. So what I'm doing here is I'm just gonna paste that in for y'all. So you can see I'm creating a firewall first because that is required for me to bring up a Pulumi Pulumi cluster. A cnet's cluster with vo um not all C providers have this um requirement but this is one of them. So I am going to do all of this now, back to my terminal. Um I am going to import that particular package right here. The from NTM first R PM, good part plute cluster hall specify what the heck N PM install. Well, fine. This is what I get for writing stuff in a language that I don't really speak. There we go. OK. That looks good. There's a green zero. Yes, that sounds, that sounds like that sounds awesome. Do I need Pulumi Pulumi? I don't think. No, no, that already was there when you did your Pulumi new. So go if you go into your go back into your code, go look at your package dot Json now. Oh yeah. And which yeah. So now we see it added um Pulumi Pulumi Pulumi was already there. So if you had looked at if you'd seen that, so that was one of the one of the things that happened when you just did that. But when you fire off that um Pulumi new typescript, it took care of the only thing it took now just for reference. Uh So OK. So I think um so engine mentioned, he said a template. So you can do like for example, you can do Pulumi new typescript, a W typescript. There are templates. So I think there might be ac template. I think that would have actually handled that for, for those of you watching along. Yeah, I just personally, like, I love those kinds of abstractions when I already know what I'm doing. But when I don't know what I'm doing, I just love doing it. The, um, I just love doing it the, the, the slow way also, you tend to have to go remove a bunch of stuff too. So that was more for context of, especially if you're watching in the chat when engine was talking about the template, that's what, what he was was talking about. So let's, let's see what happens. I just wanna go run pulling me up because I like to see um what's gonna happen. So we're gonna create the Pulumi when it awesome dove one thing before. Oh OK. So it was just super quick for people who don't know. Um So Gwen is already logged into the Pulumi service somewhere. So that's how it knew what to do. That's what's storing the state. But one thing here is again, we can see what it's gonna do. Go ahead and click, go to details. So this will show exactly what it's gonna do, right? So you'll besides just saying it was going to do that, but you'll actually see it's gonna create um all of these uh specific things and what the name is gonna be and this is just a fun little Pulumi thing so that you're aware. So you see it's gonna create that um for example, that firewall, right? So when it says the name is Gwen dash FW dash something or other. And this is one of those things that if you've never done Pulumi where you're gonna get confused by, but it's actually kind of awesome. Pulumi, will we call this auto naming? So the name that it has, it's gonna append that kind of random string to the end of it. And the reason for that is to avoid collision, name, collisions right now, everybody and I shouldn't make generalizations, but everybody gets confused by this the first time they do it. And also sometimes you don't want that, right? Because there's certain examples where you're like, OK, I literally am gonna have one thing called this, right? Like a good example is user names and something like data dog or whatever. You can absolutely override that. But in the case of like a who cares what it's called, right? So perfectly good. So we can see all these great details and now we can do some stuff with it. You can, the other thing I wanted to mention is I'm gonna actually hit no, because what happens the first time and this also tripped me up when I used Pulumi for the first time. If, if this, if you're new here, um basically the first time you run Pulumi up, what's really happening technically is that you're uh running a Pulumi preview. Um And you see how the output is the same. It says previewing update. If I scroll up right here, like we saw previewing update. So you'll see the same three things, you'll see type name and plan and because the output on my terminal is so pretty, it took me a while to realize that if I run pulling me up and then hit, it's nothing happens. And then the confirmation, this is actually really great because if you have sticky fingers or you just, you're just like very excited to try stuff out or it's nine pm at night and you really just want to get this one thing to work. This is a really good stop gap. I actually like this from a user perspective even though it seems annoying. So yes, I want to perform this update and now the columns are different, right? I still see the types of things that are in my stuck. I see the name and then like now I see a status, not a plan and I think that's pretty awesome. And so we are actually seeing this whole thing rolling away um getting created. So um the there was something, oh and by the way, so another little fun fact. So the preview is great, but especially as you're like writing Pulumi code and trying to figure it out and stuff, you will find yourself often like, OK, I just want to reapply, I just want to reapply I don't actually care so you can do uh the sort of the, what I would call the YOLO flag, which is dash Y. So if you do Pulumi up dash Y it will just, it won't do the preview first. It basically implies that the Yes, it really depends on the kind of human you are. I know this flag exists and I am very, very, I'm tempted to use it almost every time I use Pulumi and I always stop myself from doing it because I know I'm going to create everything. It, I agree with you. And there, there, there are very few examples of but one of the places where it could be is some OK. I'll give a good, here's, here's one example of where I would. Pulumi YOLO is I have a Pulumi program that spins up my digital Ocean Cobert Cluster for a workshop. I've run that Pulumi program 100 times. Well, maybe not a bunch. I'm not changing it. I just know I need it. It's fine, just do it and I may or may not have a bash function uh in my profile uh or have been meaning to at least I don't think I have it in there right now that will map Pulumi YOLO to Pulumi up dash Y uh because it would be fun to just type in Pulumi YOLO. But then I'm afraid I'm gonna do that in a demo sometime and a stream and people are gonna think it's an actual command. Uh maybe it should be. I don't know. OK, cool. We, we have a, wow, that was um I gotta say I feel like this is a hell of a lot faster than do so. Um Yeah, so let's take a quick peek at my code here on the left. Um I'm going to remove the file structure. We don't need it right now. Um Like Pulumi Russian ro, right? Just sort of space. So we have three nodes. That's pretty awesome. We have, you know, so if you look at it, we need to, we need to set a bunch of things, we need to know things about co in order to do this, right? We need to know that Siva has regions called a certain thing. We need to know that Siva needs a firewall ID. We need to know. Uh And as I found out yesterday, we also need to know which kind of notes are compatible with clusters. Um With co I tried to use a tiny cluster to save our wallet and no, can't. Um So or was that Lino? I don't know because I'm going to create another cluster now and I'm doing the exact same thing. So I'm going to wait. Well, hm. Yeah. Which one do I do first? Actually, what I'm gonna do first is like, all right now, let's go back to my terminal and I'm going to use and I can't talk to my cluster. So, what gifts? Well, it turns out I don't have a cub con fake. I don't know what the is, I don't know anything about like, I guess I could go into the co, I could log into the co service and see what's going on there, but I really don't wanna do that. So let me up Dash Y dash F um, oh, I love that. I love all those. So the trick here, Piers is Piers was the example the um doing the alias. The only reason I don't like that. Yeah, you can do it. The reason you have to do a bash function is if you want it to be Pulumi Space YOLO, right? Like so, so pilo, pilo is that would totally work. It's just for some reason, it's not as fun also, you know, there's a Pulumi effort. Um I will put a little shout out to a really important um tool that I can't actually give the name to because we try to have a PG 13, but it's called the F word and it actually helps it, recorrect your commands when you type them in run. It's basically a did you mean it's super duper good? Um Oh Yeah, I have that. Yeah. Yeah, it's the, it, you know what, fine, whatever I'm gonna, I'm gonna find it for you. Um Yes, please. That'd be awesome. So uh I have learned yesterday that apparently here comes with a bunch of information. So that's pretty great. Um I'm going to export some of these things. Um So my ploy stack actually knows what my cluster name is called. So um of course, I said that here in the program on line 13, but I'm going to also export the cuc fake which is also a thing cuc fig sea, I'm sorry. OK. I am laughing very hard at someone said you should alias to Pulumi up dash Y dash skip preview because people who typed her on a Linux machine need to be taught a lesson. I mean I just tried to name my Pulumi stack, Ls. So yeah, so this fair, this is fair. So notice um my because I have this M PM package all like installed um and I have the best um editor of all times. I promise I don't work for whatever they're called inte. No, they're called eclipse. I don't even know what they're called. But look at this, look at this preview. I can just know that cum fig is an output that I get from my pmi stack so that I like how you imply that this wouldn't happen in visual studio code because it 100% would whatever Maddie. Um OK, cool. So I got that I'm gonna save and I'm gonna run pulling me up again because I should get something else from. Can I ask you to do a tiny little favor for me? Can you sort of squish up the bottom of your terminal window? No, no, no, you were fine but just the bottom because you see, I don't know if you can see how, yeah, the bottom of your terminal is getting covered up by that. Oh, you don't even have to go that far. That, yeah, that way we can see what's at the bottom. Yeah. Oh, so, yeah, I, I know I'm gonna take heat from having, uh, uh, uh, a B themed terminal. No, no, no for demo for things like this. That's when you're supposed to do that. Hey, I am secretly a genius. Awesome. Um Cool. So now I see these outputs. Cool. I get my cluster name but this is still just the preview. So oftentimes we won't get to see the outputs because Pulumi actually has to query the resources for this information. So I'm gonna perform this update. It should be very quick because we're not actually doing anything to the infrastructure. We're literally just talking to the pulling the engine and asking it for information. So this is what stumped me next secret. What? But I want to have my cuc con fig. Where is it? So um I have to be a little bit more specific if I go to, let's see. Where's my, where's my, where's my chrome here? If I go to Pulumi Secrets, by the way. Fun little fact. So, but this was this, this for, this came up yesterday and that I saw the, saw it too late after it was figured out when Gwen was asking how to get at this because I have in my Pulumi program that spins up my, my do cluster. There's a commented outline in the Pulumi program, which is the stack, which is the command to run to get the cob config wait for me to remember it. I don't think I'm going to show the cup could fake even though I'm going to totally delete this cluster on the command line. But I still want to get it and read it into a file. So where is this working with secrets? That's not that you want me to, you want me to find the stack out? I'm looking for the command but I can go remember where I've got it. I have it in my memory me stack maybe export. No, not export. Pulumi output. No, it's not that um so the cube can think and don't delete the cluster. Uh uh Nice try. Oh Could you can fake. Thank you Piers. Um So I'm just gonna put this in the chat because this is my example. So if you go take a look at that file that you don't have to go in, but look at the very last line and the last line of that, I'll put it in the chat as well is so now I get secret again. So what I'm gonna do is I'm going to use the flag show secrets and I'm going to read the whole thing into uh, Cube dot Jason. I guess you need to dump it in a can't you just do it? Uh, actually, I don't know. I mean, funnily it just matters like what cotton cuddle is gonna be a thing that coddle is looking for. So, as you'll already see if you look in the chat, you'll see that both peers and I named the file something different. Anyway, he's right that it needs to go in dot cube slash config. Yeah, I did not need to do that. Actually wait. Oh yeah, cool. So now I'm getting nodes, I'm getting two nodes. That's fascinating. How many do we think we have? We think we have three. That's fascinating. That did not happen before. Um Those of you who are uh uh uh what's the word I'm looking for? Uh frequent uh viewers of the Pulumi Pulumi vision stream will remember that we, yes, we care strongly about security on this stream so much for so that when Allie Diamond was on a few weeks ago, I actually let her pop a shell onto my laptop. Like I was like, oh no big deal. Look, you just now have uh you can now remote in as, as me into my Macbook. Well, this seems fine though. Um What I can also do is I can show you what the Pulumi stack looks like. Anyway, um Pulumi stack export. Yes, is going to show you what's happening here. Don't read that but here you can see all these outputs. I'm going to clear my terminal. There we go. Um, but yeah, um, here's two nodes unclear why there's two. I did ask for three. note count three. Fascinating. So what happens if you, I guess it, well, because the cluster, here's a wacky idea. Do this for me? Go back into your Pulumi code and if you change it to four, that's my and then run a Pulumi up again. Oh, don't do. Yeah, these are, these are pennies to the dollar. But still, you know, so if you pull me up again, you could probably why do it, Maddie made me do it. All right. So we're seeing an update the differences in pools. Um, and then, oh, I wonder if your VO cluster doesn't let you have more than two nodes that again, what is it not like? What did we make it? Um, interfaces? Nail? Oh, does something else change in your code? Oh. Hm. Wait, go back. I wonder if in the, in the file you wait interface, this is a, this is a go, er, this is a Terraform provider. Er, wait for Cober Netti not to create. Um, sweet. Let's try it again. I was gonna say that's what happened. What is even a security? That's true. Same. Er. Right. Oh, ok. Can you go back to your code for a second? Because I want to see if something, you know what you know, what might, you know, it might be. It, here's what I'm gonna do. I'm gonna destroy this cluster and I'm gonna rename it and give it a different name. It might be a name, collision, but it shouldn't be creating a whole. Like you, you should be able to change that one parameter again. Can you flip back? Can you flip back to your Pulumi program for a second? I just wanna, uh, name. I removed that cluster yesterday. Oh I see what you mean because it's a oh So maybe it oh But you did. Huh So maybe it's trying to manage the same cluster. Maybe. Maybe it's maybe, yeah, maybe so. Maybe that's why it was two nodes because you actually weren't doing anything, right? Um Maybe we destroy this one. I like to do a dash Y on because it feels powerful. OK? I feel like I'm an enabler of you in YOLO mode, not remove the stack, but I am going to rename this cluster and call it Glen uh um Grand demo. Well, yeah. Grand demo. There we go. That might be a name demo. Just this, this one is uh this one is a thing. This is a thing. So, but when you put the name in there, that's what's actually that might be. No, I think you're OK. Let's do three nodes again. Let's see what happens. Cool. I'm still impressed by how fast this is though. So. Right. Right. So this is legit changing my entire workshop strategy. Fascinating. At least you learned something and that's good because I have a lot of friends who work at and like, you know, like, uh so there's uh I, I feel actually see what it does. OK. Cool. And then I'm gonna run for the meat. Oh gosh. Yeah. Yo. Look at this, look at, look at how quickly you changed your philosophy on this entire thing. Mm. We went from 20 minutes ago. Gre's like, I'm aware the flag is there but I'm very uncomfortable with it to like, I just f it, here we go. Yeah. Again, it's demo land. It's, it's, it's iiiii. I see, I see how it is. I see how it is. This is, this is um I think, I think I've been on, um I've been on streams before but like, I'm like, I don't, I don't know, I don't know. So far this is like somewhat less scary than performing piano in public in some ways and somewhat more scary because at least if I perform piano in public I have practiced well, ideally I have practiced uh all right. So this is a little because I feel like this is not nearly as fast as the last time, which might explain because it might have been that it actually really didn't create a cluster last time because you already had one. Maybe I, I could be wrong. But doesn't it seem like it went super fast last time and you were talking a lot. Um Maybe I was talking a lot. That was probably me, not you. But let me go back here and I'm going to pour over my lino code and make a couple of tweaks as well because I do want to use Leno as well. Um So for Leno, we have a few different things. First of all, we need a new, we have a squiggly line. So we need a new re node package and let's do that. I'll go find the Leno and um I will import that. I will not import, that's not what that's called. I will N PM install that in a minute. So, and I'm gonna call it, I'm not gonna call it my cluster. I'm going to call it when Leno demo. Um This is not my community's. Yeah, this is my community's version that tripped me up yesterday. Label when demo. Apparently the le node uh provider doesn't have a name and it requires node pools. There's two counts G six, standard two and then tag demo. Sure. Um Awesome. Then I'm exporting the same thing. I want the label and I want the cum fake um so that I can point my stuff at it later. So let's go back here. Update failed. Oh OK. They're waiting for a cluster. Oh You know what? I actually saw this, somebody filed a bug report on that literally this week and I was like, OK, well, I don't see it. Um Hang on, let me look which version I'm using. Um Oh yeah, I didn't know that. Yeah, this will give you, this will give you the version of your plugins. So I'm using this and node. Um It'll tell you where your, you know, your Pulumi account lives. This is just my personal Pulumi um and it'll tell you what uh resources are under management here. We are plugins, host version. What did it? OK. So you got, but it was trying to, it was waiting for a cluster to be created unexpected state available. Want to target active. Well, let's try this again. Let's run it. Yeah. Maybe it's, maybe it just, that's, oh, I just changed this week. All right. Let me, let me cut that out to the computers are the best. Seriously. Oh, because I'm like, oh, now you have, you had the, if it makes you feel any better, I have had this happen to me where I was doing. Yeah, we're going. Yeah. So I've, I've lived this exact thing, not the error with Siva but the OK. Yeah. Now it's working. OK. So this is clearly a bug with the Shiva provider that still hasn't gotten fixed yet. Even with the recent update, we have an open bug, there's, there's an issue some very kind person filed it and I now prove to everyone in public that it's still not fixed dope. Um, awesome. I'm going to ply stack output export. I don't even know output. Ploy stack output. Yeah. What show secrets. And I'm gonna read that into my cube can fix. And now I'm going to use cube cuddle. I just keep thinking, paying and get my notes. It's still just two. Wow, this might be related to that bug actually. Anyway, let's move on. Let's make that, let's make that the note cluster happen. By the way, yesterday when I did this, it worked, I feel like you, you are feeling, you know, like the there's every, every developer advocate or sales engineer in the world just like felt very seen with what you just said, which was the yesterday, this worked. I mean, I, I have a cluster, I guess. Um I will, I will, I'll, I'll find out like this might actually be a clue as to why stuff is it might be the way that we are creating the, the nodes like the API server node versus the other nodes. I don't actually know. So um cool. So now we have I'm going to N PM install, put me out right now. If I go cool me about the very bottom, I will see right here. I have Pulumi node provider Sweet. So now I'm gonna run Pulumi up. This is a preview and I see that we are going to create a the node cluster. Yes, I would like to do that and we are adding outputs, this should be pretty quick. So now I was thinking um it's like, it's, it's, it's been, it's been pretty fun and de buggy. Um So what I was really hoping to do was to um go back here and somehow abstract away all of this cluster mess into a component that will literally take the name of a Cub provider and the amount of clusters that you want. Um And I actually was hoping that this is the part where I learned stuff. Um Because so far we've just kind of like been dealing with some ops toil um and hearing silly jokes, hopefully from me. Um Let's see. Um Just give me a second here. So the other thing that I run into when I bring up clusters um for clients, which I don't actually have, but like often when I want to try something out on a Cotti cluster, my first thought is I want to go and make a kind cluster on my own machine and then try and see if this works in a local environment. So if you want a local cober netti environment kind is a good option to go. There's a few other options, there's like darker with Kubernetes, there's mini cube. Um I sort of got deeply invested in kind um for no particular reason, it's just an option. So I looked around and it turns out we don't have an official um Pulumi kind provider, but there is a Pulumi kind provider at um this one. I don't know where to whoops these. What's that Pulumi um Pulumi kind provider? I found this on the, there's not, it's not in the registry. All right, let's go and see if I can find that link. How are we doing on this cluster, by the way, still creating? Oh, there this goes created. Awesome. So now I'm going to grab my cup fig again. Um Let me stack output and I want to keep configuring out in the mud and now I'm on to grab information about my cluster. This one should work. Couldn't get version kind. Jason took over what? This is fantastic. Um Yeah. Well, let's do this. It's not on. OK. That's fantastic. I don't actually know what's going on here. Um Again, this worked yesterday. This is great. Um Of course it worked on my machine. Um There you go. OK. Let's just show those secrets what's going on. Hm. Right. This is, oh, this is not a Cuc Fike, is it? That is not a Cuban fig? That is bizarre. I thought I had a Cuban fig. Hm. Ok. Let's go back to my code. What am I doing here? No, that should do it. That should totally be a Cuban fig. Um hm. Huh. Sorry. I'm taking a look. I'm also listening to the trouble that I think my dog is getting into because I'm not paying attention. So, so that's very fascinating. Why am I not getting a good cuc fig. That's pretty weird to be fair. Um OK, so you're saying that Lke is the base 64 encoded coup config, right? OK. So, so wait, this is on the lino. OK. Let me see. I know I'm taking a look at the dock to see if there's uh so weird. Again. Which resource are you using on this one? Um I just want to go back to your code for a second. Le got it. Sorry. OK, I just wanted, I don't know why I was blanking on trying to and I'm getting the cuc can fig Yeah, so it's the, well, it's the base 64 encoded. So I think you need to but why would it be an ex? Right? Let me stack output. Let's see there should be a cub config in there. Um Yeah, you got to decode so engines, right? You have to decode it from the base 64. All right. Mhm. But you do like base 64 dash dash D code against that file and dump that somewhere. That should do it. Really? OK. I think so. Do you like like, OK, you got that. That is, that's the file you had. Yeah. And then do do like uh and then space and do a great, yeah, an arrow greater than and put it to like wherever you want to put it. Although I think Yeah. Yeah. And then now if you look at Leno config that should or if you are again, you can connect. Yeah. There you go. Yep. Yeah. OK. Again, this is interesting. Cool. I, I learned something. Let's find out if we can now see the clusters. Um But the file is different. Remember what you're setting to? Like you're, you gave it a different file name. Yeah, I know. Oh OK. Sorry, I'm doing that right now literally. So part of it is because the end, the end part of the Yeah, I was, I can't see everything because our, our faces are over part of your terminal. So that was uh do I need to scroll it back up? No, no, no, no, you're fine. You're fine, don't worry. Uh and we called it um what I do. Oh dash dash C config. OK. Here we are. We have two notes. That is what I asked for. Thank you, Leonard Bam. All right, cool. Um Next I was going to make a Yeah, we have 10 minutes. So what I'm gonna do is I'm going to make a third cluster and then sort of hm let's see. I was going to show off, I was going to show off the community um kind provider, KTIS and Docker provider. But what we might want to do if we have time is to abstract this away into a component. Um What do you think? So? Yeah, I think we can try. I'm trying to, it's funny because I haven't really played with too much on, um, component providers, um, in typescript, but I think we can figure it out. So let's do it. Um, the, just give me a sec. I'm was looking for, I, I just had something, uh, I swear to God, I just saw what I wanted um, at this. Um, ok, let's do 30th. Here you go. So now I only have these two. cool. So I put all of this in, in Ts and in order to make a component, what I want to do is um I go here to Pulumi to the Pulumi docks. Um get started and I wanna look for a component run offering a new component resource. Fabulous show in typescript. I would do something like this class, my component. Um This is, this is kind of why I wanted to do this stream in the first place. Um But you know, then you know, which can you drop that link because that's a different, a different one than I had found. That was we actually have a doc that sort of talks about this and it shows typescript and Python code. But all the um explanation is about Python. So like that was not a great one. So that's why I want to see what. So if you pop that in your do I probably private chat. OK. Uh oh Private chat. I found it, it was hidden by the bottom of my screen. There we go. Um that's the one. So what I'd like to do is wrap these things into a component. Um So let's see. New file. Mhm And we just call a component because I'm boring. Uh And then I would like to move all of this from index ts, right? I'd have to like basically copy everything and move it over here and then in my index and then wrap it into a let's see and then wrap it into this. Let me make this bigger again for y'all. I'm sorry. Go on, come on. Nope there. So um and wrap it into a component. So how do I do this um constructor name? OK. So my component needs to have a name which I'm gonna call the cluster. Um So this one, I did not rehearse this one at all because this is gonna be great. I'm, I'm into this too because again, like I said, I have not fussed with this in typescript. So I'm super excited. Um Yeah, I'm gonna make this hang on. What do you got? OK. You're gonna create a class now. Um But I think you need to, I I'm, it's interesting that it doesn't tell you to export the class. I don't. Yeah. So I've been creating the No, it's probably OK. It could just be, I'm looking, I'm just looking at a different example that we have of a component resource and typescript and, but I was looking at examples too and they were not super enlightening. OK. Well, let's, let's see what you get also. Um So now I need to instantiate the name right now, fun thing as we're going through this. Um And realize so if you were to watch a previous stream, last time we were on, we actually took a component resource that um um Lee had written in typescript and then showed how it was able to be then generated for all of the other like SD uh generate all the other sdks. And I remember Gwen and I were talking about this and it was sort of like, well, why would you need to do that? Because if you're creating a brand new component resource, you know, or pa package from the beginning, it would have that. And it's like, well, because you might have had something you wrote before. That was a thing. So this is, this is me trying to understand um how to abstract away the component so that I can do something in my index file that looks like this. Um And uh looks like what would it look like? Um Yeah. Constant. My cluster. 00 Actually, this cluster cluster equals um Let's see. Let's split this out to the right. What's, what's the um and then new and then I would call this something, right? This component package, new component resource. I don't know how to import this code using typescript. What do you uh sorry, I just lost my So wait, go to you import that as poum, you need to import it into the actual. Um So go into your go back to, are you in your main, it's hard for me to, that's your main index. This is my index file on the left. OK. So we are trying to make the components on the right. OK. So uh in your import statement do import and then like in Curley's do uh I think it'll be cluster lower space, you know, cluster. And then because that's the Oh no, I'm sorry. It's, it's my cluster, right? That's what you're OK? It should be my cluster. No, the same as what you did. I think new cluster, my cluster, new cluster and then um and then it's from and then, and then in quote dot slash whatever. I, I can't see the name of the file component but you don't do the TS just components just that. OK. So that um did you save the file? Is the file successful? And is it in the same path? Like is that the right path? Um oh Do you need a wait, what, what's, what's the red squiggle? What's it complaining about it? It cannot find module components or its corresponding type declarations because it probably didn't like declare anything here. Yeah. Hang on. Let me, how does that work? Give me a second. I'm gonna look at um see because you didn't export it. See, that's the thing I think you need to, I think it needs to be export class, web server, not just the class because you're not exporting it. So nobody's, yep. That piers got export class. But I don't know why your example doesn't say to do that. Um Still not, well, I also haven't like fully implemented it. I know it but it's still complaining that it's oh maybe because the class is just not done. Yeah, constructor name. I'm just following this and no, I know I'm looking at, I don't know what to do. So maybe we should do a follow up. Yeah. Pier says everything has to be in the constructor. OK. So I think it's just because the constructor isn't done right. So, but yeah, we are running, we are running, we only got a couple of minutes. So um we will do a follow up um that said, speaking of uh following up on things, don't forget that uh we have Pulumi up is uh coming uh May 4th. So number one, please come in and register and check that out and we will also be part of Pulumi up. So on the second day, uh so on May 5th. So on the follow up day, we are having our first ever Pulumi Community Summit, which is gonna be a few hours of community driven conversation in virtual open spaces. So, um if you go to, I will actually give me one second. I'm gonna grab the link for that um for you to suggest uh topics. Um Sorry, I'm not prepared. Uh But um, yeah, go to this right. Um All right, while Maddie is looking and trying to talk, I want to thank everyone to like show up and watch me flail in public. That was scary. Um Thank you all for being kind and helpful. Um I am so excited. You're all here and uh this is all a continuing community effort to like, you know, show what's possible with Pulumi, make Pulumi better. Um And you know, hopefully for everybody including me to learn stuff. Um So we, we got through the whole thing and we didn't make one galaxy quest reference or joke. So we fundamentally completely. Are you telling me we failed? We really did, but we'll just have to do it again. Uh But this was awesome. Thank you. I hope you had a really good time. I had a good time. Everybody. Thanks for joining and don't forget to follow or subscribe based upon whatever way you're uh watching us and we will see you on the.

---
