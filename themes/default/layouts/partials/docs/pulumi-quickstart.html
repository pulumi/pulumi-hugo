{{ $steps := .Params.steps }}
{{ $install := $steps.install }}
{{ $credentials := $steps.credentials }}


<section class="content pulumi-quickstart">
    <p class="intro">{{ .Params.intro }}</p>

    <div id="accordion-quickstart-customize">
        <input type="checkbox" id="accordion-checkbox-quickstart-customize" checked />
        <label for="accordion-checkbox-quickstart-customize" class="show">
            <div class="heading">
                <h2 id="accordion-heading" class="accordion-heading">{{ .Params.customize.heading }}</h2>
                <div class="icon icon-18-18 customize-expand-more-18-18"></div>
            </div>
        </label>
        <label for="accordion-checkbox-quickstart-customize" class="hide">
            <div class="heading">
                <h2 id="accordion-heading" class="accordion-heading">{{ .Params.customize.heading }}</h2>
                <div class="icon icon-18-18 customize-expand-less-18-18"></div>
            </div>
        </label>
        <div class="accordion-content">
            <div class="content">
                <div class="customize-section osx">
                    <p>OS</p>
                    <div class="labels">
                        <label class="radio-label selected" for="os-osx-radio">OSX</label>
                        <label class="radio-label" for="os-windows-radio">Windows</label>
                        <label class="radio-label" for="os-linux-radio">Linux</label>
                    </div>
                </div>

                <div class="customize-section cloud">
                    <p>Cloud</p>
                    <div class="labels-and-checkbox">
                        <div class="labels">
                            <label class="radio-label selected" for="cloud-aws-radio">AWS</label>
                            <label class="radio-label" for="cloud-azure-radio">Azure</label>
                            <label class="radio-label" for="cloud-google-cloud-radio">Google Cloud</label>
                            <label class="radio-label" for="cloud-kubernetes-radio">Kubernetes</label>
                        </div>
                        <div class="checkbox">
                            <input type="checkbox" id="credentials-checkbox" name="credentials-checkbox" />
                            <label class="checkbox-label" id="credentials-checkbox" for="credentials-checkbox">{{ $credentials.checkbox_label }}</label>
                        </div>
                    </div>
                </div>

                <div class="customize-section language">
                    <p>Language</p>
                    <div class="labels">
                        <label class="radio-label selected" for="language-typescript-radio">TypeScript</label>
                        <label class="radio-label" for="language-python-radio">Python</label>
                        <label class="radio-label" for="language-go-radio">Go</label>
                        <label class="radio-label" for="language-csharp-radio">C#</label>
                        <label class="radio-label" for="language-java-radio">Java</label>
                        <label class="radio-label" for="language-yaml-radio">YAML</label>
                    </div>
                </div>

                <div class="customize-section template">
                    <p>Template</p>
                    <div class="labels">
                        <label class="radio-label selected" for="template-starter-radio">Starter</label>
                        <label class="radio-label" for="template-container-service-radio">Container service</label>
                        <label class="radio-label" for="template-serverless-app-radio">Serverless app</label>
                        <label class="radio-label" for="template-static-website-radio">Static website</label>
                        <label class="radio-label" for="template-virtual-machine-radio">Virtual machine</label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <ol class="steps-counter">
        <li class="install step">
            {{ $install := $steps.install }}
            <div class="content-block">
                <h2 id="step-one" class="step-heading">{{ $install.heading }}</h2>
                <input type="radio" id="os-osx-radio" name="os-radio" checked />
                <div class="content code-block install-osx highlight">
                    <pre class="chroma"><code>{{ $install.command.osx }}</code></pre>
                    <div class="copy-button-container">
                        <pulumi-tooltip>
                            <span class="tooltip-target">
                                <button class="copy-button"><i class="far fa-copy copy text-xl"></i></button>
                            </span>
                            <span class="tooltip-content" role="tooltip">
                                <span slot="content">Copy</span>
                            </span>
                        </pulumi-tooltip>
                    </div>
                </div>
                <input type="radio" id="os-windows-radio" name="os-radio" />
                <div class="content code-block install-windows highlight">
                    <pre class="chroma"><code>{{ $install.command.windows }}</code></pre>
                    <div class="copy-button-container">
                        <pulumi-tooltip>
                            <span class="tooltip-target">
                                <button class="copy-button"><i class="far fa-copy copy text-xl"></i></button>
                            </span>
                            <span class="tooltip-content" role="tooltip">
                                <span slot="content">Copy</span>
                            </span>
                        </pulumi-tooltip>
                    </div>
                </div>

                <input type="radio" id="os-linux-radio" name="os-radio" />
                <div class="content code-block install-linux highlight">
                    <pre class="chroma"><code>{{ $install.command.linux }}</code></pre>
                    <div class="copy-button-container">
                        <pulumi-tooltip>
                            <span class="tooltip-target">
                                <button class="copy-button"><i class="far fa-copy copy text-xl"></i></button>
                            </span>
                            <span class="tooltip-content" role="tooltip">
                                <span slot="content">Copy</span>
                            </span>
                        </pulumi-tooltip>
                    </div>
                </div>
            </div>
        </li>
        <li class="credentials step">
            <input type="radio" id="cloud-aws-radio" name="credentials-radio" value="aws" checked />
            <div class="content aws">
                <h2 class="step-heading">{{ $credentials.aws.heading }}</h2>
                <p>{{ $credentials.aws.content | safeHTML }}</p>
            </div>
            <input type="radio" id="cloud-azure-radio" name="credentials-radio" value="azure" />
            <div class="content azure">
                <h2 class="step-heading">{{ $credentials.azure.heading }}</h2>
                <p>{{ $credentials.azure.content | safeHTML }}</p>
            </div>
            <input type="radio" id="cloud-google-cloud-radio" name="credentials-radio" value="gcp" />
            <div class="content google-cloud">
                <h2 class="step-heading">{{ $credentials.google_cloud.heading }}</h2>
                <p>{{ $credentials.google_cloud.content | safeHTML }}</p>
            </div>
            <input type="radio" id="cloud-kubernetes-radio" name="credentials-radio" value="kubernetes" />
            <div class="content kubernetes">
                <h2 class="step-heading">{{ $credentials.kubernetes.heading }}</h2>
                <p>{{ $credentials.kubernetes.content | safeHTML }}</p>
            </div>
        </li>
        <li class="directory step">
            <div class="content">
                {{ $directory := $steps.directory }}
                <h2 id="step-three" class="step-heading">{{ $directory.heading }}</h2>
                <div class="content code-block directory highlight">
                    <pre class="chroma"><code>{{ $directory.command }}</code></pre>
                    <div class="copy-button-container">
                        <pulumi-tooltip>
                            <span class="tooltip-target">
                                <button class="copy-button"><i class="far fa-copy copy text-xl"></i></button>
                            </span>
                            <span class="tooltip-content" role="tooltip">
                                <span slot="content">Copy</span>
                            </span>
                        </pulumi-tooltip>
                    </div>
                </div>
            </div>
        </li>
        <li class="template step">
            <div class="templates">
                {{ $template := $steps.template }}
                <h2 id="step-four" class="step-heading">{{ $template.heading }}</h2>

                <!-- language radio group -->
                <input type="radio" name="language-radio" id="language-typescript-radio" value="typescript" checked />
                <input type="radio" name="language-radio" id="language-python-radio" value="python" />
                <input type="radio" name="language-radio" id="language-go-radio" value="go" />
                <input type="radio" name="language-radio" id="language-csharp-radio" value="csharp" />
                <input type="radio" name="language-radio" id="language-java-radio" value="java" />
                <input type="radio" name="language-radio" id="language-yaml-radio" value="yaml" />

                <!-- template radio group -->
                <input type="radio" id="template-starter-radio" name="templates-radio" value="" checked />
                <input type="radio" id="template-container-service-radio" name="templates-radio" value="container" />
                <input type="radio" id="template-serverless-app-radio" name="templates-radio" value="serverless" />
                <input type="radio" id="template-static-website-radio" name="templates-radio" value="static-website" />
                <input type="radio" id="template-virtual-machine-radio" name="templates-radio" value="vm" />

                <!-- controls code rendering based on the selected combination of cloud, language, and template. -->
                <script>
                    $(document).ready(function () {
                        $('input[name="language-radio"], input[name="credentials-radio"], input[name="templates-radio"]').change(function () {
                            if ($(this).is(":checked")) {
                                const selectedValue = $(this).val();
                                console.log("Selected value:", selectedValue);
                                const cloud = $('input[name="credentials-radio"]:checked').val();
                                const language = $('input[name="language-radio"]:checked').val();
                                const template = $('input[name="templates-radio"]:checked').val();
                                $("#template-command").html(`pulumi new ${template ? template + "-" : ""}${cloud}-${language}`);
                            }
                        });
                    });
                </script>
                <div class="content code-block template highlight">
                    <pre class="chroma"><code id="template-command">pulumi new aws-typescript</code></pre>
                    <div class="copy-button-container">
                        <pulumi-tooltip>
                            <span class="tooltip-target">
                                <button class="copy-button"><i class="far fa-copy copy text-xl"></i></button>
                            </span>
                            <span class="tooltip-content" role="tooltip">
                                <span slot="content">Copy</span>
                            </span>
                        </pulumi-tooltip>
                    </div>
                </div>
            </div>
        </li>
        <li class="deploy step">
            <div class="content">
                {{ $deploy := $steps.deploy }}
                <h2 id="step-five" class="step-heading">{{ $deploy.heading }}</h2>
                <div class="content code-block deploy highlight">
                    <pre class="chroma"><code>{{ $deploy.command }}</code></pre>
                    <div class="copy-button-container">
                        <pulumi-tooltip>
                            <span class="tooltip-target">
                                <button class="copy-button"><i class="far fa-copy copy text-xl"></i></button>
                            </span>
                            <span class="tooltip-content" role="tooltip">
                                <span slot="content">Copy</span>
                            </span>
                        </pulumi-tooltip>
                    </div>
                </div>
            </div>
        </li>
    </ol>
</section>
